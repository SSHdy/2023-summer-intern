webpackJsonp([28],{DVOT:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("tINT"),o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"spareRoom"}},[a("div",{staticClass:"query-box",attrs:{id:"queryBox"}},[a("div",{staticClass:"clearfix"},[a("div",{staticClass:"query-item"},[a("div",{staticClass:"query-title"},[e._v("房屋类型：")]),e._v(" "),a("div",{staticClass:"query-input"},[a("el-select",{attrs:{placeholder:"请选择房屋类型"},model:{value:e.housetypeId,callback:function(t){e.housetypeId=t},expression:"housetypeId"}},e._l(e.unitOptions,function(e){return a("el-option",{key:e.housetypeId,attrs:{label:e.housetypeName,value:e.housetypeId}})}))],1)]),e._v(" "),a("div",{staticClass:"query-item",staticStyle:{"margin-left":"50px"}},[a("div",{staticClass:"query-title"},[e._v("单位名称：")]),e._v(" "),a("div",{staticClass:"query-input"},[a("el-select",{attrs:{filterable:"",multiple:"",placeholder:"请选择单位名称"},model:{value:e.unitIdList,callback:function(t){e.unitIdList=t},expression:"unitIdList"}},e._l(e.unitArr,function(e){return a("el-option",{key:e.unitId,attrs:{label:e.unitName,value:e.unitId}})}))],1)]),e._v(" "),a("div",{staticClass:"query-item",staticStyle:{"margin-left":"50px"}},[a("div",{staticClass:"query-title"},[e._v("位置：")]),e._v(" "),a("div",{staticClass:"query-input"},[a("tree-select",{attrs:{treeShow:e.treeShow,inputWidth:"100%",inputHeight:"34px"},on:{loadNode:e.loadNodes,handleCheckChange:e.handleCheckChange,handleNodeExpand:e.handleNodeExpand}})],1)]),e._v(" "),a("div",{staticClass:"query-btn"},[a("search-btn",{on:{clickBtn:e.search}}),e._v(" "),a("reset-btn",{on:{clickBtn:e.reset}})],1)])]),e._v(" "),a("div",{staticClass:"table-box"},[a("table-component",{attrs:{tableData:e.tableData,tableHeight:e.tableHeight},on:{select:e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"index",width:"50",label:"编号",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"position",label:"位置",align:"center"}},e._l(e.address,function(e){return a("el-table-column",{key:e.id,attrs:{label:e.label,align:"center",prop:e.prop,width:e.width,"show-overflow-tooltip":!0}})})),e._v(" "),a("el-table-column",{attrs:{prop:"houseUseArea",label:"使用面积(m²)",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"houseBuildAreas",label:"建筑面积(m²)",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"housetypeName",label:"房屋类型",align:"center"}})],1),e._v(" "),a("div",{staticClass:"table-operate-box",attrs:{id:"operateBox"}},[a("div",{staticClass:"operate-btn"},[e._v("\n        总计  \n        "),a("span",[e._v("房间数量:"+e._s(e.total))]),e._v(" "),a("span",[e._v("使用面积:"+e._s(e.houseUseAreaSum)+"m²")]),e._v(" "),a("span",[e._v("建筑面积:"+e._s(e.houseBuildAreaSum)+"m²")])]),e._v(" "),a("div",{staticClass:"operate-pager"},[a("table-pagination",{attrs:{currentPage:e.currentPage,pageSize:e.pageSize,total:e.total},on:{"size-change":e.changeSize,"page-change":e.changePage}})],1)])],1)])},staticRenderFns:[]};var r=function(e){a("vtqT")},l=a("VU/8")(i.a,o,!1,r,null,null);t.default=l.exports},tINT:function(e,t,a){"use strict";(function(e){var i=a("hmyF"),o=a("zu8U"),r=a("Oizb"),l=a("yzMb"),s=a("5kkW"),n=a("3a1n"),u=a("WHmA"),d=a("uSev"),h=a("FAvH"),c=a("GR1E"),f=a("OMJi");a.n(f);t.a={components:{searchBtn:s.a,resetBtn:n.a,treeSelect:u.a,tableBtnGroup:h.a,tablePagination:c.a,tableComponent:d.a},data:function(){return{housetypeId:"",unitIdList:[],unitArr:[],unitOptions:[],treeShow:!0,form:{yardId:"",buildId:"",floorName:"",houseId:""},loading:null,tableData:[],tableHeight:0,currentPage:1,pageSize:15,total:1,address:[{id:1,label:"院落",prop:"yardName",width:200},{id:2,label:"楼座",prop:"buildName",width:100},{id:3,label:"楼层",prop:"floorName",width:100},{id:4,label:"房间",prop:"houseNumber",width:100}],houseUseAreaSum:0,houseBuildAreaSum:0}},created:function(){this.getHouseType()},methods:{loadingStart:function(e){this.loading||(this.loading=this.$loading({lock:!0,text:"正在加载...",spinner:"el-icon-loading",target:e,customClass:"loading-box"}))},loadingEnd:function(){this.loading&&(this.loading.close(),this.loading=null)},handleSelectionChange:function(e){this.selectData=e},getUnit:function(){var e=this;Object(i.h)().then(function(t){e.unitArr=t})},changeSize:function(e){this.currentPage=1,this.pageSize=e,this.getList()},changePage:function(e){this.currentPage=e,this.getList()},search:function(){this.currentPage=1,this.getList()},reset:function(){this.currentPage=1,l.a.$emit("clearTreeSelectVal"),this.housetypeId="",this.form.yardId="",this.form.buildId="",this.form.floorName="",this.form.houseId="",this.unitIdList=[],this.getList()},getHouseType:function(){var e=this;Object(r.g)().then(function(t){e.unitOptions=t})},getList:function(){var e=this;this.loadingStart(".table-box"),Object(i.a)(this.currentPage,this.pageSize,this.form,this.housetypeId,this.unitIdList).then(function(t){e.loadingEnd(),e.tableData=[],e.total=0,e.houseBuildAreaSum=t.houseBuildAreaSum?t.houseBuildAreaSum.toFixed(2):0,e.houseUseAreaSum=t.houseUseAreaSum?t.houseUseAreaSum.toFixed(2):0,t.spareRoomDtoPage.records.length>0&&(e.tableData=t.spareRoomDtoPage.records,e.total=t.spareRoomDtoPage.total,e.tableData.forEach(function(e){e.useBuildArea?(e.houseUseArea?e.houseBuildAreas=e.houseUseArea.toFixed(2):e.houseBuildAreas="-",e.houseUseArea="-"):(e.houseBuildAreas=(e.houseUseArea/e.buildCoe).toFixed(2),e.houseUseArea=e.houseUseArea?e.houseUseArea.toFixed(2):"")}))}).catch(function(t){e.loadingEnd();var a=t.result?t.result:"获取超标房间信息列表失败";e.$message({message:a,type:"error"})})},loadNodes:function(e,t){var a=this;if(0===e.level)Object(o.g)(null,0,null).then(function(e){return e.forEach(function(e){e.expand&&void 0!==e.expand||(e.leaf=!0)}),t(e)}).catch(function(e){var t=e.result?e.result:"树获取失败";a.$message({message:t,type:"error"})}),setTimeout(function(){if(!a.form.yardId||a.form.buildId||a.form.floorName||a.form.houseId){if(a.form.yardId&&a.form.buildId&&!a.form.floorName&&!a.form.houseId){var e={level:2};e.id_yard=a.form.yardId,e.id_build=a.form.yardId+":"+a.form.buildId,l.a.$emit("setTreeDefaultVal",e)}else if(a.form.yardId&&a.form.buildId&&a.form.floorName&&!a.form.houseId){var t={level:3};t.id_yard=a.form.yardId,t.id_build=a.form.yardId+":"+a.form.buildId,t.buildId=a.form.buildId,t.id_floor=a.form.yardId+":"+a.form.buildId+":"+a.form.floorName,l.a.$emit("setTreeDefaultVal",t)}else if(a.form.yardId&&a.form.buildId&&a.form.floorName&&a.form.houseId){var i={level:4};i.id_yard=a.form.yardId,i.id_build=a.form.yardId+":"+a.form.buildId,i.id_floor=a.form.yardId+":"+a.form.buildId+":"+a.form.floorName,i.floorName=a.form.floorName,i.id_house=a.form.houseId,l.a.$emit("setTreeDefaultVal",i)}}else{var o={level:1};o.id_yard=a.form.yardId,l.a.$emit("setTreeDefaultVal",o)}},1e3);else if(3===e.level){var i=sessionStorage.getItem("repairRemind_buildId")-0;Object(o.g)(e.data.value,3,null,i).then(function(e){return e.forEach(function(e){e.expand&&void 0!==e.expand||(e.leaf=!0)}),t(e)}).catch(function(e){var t=e.result?e.result:"树获取失败";a.$message({message:t,type:"error"})})}else Object(o.g)(e.data.value,e.data.type,null).then(function(e){return e.forEach(function(e){e.expand&&void 0!==e.expand||(e.leaf=!0)}),t(e)}).catch(function(e){var t=e.result?e.result:"树获取失败";a.$message({message:t,type:"error"})})},handleCheckChange:function(e){this.form.yardId="",this.form.buildId="",this.form.floorName="",this.form.houseId="",this.currentLevel=e.type,1===e.type?this.form.yardId=e.value:2===e.type?this.form.buildId=e.value:3===e.type?this.form.floorName=e.value:this.form.houseId=e.value},handleNodeExpand:function(e,t){1===t.level?this.form.yardId=e.value:2===t.level?(this.form.buildId=e.value,sessionStorage.setItem("repairRemind_buildId",e.value)):3===t.level&&(this.form.floorName=e.value)}},mounted:function(){var t=this;setTimeout(function(){t.getUnit();var a=e("#mainDiv").height(),i=e("#queryBox").outerHeight(!0),o=e("#operateBox").height();t.tableHeight=a-i-o,t.getList()},1)}}}).call(t,a("7t+N"))},vtqT:function(e,t){}});
//# sourceMappingURL=28.8a27a51da10c23ddffa6.js.map