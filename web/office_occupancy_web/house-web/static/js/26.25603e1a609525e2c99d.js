webpackJsonp([26],{"7/hw":function(e,t,o){"use strict";t.i=function(){return new a.a(function(e,t){n.a.post(r.f+"/yard/yardUnitReport",null).then(function(t){e(t)},function(e){t(e)})})},t.e=function(){return new a.a(function(e,t){n.a.post(r.f+"/reportUnit/businessHouse",null).then(function(t){e(t)},function(e){t(e)})})},t.f=function(){return new a.a(function(e,t){n.a.post(r.f+"/reportUnit/constructHouseList",null).then(function(t){e(t)},function(e){t(e)})})},t.h=function(e,t,o,l,i){return new a.a(function(a,s){n.a.post(r.f+"/reportUnit/reportUnitList",{currentPage:e,pageSize:t,reportYear:o,unitName:l,state:i}).then(function(e){a(e)},function(e){s(e)})})},t.j=function(e){return new a.a(function(t,o){n.a.post(r.f+"/reportUnit/reportUnit",e).then(function(e){t(e)},function(e){o(e)})})},t.g=function(){return new a.a(function(e,t){n.a.post(r.f+"/downloadTemplate/downloadTemplateList").then(function(t){e(t)},function(e){t(e)})})},t.k=function(){return new a.a(function(e,t){n.a.post(r.f+"/distInformation/selectDistInfo").then(function(t){e(t)},function(e){t(e)})})},t.b=function(e){return new a.a(function(t,o){Object(n.a)({method:"post",url:r.f+"/reportUnit/exportDataExcel",responseType:"arraybuffer",data:e}).then(function(e){t(e)},function(e){o(e)})})},t.d=function(){return new a.a(function(e,t){n.a.post(r.f+"/reportUnit/unitList",{}).then(function(t){e(t)},function(e){t(e)})})},t.a=function(e){return new a.a(function(t,o){Object(n.a)({method:"post",url:r.f+"/reportUnit/downLoad",responseType:"arraybuffer",data:{addressList:e}}).then(function(e){t(e)},function(e){o(e)})})},t.c=function(e){return new a.a(function(t,o){n.a.post(r.f+"/reportUnit/allReportEnclosure",{reportYear:e}).then(function(e){t(e)},function(e){o(e)})})};var l=o("//Fk"),a=o.n(l),n=o("eOoE"),r=o("u3Mf")},Bx3M:function(e,t){},O1he:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=o("V1Io"),a={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{id:"dataCollect"}},[o("div",{staticClass:"tab-container"},[o("export-btn",{on:{clickBtn:e.openExportDialog}}),e._v(" "),o("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[o("el-tab-pane",{attrs:{label:"办公用房",name:"office"}},[o("div",{staticClass:"table-box"},[o("table-component",{attrs:{tableData:e.tableData_office,tableHeight:e.tableHeight}},[o("el-table-column",{attrs:{type:"index",label:"序号",width:"50",align:"center",fixed:""}}),e._v(" "),o("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"position",label:"地址坐落",align:"center",width:"200",fixed:""}}),e._v(" "),o("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"siteArea",label:"用地面积(m²)",align:"center",width:"120",fixed:""}}),e._v(" "),o("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"totalCoveredArea",label:"总建筑面积(m²)",align:"center",width:"120",fixed:""}}),e._v(" "),o("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"officeCoveredArea",label:"办公用房建筑面积(m²)",align:"center"}}),e._v(" "),o("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"technologyCoveredArea",label:"技术业务用房建筑面积(m²)",align:"center"}}),e._v(" "),o("el-table-column",{attrs:{align:"center",label:"使用单位（多个单位填多条）及批复编制情况(人)"}},[o("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"unitName",label:"单位名称",align:"center","class-name":"table-cell-special",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.unitName,function(t,l){return o("div",{key:l,staticClass:"table-column-item"},[e._v(e._s(t))])})}}])}),e._v(" "),o("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"unitType",label:"类别",align:"center","class-name":"table-cell-special"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.unitType,function(t,l){return o("div",{key:l,staticClass:"table-column-item"},[e._v(e._s(t))])})}}])}),e._v(" "),o("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"cityOfficialStaffNum",label:"市级正职",align:"center","class-name":"table-cell-special"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.cityOfficialStaffNum,function(t,l){return o("div",{key:l,staticClass:"table-column-item"},[e._v(e._s(t))])})}}])}),e._v(" "),o("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"cityDeputyStaffNum",label:"市级副职",align:"center","class-name":"table-cell-special"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.cityDeputyStaffNum,function(t,l){return o("div",{key:l,staticClass:"table-column-item"},[e._v(e._s(t))])})}}])}),e._v(" "),o("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"bureauOfficialStaffNum",label:"正局（处）级",align:"center","class-name":"table-cell-special"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.bureauOfficialStaffNum,function(t,l){return o("div",{key:l,staticClass:"table-column-item"},[e._v(e._s(t))])})}}])}),e._v(" "),o("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"bureauDeputyStaffNum",label:"副局（处）级",align:"center","class-name":"table-cell-special"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.bureauDeputyStaffNum,function(t,l){return o("div",{key:l,staticClass:"table-column-item"},[e._v(e._s(t))])})}}])}),e._v(" "),o("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"underDirectorNum",label:"局（处）级以下",align:"center","class-name":"table-cell-special"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.underDirectorNum,function(t,l){return o("div",{key:l,staticClass:"table-column-item"},[e._v(e._s(t))])})}}])})],1),e._v(" "),o("el-table-column",{attrs:{align:"center",label:"基本办公用房使用面积(m²)"}},[o("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"officeUseArea",label:"办公室",align:"center"}}),e._v(" "),o("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"serviceUseArea",label:"服务用房",align:"center"}}),e._v(" "),o("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"equipmentUseArea",label:"设备用房",align:"center"}}),e._v(" "),o("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"totalUseArea",label:"合计",align:"center"}})],1),e._v(" "),o("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"affiliatedCoveredArea",label:"附属用房建筑面积",align:"center"}}),e._v(" "),o("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"registration",label:"权属登记情况",align:"center"}}),e._v(" "),o("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"buildingAge",label:"建设年代",align:"center"}}),e._v(" "),o("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"isRent",label:"是否为租（借）用",align:"center"}}),e._v(" "),o("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"remark",label:"备注",align:"center"}})],1)],1)]),e._v(" "),o("el-tab-pane",{attrs:{label:"技术业务用房",name:"technology"}},[o("div",{staticClass:"table-box"},[o("table-component",{attrs:{tableData:e.tableData_technology,tableHeight:e.tableHeight}},[o("el-table-column",{attrs:{type:"index",label:"序号",width:"50",align:"center"}}),e._v(" "),o("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"yardPosition",label:"地址坐落",align:"center"}}),e._v(" "),o("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"coveredArea",label:"用地面积(m²)",align:"center"}}),e._v(" "),o("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"buildArea",label:"总建筑面积(m²)",align:"center"}}),e._v(" "),o("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"unitNameList",label:"主要使用单位",align:"center"}}),e._v(" "),o("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"warrantRemark",label:"权属登记情况",align:"center"}}),e._v(" "),o("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"buildDate",label:"建设年代",align:"center"}}),e._v(" "),o("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"remark",label:"备注",align:"center"}})],1)],1)]),e._v(" "),o("el-tab-pane",{attrs:{label:"办公用房建设项目",name:"construction"}},[o("div",{staticClass:"table-box"},[o("table-component",{attrs:{tableData:e.tableData_construction,tableHeight:e.tableHeight}},[o("el-table-column",{attrs:{type:"index",label:"序号",width:"50",align:"center"}}),e._v(" "),o("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"projectName",label:"项目名称",align:"center"}}),e._v(" "),o("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"approvalDepartment",label:"审批部门",align:"center"}}),e._v(" "),o("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"unitName",label:"建设单位",align:"center"}}),e._v(" "),o("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"unitList",label:"主要使用单位",align:"center"}}),e._v(" "),o("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"yardPosition",label:"地址坐落",align:"center"}}),e._v(" "),o("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"buildArea",label:"建设规模(m²)",align:"center"}}),e._v(" "),o("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"estimateInvestment",label:"估算投资(万元)",align:"center"}}),e._v(" "),o("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"remark",label:"备注",align:"center"}})],1)],1)])],1)],1),e._v(" "),o("el-dialog",{attrs:{visible:e.dialogVisible,"close-on-click-modal":!1,width:"780px",center:!0},on:{"update:visible":function(t){e.dialogVisible=t},open:e.dialogOpen,closed:e.dialogClosed}},[o("div",{staticClass:"dialog-title",attrs:{slot:"title"},slot:"title"},[o("span",[e._v("导出数据")])]),e._v(" "),o("el-form",{ref:"Form",attrs:{inline:!0,model:e.Form,rules:e.rules}},[o("el-form-item",{attrs:{label:"行政区划名称","label-width":"120px"}},[o("div",{staticStyle:{width:"200px"}},[e._v(e._s(e.Form.distName))])]),e._v(" "),o("el-form-item",{attrs:{label:"行政区划级别","label-width":"120px",prop:"distLevel"}},[o("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择行政区划级别",size:"small"},model:{value:e.Form.distLevel,callback:function(t){e.$set(e.Form,"distLevel",t)},expression:"Form.distLevel"}},e._l(e.distLevelOpt,function(e,t){return o("el-option",{key:t,attrs:{label:e,value:e}})}))],1),e._v(" "),o("el-form-item",{attrs:{label:"行政区划代码","label-width":"120px",prop:"distCode"}},[o("el-input",{attrs:{size:"small",placeholder:"请输入行政区划代码"},model:{value:e.Form.distCode,callback:function(t){e.$set(e.Form,"distCode","string"==typeof t?t.trim():t)},expression:"Form.distCode"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"填表人单位","label-width":"120px",prop:"fillerUnit"}},[o("el-input",{attrs:{size:"small",placeholder:"请输入填表人单位"},model:{value:e.Form.fillerUnit,callback:function(t){e.$set(e.Form,"fillerUnit","string"==typeof t?t.trim():t)},expression:"Form.fillerUnit"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"填表人姓名","label-width":"120px",prop:"fillerName"}},[o("el-input",{attrs:{size:"small",placeholder:"请输入填表人姓名"},model:{value:e.Form.fillerName,callback:function(t){e.$set(e.Form,"fillerName","string"==typeof t?t.trim():t)},expression:"Form.fillerName"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"联系电话","label-width":"120px",prop:"contactNumber"}},[o("el-input",{attrs:{size:"small",placeholder:"请输入联系电话"},on:{blur:function(t){e.limitInt("contactNumber")}},nativeOn:{keyup:function(t){e.limitInt("contactNumber")}},model:{value:e.Form.contactNumber,callback:function(t){e.$set(e.Form,"contactNumber","string"==typeof t?t.trim():t)},expression:"Form.contactNumber"}})],1)],1),e._v(" "),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("cancel-btn",{attrs:{fontSize:14},on:{clickBtn:function(t){e.dialogVisible=!1}}}),e._v(" "),o("confirm-btn",{attrs:{fontSize:14},on:{clickBtn:e.exportData}})],1)],1)],1)},staticRenderFns:[]};var n=function(e){o("Bx3M")},r=o("VU/8")(l.a,a,!1,n,null,null);t.default=r.exports},V1Io:function(e,t,o){"use strict";(function(e){var l=o("fZjL"),a=o.n(l),n=o("d7EF"),r=o.n(n),i=o("W3Iv"),s=o.n(i),c=o("BO1k"),u=o.n(c),f=o("mvHQ"),p=o.n(f),m=o("u3Mf"),d=o("7/hw"),b=(o("yzMb"),o("uSev")),v=o("dO4M"),g=o("FAvH"),h=o("GR1E"),w=o("fYBn"),y=o("02tb"),_=o("qTyM");t.a={components:{singleBtnGroup:v.a,tableBtnGroup:g.a,tablePagination:h.a,tableComponent:b.a,cancelBtn:w.a,confirmBtn:y.a,exportBtn:_.a},data:function(){return{loading:null,tableHeight:0,officeKeyArr_1:["unitName","unitType","cityOfficialStaffNum","cityDeputyStaffNum","bureauOfficialStaffNum","bureauDeputyStaffNum","underDirectorNum"],officeKeyArr_2:["position","siteArea","totalCoveredArea","officeCoveredArea","technologyCoveredArea","officeUseArea","serviceUseArea","equipmentUseArea","totalUseArea","affiliatedCoveredArea","registration","buildingAge","isRent","remark"],officeKeyArr_3:["siteArea","totalCoveredArea","officeCoveredArea","technologyCoveredArea","officeUseArea","serviceUseArea","equipmentUseArea","totalUseArea","affiliatedCoveredArea"],tableData_office:[],tableData_technology:[],tableData_construction:[],dialogVisible:!1,Form:{distInformationId:"",distName:m.d,distLevel:"",distCode:"",fillerUnit:"",fillerName:"",contactNumber:""},activeName:"office",distLevelOpt:["市（州、盟）","县（区、旗）","乡（镇）"],businessHouseDtos:null,yardUnitProfessionalDtos:null,constructHouseDtos:null,rules:{distLevel:[{required:!0,message:"请选择行政区划级别",trigger:"change"}],distCode:[{required:!0,message:"行政区划代码不能为空",trigger:"blur"}],fillerUnit:[{required:!0,message:"填表人单位不能为空",trigger:"blur"}],fillerName:[{required:!0,message:"填表人姓名不能为空",trigger:"blur"}],contactNumber:[{required:!0,message:"联系电话不能为空",trigger:"blur"}]}}},methods:{loadingStart:function(e){this.loading||(this.loading=this.$loading({lock:!0,text:"正在加载...",spinner:"el-icon-loading",target:e,customClass:"loading-box"}))},loadingEnd:function(){this.loading&&(this.loading.close(),this.loading=null)},getList:function(e,t){var o=this;this.loadingStart(".table-box"),"office"===e?(this.loadingEnd(),Object(d.i)().then(function(e){t&&(o.yardUnitProfessionalDtos=JSON.parse(p()(e))),e.forEach(function(e){for(var t=0;t<o.officeKeyArr_1.length;t++){var l=o.officeKeyArr_1[t];e[l]=[]}for(var a=0;a<o.officeKeyArr_2.length;a++){var n=o.officeKeyArr_2[a];void 0===e[n]||""===e[n]||null===e[n]?e[n]="-":-1!==o.officeKeyArr_3.indexOf(n)&&(e[n]=e[n].toFixed(2))}var r=e.useUnitAndSituation;if(r&&r.length>0)r.forEach(function(t){for(var l=0;l<o.officeKeyArr_1.length;l++){var a=o.officeKeyArr_1[l];t[a]?e[a].push(t[a]):0===t[a]?e[a].push(0):e[a].push("-")}});else for(var i=0;i<o.officeKeyArr_1.length;i++){var s=o.officeKeyArr_1[i];e[s].push("-")}}),o.tableData_office=e,o.loadingEnd()}).catch(function(e){o.loadingEnd();var t=e.result?e.result:"办公用房列表获取失败";o.$message({message:t,type:"error"})})):"technology"===e?Object(d.e)().then(function(e){e&&e.length>0&&(e.forEach(function(e){e.buildDate=e.buildDate?o.formatDate(e.buildDate):"-",e.unitNameList=e.unitNameList?e.unitNameList.join("，"):"-",e.coveredArea=e.coveredArea?e.coveredArea.toFixed(2):"-",e.buildArea=e.buildArea?e.buildArea.toFixed(2):"-",e.remark=e.remark?e.remark:"-",e.warrantRemark=e.warrantRemark?e.warrantRemark:"-",e.yardPosition=e.yardPosition?e.yardPosition:"-"}),o.tableData_technology=e),o.loadingEnd()}).catch(function(e){o.loadingEnd();var t=e.result?e.result:"技术业务用房列表获取失败";o.$message({message:t,type:"error"})}):"construction"===e&&Object(d.f)().then(function(e){e.forEach(function(e){e.buildArea=e.buildArea?e.buildArea.toFixed(2):"-",e.estimateInvestment=e.estimateInvestment?e.estimateInvestment.toFixed(2):"-",e.remark=e.remark?e.remark:"-",e.projectName=e.projectName?e.projectName:"-",e.approvalDepartment=e.approvalDepartment?e.approvalDepartment:"-",e.unitName=e.unitName?e.unitName:"-",e.unitList=e.unitList?e.unitList.join("，"):"-",e.yardPosition=e.yardPosition?e.yardPosition:"-"}),o.tableData_construction=e,o.loadingEnd()}).catch(function(e){o.loadingEnd();var t=e.result?e.result:"办公用房建设项目列表获取失败";o.$message({message:t,type:"error"})})},getAllInfo:function(){var e=this;Object(d.e)().then(function(t){e.businessHouseDtos=t}).catch(function(t){e.loadingEnd();var o=t.result?t.result:"技术业务用房列表获取失败";e.$message({message:o,type:"error"})}),Object(d.f)().then(function(t){e.constructHouseDtos=t}).catch(function(t){e.loadingEnd();var o=t.result?t.result:"办公用房建设项目列表获取失败";e.$message({message:o,type:"error"})})},handleClick:function(e){this.getList(e.name)},selectDistInfo:function(){var e=this;Object(d.k)().then(function(t){var o=!0,l=!1,a=void 0;try{for(var n,i=u()(s()(t));!(o=(n=i.next()).done);o=!0){var c=n.value,f=r()(c,2),p=f[0],m=f[1];void 0!==e.Form[p]&&(e.Form[p]=m)}}catch(e){l=!0,a=e}finally{try{!o&&i.return&&i.return()}finally{if(l)throw a}}}).catch(function(t){var o=t.result?t.result:"行政区划信息获取失败";e.$message({message:o,type:"error"})})},openExportDialog:function(){this.dialogVisible=!0,this.selectDistInfo()},exportData:function(){var e=this;this.$refs.Form.validate(function(t){if(!t)return!1;var l={};l.distInformation=e.Form,l.businessHouseDtos=e.businessHouseDtos,l.yardUnitProfessionalDtos=e.yardUnitProfessionalDtos,l.constructHouseDtos=e.constructHouseDtos,Object(d.b)(l).then(function(t){o("3UNf")(t,decodeURIComponent(sessionStorage.getItem("CADdownloadFileName"))),e.$message({message:"导出成功",type:"success"}),e.dialogVisible=!1}).catch(function(t){var o=t.result?t.result:"导出数据失败";e.$message({message:o,type:"error"})})})},clearForm:function(e){for(var t in e){var o=this.getDataType(e[t]);if("String"===o)e[t]="";else if("Array"===o)e[t]=[];else if("Object"===o){a()(e[t]).length>0?this.clearForm(e[t]):e[t]={}}else e[t]=null}},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.Form.clearValidate()})},dialogClosed:function(){this.clearForm(this.Form),this.Form.distName=m.d},getDataType:function(e){var t=!0,o=!1,l=void 0;try{for(var a,n=u()(["String","Object","Number","Array","Function"]);!(t=(a=n.next()).done);t=!0){var r=a.value;if(Object.prototype.toString.call(e)==="[object "+r+"]")return r}}catch(e){o=!0,l=e}finally{try{!t&&n.return&&n.return()}finally{if(o)throw l}}},limitInt:function(e){this.Form[e]=this.Form[e].replace(/[^0-9]/g,"")},formatDate:function(e,t){var o=new Date(e),l=t||"yyyy-MM-dd",a={"M+":o.getMonth()+1,"d+":o.getDate(),"h+":o.getHours(),"m+":o.getMinutes(),"s+":o.getSeconds(),"q+":Math.floor((o.getMonth()+3)/3),S:o.getMilliseconds()};for(var n in/(y+)/.test(l)&&(l=l.replace(RegExp.$1,(o.getFullYear()+"").substr(4-RegExp.$1.length))),a)new RegExp("("+n+")").test(l)&&(l=l.replace(RegExp.$1,1==RegExp.$1.length?a[n]:("00"+a[n]).substr((""+a[n]).length)));return l}},mounted:function(){var t=this;this.getList("office",!0),this.getAllInfo(),setTimeout(function(){var o=e("#mainDiv").height(),l=e(".queryBox").outerHeight(!0)||0,a=e(".el-tabs__header").outerHeight(!0);t.tableHeight=o-l-a},1)}}}).call(t,o("7t+N"))}});
//# sourceMappingURL=26.25603e1a609525e2c99d.js.map