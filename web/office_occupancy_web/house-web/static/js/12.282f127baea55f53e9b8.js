webpackJsonp([12],{"1TH6":function(e,t){},"2l01":function(e,t,i){"use strict";(function(e){var n=i("yzMb"),a=i("gApy");i.n(a);t.a={props:{treeName:{type:String,default:"selectTree"},inputHeight:{type:String,default:"40px"},inputWidth:{type:String,default:"300px"},contentHeight:{type:String,default:"200px"},placeholderText:{type:String,default:"请选择"},treeShow:{type:Boolean,default:!1},treeData:{type:Array,default:function(){return[]}}},data:function(){return{showContent:!1,defaultProps:{children:"children",label:"name"},inputText:"",treeId:this.treeName+"_select_tree",defaultExpandedkeys:[],oldCheckedNodes:null,checkedfatherNodeId:null}},methods:{selectInputClick:function(t){t.stopPropagation(),this.showContent?e("#"+this.treeId).find(".el-icon-arrow-up").removeClass("is-reverse"):e("#"+this.treeId).find(".el-icon-arrow-up").addClass("is-reverse"),this.showContent=!this.showContent},handleCheckChange:function(e,t){var i=[];if(t.checkedNodes.concat(t.halfCheckedNodes).forEach(function(e){i.push(e.id)}),i.indexOf(e.id)>-1){var n=null;n=0!==e.type?parseInt(e.id.split(":")[0]):e.value,"special"==this.treeName&&this.$refs[this.treeName].setCheckedKeys([e.id]),this.checkedfatherNodeId&&n!==this.checkedfatherNodeId&&this.$refs[this.treeName].setCheckedKeys([e.id])}var a=this.$refs[this.treeName].getCheckedNodes(),s=this.$refs[this.treeName].getHalfCheckedNodes(),o=!1,l=[],c=0;if(a.length>0)for(var r=0;r<a.length;r++)if(3===a[r].type){var p=a[r].value;l.push(p)}for(var u=0;u<a.length;u++)if(1===a[u].type){var d=a[u].children;if(d&&d.length>0)for(var m=0;m<d.length;m++)for(var h=d[m].children,f=0;f<h.length;f++)l.indexOf(h[f].value)>-1&&c++}c===l.length&&(o=!0);var I=a.concat(s);this.$emit("handleCheckChange",I,o);var v=[];o?a.forEach(function(e){1===e.type&&v.push(e.name)}):a.forEach(function(e){3===e.type&&v.push(e.name)}),this.inputText=v.join(","),this.oldCheckedNodes=a.concat(s);for(var y=0;y<this.oldCheckedNodes.length;y++)if(0===this.oldCheckedNodes[y].type){this.checkedfatherNodeId=this.oldCheckedNodes[y].id;break}}},mounted:function(){var t=this;document.onclick=function(i){t.showContent=!1,e("#"+t.treeId).find(".el-icon-arrow-up").removeClass("is-reverse")},n.a.$off(this.treeName+"_select"),n.a.$off(this.treeName+"_clear"),n.a.$off(this.treeName+"_clearInput"),n.a.$on(this.treeName+"_select",function(e,i,n){t.inputText=e.join(","),setTimeout(function(){t.defaultExpandedkeys=n,t.$refs[t.treeName].setCheckedKeys(i)},100)}),n.a.$on(this.treeName+"_clear",function(){t.inputText="";for(var e=0;e<t.$refs[t.treeName].store._getAllNodes().length;e++)t.$refs[t.treeName].store._getAllNodes()[e].expanded=!1;t.$refs[t.treeName].setCheckedKeys([])}),n.a.$on(this.treeName+"_clearInput",function(){t.inputText=""})}}}).call(t,i("7t+N"))},"GtX+":function(e,t){},STPg:function(e,t,i){"use strict";var n=i("2l01"),a={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"tree-select-components",style:{width:e.inputWidth},attrs:{id:e.treeId}},[i("div",{staticClass:"selectInput-box",style:{width:e.inputWidth}},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.inputText,expression:"inputText"}],staticClass:"el-input__inner",style:{height:e.inputHeight,width:e.inputWidth},attrs:{type:"text",readonly:"readonly",autocomplete:"off",placeholder:e.placeholderText},domProps:{value:e.inputText},on:{click:function(t){e.selectInputClick(t)},input:function(t){t.target.composing||(e.inputText=t.target.value)}}}),e._v(" "),i("span",{staticClass:"el-input__suffix",on:{click:function(t){e.selectInputClick(t)}}},[e._m(0)])]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.showContent,expression:"showContent"}],staticClass:"content-box-dropdown",style:{height:e.contentHeight,width:e.inputWidth,top:e.inputHeight}},[e.treeShow?i("el-tree",{ref:e.treeName,style:{overflowY:"scroll",height:e.contentHeight},attrs:{"node-key":"id",props:e.defaultProps,data:e.treeData,"show-checkbox":"","default-expanded-keys":e.defaultExpandedkeys},on:{check:e.handleCheckChange}}):e._e()],1)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("span",{staticClass:"el-input__suffix-inner"},[t("i",{staticClass:"el-select__caret el-input__icon el-icon-arrow-up"})])}]};var s=function(e){i("GtX+")},o=i("VU/8")(n.a,a,!1,s,"data-v-1113008e",null);t.a=o.exports},VuyH:function(e,t,i){"use strict";t.h=function(){return new a.a(function(e,t){s.a.post(o.f+"/handle/selectAllHandlePo",null).then(function(t){e(t)},function(e){t(e)})})},t.f=function(){return new a.a(function(e,t){s.a.post(o.f+"/unit/getUnitByUser").then(function(t){e(t)},function(e){t(e)})})},t.i=function(){return new a.a(function(e,t){s.a.post(o.f+"/handle/selectHandlePo",null).then(function(t){e(t)},function(e){t(e)})})},t.e=function(e,t,i,n,l){return new a.a(function(a,c){s.a.post(o.f+"/specialInspection/getList",{currentPage:e,pageSize:t,unitId:i,yardIds:n,buildIds:l}).then(function(e){a(e)},function(e){c(e)})})},t.d=function(e){return new a.a(function(t,i){s.a.post(o.f+"/specialInspection/delete",{id:e}).then(function(e){t(e)},function(e){i(e)})})},t.c=function(e){return new a.a(function(t,i){s.a.post(o.f+"/specialInspection/batchDelete",e).then(function(e){t(e)},function(e){i(e)})})},t.b=function(e){return new a.a(function(t,i){s.a.post(o.f+"/specialInspection/addOrUpdate\n    ",{specialInspectionBuildId:e.specialInspectionBuildId,specialInspectionPoints:e.specialInspectionPoints,specialInspectionProblem:e.specialInspectionProblem,specialInspectionRectifyComments:e.specialInspectionRectifyComments,specialInspectionResult:e.specialInspectionResult,specialInspectionRectifyTime:e.specialInspectionRectifyTime,specialInspectionTime:e.specialInspectionTime,specialInspectionUnitId:e.specialInspectionUnitId,specialInspectionUserName:e.specialInspectionUserName,specialInspectionYardId:e.specialInspectionYardId}).then(function(e){t(e)},function(e){i(e)})})},t.a=function(e){return new a.a(function(t,i){s.a.post(o.f+"/specialInspection/addOrUpdate\n    ",{specialInspectionId:e.specialInspectionId,specialInspectionBuildId:e.specialInspectionBuildId,specialInspectionPoints:e.specialInspectionPoints,specialInspectionProblem:e.specialInspectionProblem,specialInspectionRectifyComments:e.specialInspectionRectifyComments,specialInspectionResult:e.specialInspectionResult,specialInspectionRectifyTime:e.specialInspectionRectifyTime,specialInspectionTime:e.specialInspectionTime,specialInspectionUnitId:e.specialInspectionUnitId,specialInspectionUserName:e.specialInspectionUserName,specialInspectionYardId:e.specialInspectionYardId}).then(function(e){t(e)},function(e){i(e)})})},t.j=function(e){return new a.a(function(t,i){s.a.post(o.f+"/specialInspection/specialDetail\n    ",{id:e}).then(function(e){t(e)},function(e){i(e)})})},t.g=function(e){return new a.a(function(t,i){s.a.post(o.f+"/specialInspection/reform\n    ",{specialInspectionId:e.specialInspectionId,specialInspectionRectifyResult:e.specialInspectionRectifyResult,specialInspectionRectifyState:e.specialInspectionRectifyState}).then(function(e){t(e)},function(e){i(e)})})};var n=i("//Fk"),a=i.n(n),s=i("eOoE"),o=i("u3Mf")},pgOM:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i("zsRa"),a={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"specialCheck"}},[i("div",{staticClass:"query-box",attrs:{id:"queryBox"}},[i("div",{staticClass:"clearfix"},[i("div",{staticClass:"query-item"},[i("div",{staticClass:"query-title"},[e._v("检查地点：")]),e._v(" "),i("div",{staticClass:"query-input"},[i("search-tree-select",{attrs:{treeData:e.allTreeData,treeShow:!0,inputWidth:"100%",inputHeight:"32px",treeName:e.searchTreeName},on:{handleCheckChange:e.handleSearchCheckChange}})],1)]),e._v(" "),i("div",{staticClass:"query-item",staticStyle:{"margin-left":"50px"}},[i("div",{staticClass:"query-title"},[e._v("相关单位：")]),e._v(" "),i("div",{staticClass:"query-input"},[i("el-select",{attrs:{placeholder:"请选择相关单位"},model:{value:e.unitId,callback:function(t){e.unitId=t},expression:"unitId"}},e._l(e.unitOptions,function(e){return i("el-option",{key:e.unitId,attrs:{label:e.unitName,value:e.unitId}})}))],1)]),e._v(" "),i("div",{staticClass:"query-btn"},[i("search-btn",{on:{clickBtn:e.search}}),e._v(" "),i("reset-btn",{on:{clickBtn:e.reset}})],1)])]),e._v(" "),i("div",{staticClass:"table-box"},[i("table-component",{attrs:{tableData:e.tableData,tableHeight:e.tableHeight},on:{select:e.handleSelectionChange}},[i("el-table-column",{attrs:{type:"selection",width:"50",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{label:"序号",type:"index",width:"50",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"yardName",label:"检查地点",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"unitName",label:"相关单位",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"specialInspectionResult",label:"检查结果",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"specialInspectionTime",label:"检查时间",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{label:"检查状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",{class:{danger:1==t.row.specialInspectionProblem,primary:!0}},[i("span",[e._v(e._s(1==t.row.specialInspectionProblem?"有问题":"没问题"))])])]}}])}),e._v(" "),i("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"specialInspectionUserName",label:"检查人",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{label:"操作",width:"240",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("single-btn-group",{attrs:{isShowDetail:!0,isShowrectify:1==t.row.specialInspectionProblem},on:{updateClick:function(i){e.singleUpdate(t.row)},deleteClick:function(i){e.singleDelete(t.row)},detailClick:function(i){e.singleDetail(t.row)},rectifyClick:function(i){e.singleRectify(t.row)}}})]}}])})],1),e._v(" "),i("div",{staticClass:"table-operate-box",attrs:{id:"operateBox"}},[i("div",{staticClass:"operate-btn"},[i("table-btn-group",{on:{addClick:e.addUnit,batchDeleteClick:e.batchDelete}})],1),e._v(" "),i("div",{staticClass:"operate-pager"},[i("table-pagination",{attrs:{currentPage:e.currentPage,pageSize:e.pageSize,total:e.total},on:{"size-change":e.changeSize,"page-change":e.changePage}})],1)])],1),e._v(" "),i("el-dialog",{attrs:{visible:e.dialogVisible,"close-on-click-modal":!1,width:"1100px",center:!0},on:{"update:visible":function(t){e.dialogVisible=t},open:e.dialogOpen,closed:e.dialogClosed}},[i("div",{staticClass:"dialog-title",attrs:{slot:"title"},slot:"title"},[i("span",[e._v(e._s(e.dialogTitle))])]),e._v(" "),i("el-form",{ref:"Form",attrs:{model:e.Form,inline:!0,rules:e.rules}},[i("el-form-item",{attrs:{label:"detail"===e.operateType?"相关单位:":"相关单位","label-width":"120px",prop:"specialInspectionUnitId"}},[i("el-select",{directives:[{name:"show",rawName:"v-show",value:"detail"!==e.operateType,expression:"operateType!=='detail'"}],attrs:{placeholder:"请选择相关单位"},model:{value:e.Form.specialInspectionUnitId,callback:function(t){e.$set(e.Form,"specialInspectionUnitId",t)},expression:"Form.specialInspectionUnitId"}},e._l(e.unitOptions,function(e){return i("el-option",{key:e.unitId,attrs:{label:e.unitName,value:e.unitId}})})),e._v(" "),i("span",{directives:[{name:"show",rawName:"v-show",value:"detail"==e.operateType,expression:"operateType=='detail'"}]},[e._v(e._s(e.Form.specialInspectionUnitName))])],1),e._v(" "),i("el-form-item",{attrs:{label:"detail"===e.operateType?"检查地点:":"检查地点","label-width":"120px",prop:"handleModuleList"}},[i("tree-select",{directives:[{name:"show",rawName:"v-show",value:"detail"!==e.operateType,expression:"operateType!=='detail'"}],attrs:{treeData:e.treeData,treeShow:e.treeShow,inputWidth:"100%",inputHeight:"34px",treeName:e.treeName},on:{handleCheckChange:e.handleCheckChange}}),e._v(" "),i("span",{directives:[{name:"show",rawName:"v-show",value:"detail"==e.operateType,expression:"operateType=='detail'"}]},[e._v(e._s(e.Form.position))])],1),e._v(" "),i("el-form-item",{attrs:{label:"detail"===e.operateType?"检查人:":"检查人","label-width":"120px",prop:"specialInspectionUserName"}},[i("el-input",{directives:[{name:"show",rawName:"v-show",value:"detail"!==e.operateType,expression:"operateType!=='detail'"},{name:"enter-trim",rawName:"v-enter-trim"}],attrs:{placeholder:"detail"!=e.operateType?"请输入检查人":"",size:"small"},model:{value:e.Form.specialInspectionUserName,callback:function(t){e.$set(e.Form,"specialInspectionUserName",t)},expression:"Form.specialInspectionUserName"}}),e._v(" "),i("span",{directives:[{name:"show",rawName:"v-show",value:"detail"==e.operateType,expression:"operateType=='detail'"}]},[e._v(e._s(e.Form.specialInspectionUserName))])],1),e._v(" "),i("el-form-item",{attrs:{label:"detail"===e.operateType?"检查时间:":"检查时间","label-width":"120px",prop:"specialInspectionTime"}},[i("el-date-picker",{directives:[{name:"show",rawName:"v-show",value:"detail"!==e.operateType,expression:"operateType!=='detail'"}],staticStyle:{width:"200px"},attrs:{type:"date",placeholder:"选择检查时间",size:"small","value-format":"yyyy-MM-dd"},model:{value:e.Form.specialInspectionTime,callback:function(t){e.$set(e.Form,"specialInspectionTime",t)},expression:"Form.specialInspectionTime"}}),e._v(" "),i("span",{directives:[{name:"show",rawName:"v-show",value:"detail"==e.operateType,expression:"operateType=='detail'"}]},[e._v(e._s(e.Form.specialInspectionTime))])],1),e._v(" "),i("el-form-item",{attrs:{label:"detail"===e.operateType?"发现问题:":"发现问题","label-width":"120px",prop:"specialInspectionProblem"}},["detail"!==e.operateType?i("el-radio",{attrs:{label:0,name:"specialInspectionProblem"},model:{value:e.Form.specialInspectionProblem,callback:function(t){e.$set(e.Form,"specialInspectionProblem",t)},expression:"Form.specialInspectionProblem"}},[e._v("否")]):e._e(),e._v(" "),"detail"!==e.operateType?i("el-radio",{attrs:{label:1,name:"specialInspectionProblem"},model:{value:e.Form.specialInspectionProblem,callback:function(t){e.$set(e.Form,"specialInspectionProblem",t)},expression:"Form.specialInspectionProblem"}},[e._v("是")]):e._e(),e._v(" "),"detail"===e.operateType?i("span",[e._v(e._s(0===e.Form.specialInspectionProblem?"否":"是"))]):e._e()],1),e._v(" "),i("el-form-item",{class:{detail:"detail"==e.operateType},attrs:{label:"detail"===e.operateType?"检查结果:":"检查结果","label-width":"120px",prop:"specialInspectionResult"}},[i("el-input",{directives:[{name:"enter-trim",rawName:"v-enter-trim"}],attrs:{placeholder:"detail"!=e.operateType?"请输入检查结果":"",type:"textarea",readonly:"detail"==e.operateType,size:"small"},model:{value:e.Form.specialInspectionResult,callback:function(t){e.$set(e.Form,"specialInspectionResult",t)},expression:"Form.specialInspectionResult"}})],1),e._v(" "),i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.Form.specialInspectionProblem&&!e.rectify,expression:"Form.specialInspectionProblem && !rectify"}],class:{detail:"detail"==e.operateType},attrs:{label:"detail"===e.operateType?"整改意见:":"整改意见","label-width":"120px",prop:"specialInspectionRectifyComments"}},[i("el-input",{directives:[{name:"enter-trim",rawName:"v-enter-trim"}],attrs:{placeholder:"detail"!=e.operateType?"请输入整改意见":"",readonly:"detail"==e.operateType,type:"textarea",size:"small"},model:{value:e.Form.specialInspectionRectifyComments,callback:function(t){e.$set(e.Form,"specialInspectionRectifyComments",t)},expression:"Form.specialInspectionRectifyComments"}})],1),e._v(" "),i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.Form.specialInspectionProblem&&!e.rectify,expression:"Form.specialInspectionProblem && !rectify"}],attrs:{label:"detail"===e.operateType?"整改时间:":"整改时间","label-width":"120px",prop:"specialInspectionRectifyTime"}},[i("el-date-picker",{directives:[{name:"show",rawName:"v-show",value:"detail"!==e.operateType,expression:"operateType!=='detail'"}],staticStyle:{width:"200px"},attrs:{type:"date",placeholder:"选择整改时间",size:"small","value-format":"yyyy-MM-dd"},model:{value:e.Form.specialInspectionRectifyTime,callback:function(t){e.$set(e.Form,"specialInspectionRectifyTime",t)},expression:"Form.specialInspectionRectifyTime"}}),e._v(" "),i("span",{directives:[{name:"show",rawName:"v-show",value:"detail"==e.operateType,expression:"operateType=='detail'"}]},[e._v(e._s(e.Form.specialInspectionRectifyTime))])],1),e._v(" "),i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.Form.specialInspectionProblem&&!e.rectify,expression:"Form.specialInspectionProblem && !rectify"}],attrs:{label:"detail"===e.operateType?"所扣分值:":"所扣分值","label-width":"120px",prop:"specialInspectionPoints"}},[i("el-input",{directives:[{name:"show",rawName:"v-show",value:"detail"!==e.operateType,expression:"operateType!=='detail'"}],attrs:{placeholder:"detail"!=e.operateType?"请输入所扣分值":"",size:"small"},nativeOn:{keyup:function(t){e.limitInt("specialInspectionPoints")}},model:{value:e.Form.specialInspectionPoints,callback:function(t){e.$set(e.Form,"specialInspectionPoints",t)},expression:"Form.specialInspectionPoints"}}),e._v(" "),i("span",{directives:[{name:"show",rawName:"v-show",value:"detail"==e.operateType,expression:"operateType=='detail'"}]},[e._v(e._s(e.Form.specialInspectionPoints))])],1),e._v(" "),i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.rectify,expression:"rectify"}],attrs:{label:"整改状态","label-width":"120px",prop:"specialInspectionRectifyState"}},[i("el-radio",{attrs:{label:0,name:"specialInspectionRectifyState"},model:{value:e.Form.specialInspectionRectifyState,callback:function(t){e.$set(e.Form,"specialInspectionRectifyState",t)},expression:"Form.specialInspectionRectifyState"}},[e._v("未完成")]),e._v(" "),i("el-radio",{attrs:{label:1,name:"specialInspectionRectifyState"},model:{value:e.Form.specialInspectionRectifyState,callback:function(t){e.$set(e.Form,"specialInspectionRectifyState",t)},expression:"Form.specialInspectionRectifyState"}},[e._v("完成")])],1),e._v(" "),i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.rectify,expression:"rectify"}],attrs:{label:"整改结果","label-width":"120px",prop:"specialInspectionRectifyResult"}},[i("el-input",{directives:[{name:"enter-trim",rawName:"v-enter-trim"}],attrs:{placeholder:"请输入整改结果",type:"textarea",size:"small"},model:{value:e.Form.specialInspectionRectifyResult,callback:function(t){e.$set(e.Form,"specialInspectionRectifyResult",t)},expression:"Form.specialInspectionRectifyResult"}})],1)],1),e._v(" "),"detail"!==e.operateType||e.rectify?i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("cancel-btn",{attrs:{fontSize:14},on:{clickBtn:function(t){e.dialogVisible=!1}}}),e._v(" "),i("confirm-btn",{attrs:{fontSize:14},on:{clickBtn:function(t){e.submitForm("Form")}}})],1):e._e()],1)],1)},staticRenderFns:[]};var s=function(e){i("1TH6")},o=i("VU/8")(n.a,a,!1,s,null,null);t.default=o.exports},zsRa:function(e,t,i){"use strict";(function(e){var n=i("fZjL"),a=i.n(n),s=i("BO1k"),o=i.n(s),l=i("mvHQ"),c=i.n(l),r=i("VuyH"),p=i("yzMb"),u=i("uSev"),d=i("dO4M"),m=i("FAvH"),h=i("GR1E"),f=i("fYBn"),I=i("02tb"),v=i("5kkW"),y=i("3a1n"),g=i("STPg"),b=i("XKMi");t.a={components:{singleBtnGroup:d.a,tableBtnGroup:m.a,tablePagination:h.a,tableComponent:u.a,cancelBtn:f.a,confirmBtn:I.a,searchBtn:v.a,resetBtn:y.a,treeSelect:g.a,searchTreeSelect:b.a},created:function(){this.getUnit(),this.getList()},data:function(){var e=this;return{unitId:null,unitOptions:[],startTime:"",allTreeData:[],buildIdList:[],yardIdList:[],searchTreeName:"specialSearchTree",treeName:"special",currentPage:1,pageSize:15,total:0,loading:null,tableHeight:0,tableData:[],selectData:[],operateType:"",dialogTitle:"",dialogVisible:!1,rules:{specialInspectionRectifyComments:[{required:!0,validator:function(t,i,n){e.Form.specialInspectionProblem&&!e.Form.specialInspectionRectifyComments?n(new Error("整改意见不能为空")):n()},trigger:"blur"}],handleModuleList:[{required:!0,validator:function(t,i,n){e.Form.addFlag?n():n(new Error("检查地点不能为空"))},trigger:"blur"}],specialInspectionUnitId:[{required:!0,message:"相关单位不能为空",trigger:"blur"}],specialInspectionUserName:[{required:!0,message:"检查人不能为空",trigger:"blur"}],specialInspectionTime:[{required:!0,message:"检查时间不能为空",trigger:"blur"}],specialInspectionResult:[{required:!0,message:"检查结果不能为空",trigger:"blur"}]},Form:{specialInspectionUnitId:null,handleModuleList:[],specialInspectionBuildId:null,specialInspectionYardId:null,specialInspectionUserName:"",specialInspectionProblem:0,specialInspectionTime:"",specialInspectionResult:"",specialInspectionRectifyComments:"",specialInspectionRectifyTime:"",specialInspectionPoints:null,specialInspectionRectifyState:0,specialInspectionRectifyResult:"",addFlag:!1},treeData:[],treeShow:!1,rectify:!1}},methods:{loadingStart:function(e){this.loading||(this.loading=this.$loading({lock:!0,text:"正在加载...",spinner:"el-icon-loading",target:e,customClass:"loading-box"}))},loadingEnd:function(){this.loading&&(this.loading.close(),this.loading=null)},changeSize:function(e){this.pageSize=e,this.getList()},changePage:function(e){this.currentPage=e,this.getList()},search:function(){this.currentPage=1,this.getList()},reset:function(){this.currentPage=1,this.buildIdList=[],this.yardIdList=[],this.unitId=null,p.a.$emit(this.searchTreeName+"_clear"),this.getList()},handleSelectionChange:function(e){this.selectData=e},getUnit:function(){var e=this;Object(r.f)().then(function(t){e.unitOptions=t})},getList:function(){var e=this;Object(r.e)(this.currentPage,this.pageSize,this.unitId,this.yardIdList,this.buildIdList).then(function(t){e.tableData=t.records,e.total=t.total}).catch(function(t){var i=t.result?t.result:"专项巡检信息列表获取失败";e.$message({message:i,type:"error"})})},selectHandlePo:function(){var e=this;Object(r.i)().then(function(t){t.forEach(function(e){e.disabled=!0,e.children.forEach(function(e){e.children=[]})}),e.treeData=t}).catch(function(t){var i=t.result?t.result:"检查地点获取失败";e.$message({message:i,type:"error"})})},selectHandlePoUp:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){var t=this;selectHandlePoUp(e).then(function(e){t.treeData=e}).catch(function(e){var i=e.result?e.result:"检查地点获取失败";t.$message({message:i,type:"error"})})}),selectAllHandlePo:function(){var e=this;Object(r.h)().then(function(t){t.forEach(function(e){e.children=[]}),e.allTreeData=t}).catch(function(t){var i=t.result?t.result:"处置位置获取失败";e.$message({message:i,type:"error"})})},handleCheckChange:function(e,t){this.Form.handleModuleList=[],e.length>0?(this.Form.specialInspectionYardId=e[0].value,this.Form.specialInspectionBuildId=e[1].value,this.Form.addFlag=!0):this.Form.addFlag=!1},handleSearchCheckChange:function(e,t){var i=this;this.houseIdList=[],this.floorIdList=[],this.buildIdList=[],this.yardIdList=[];var n=e.concat(t);n.length>0&&n.forEach(function(e){3===e.type?i.houseIdList.push(e.value):2===e.type?i.floorIdList.push(e.value):1===e.type?i.buildIdList.push(e.value):0===e.type&&i.yardIdList.push(e.value)})},singleUpdate:function(e){var t=this;this.selectHandlePo(),this.treeShow=!0,this.operateType="edit",this.dialogVisible=!0,this.dialogTitle="修改专项巡检",Object(r.j)(e.specialInspectionId).then(function(e){if(t.Form=e,"{}"!=c()(e)){t.Form.specialInspectionId=e.specialInspectionId,e.unitName&&(t.Form.specialInspectionUnitId=t.unitOptions.filter(function(t){return t.unitName==e.unitName})[0].unitId);var i=[],n=[],a=[];i.push(e.buildName),t.Form.addFlag=!0,n.push(e.yardId+":"+e.buildId),a.push(""+e.yardId),p.a.$emit(t.treeName+"_select",i,n,a)}}).catch(function(e){var i=e.result?e.result:"专项检查详情获取失败";t.$message({message:i,type:"error"})})},singleDetail:function(e){var t=this;this.operateType="detail",this.dialogVisible=!0,this.dialogTitle="专项巡检详情",Object(r.j)(e.specialInspectionId).then(function(e){t.Form=e,t.Form.specialInspectionUnitName=e.unitName,t.Form.position=e.yardName+"-"+e.buildName}).catch(function(e){var i=e.result?e.result:"专项检查详情获取失败";t.$message({message:i,type:"error"})})},singleDelete:function(e){var t=this;this.$confirm("此操作将永久删除该专项巡检, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(r.d)(parseInt(e.specialInspectionId)).then(function(e){t.$message({message:"删除专项巡检成功!",type:"success"}),t.currentPage=1,t.getList()}).catch(function(e){var i=e.result?e.result:"删除专项巡检失败";t.$message({message:i,type:"error"})})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},singleRectify:function(e){var t=this;this.operateType="detail",this.dialogVisible=!0,this.rectify=!0,this.dialogTitle="整改专项巡检",Object(r.j)(e.specialInspectionId).then(function(e){t.Form.specialInspectionId=e.specialInspectionId,t.Form.specialInspectionUnitName=e.unitName,e.yardName||e.buildName?t.Form.position=e.yardName+"-"+e.buildName:t.Form.position="",t.Form.specialInspectionRectifyResult=e.specialInspectionRectifyResult,t.Form.specialInspectionTime=e.specialInspectionTime,t.Form.specialInspectionUserName=e.specialInspectionUserName,t.Form.specialInspectionResult=e.specialInspectionResult,t.Form.specialInspectionRectifyState=0,t.Form.specialInspectionProblem=e.specialInspectionProblem,t.Form.specialInspectionRectifyComments=e.specialInspectionRectifyComments}).catch(function(e){var i=e.result?e.result:"专项检查详情获取失败";t.$message({message:i,type:"error"})})},addUnit:function(){this.selectHandlePo(),this.treeShow=!0,this.operateType="add",this.dialogTitle="新增专项巡检",this.dialogVisible=!0},batchDelete:function(){var e=this,t=[];this.selectData.forEach(function(e,i){t.push(e.specialInspectionId)}),this.$confirm("此操作将永久删除这些专项巡检, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){if(0===t.length)return e.$message({message:"请先勾选删除项！",type:"warning"}),!1;Object(r.c)(t).then(function(t){e.$message({message:"批量删除专项巡检成功!",type:"success"}),e.currentPage=1,e.getList()}).catch(function(t){var i=t.result?t.result:"批量删除专项巡检失败";e.$message({message:i,type:"error"})})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.saveForm()})},saveForm:function(){var e=this;"add"==this.operateType?Object(r.b)(this.Form).then(function(t){t&&(e.dialogVisible=!1,e.getList())}).catch(function(t){var i=t.result?t.result:"新增专项巡检失败";e.$message({message:i,type:"error"})}):"edit"==this.operateType?Object(r.a)(this.Form).then(function(t){t&&(e.dialogVisible=!1,e.getList())}).catch(function(t){var i=t.result?t.result:"修改专项巡检失败";e.$message({message:i,type:"error"})}):this.rectify&&Object(r.g)(this.Form).then(function(t){t&&(e.dialogVisible=!1,e.getList())}).catch(function(t){var i=t.result?t.result:"整改专项巡检失败";e.$message({message:i,type:"error"})})},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.Form.clearValidate()})},dialogClosed:function(){this.treeShow=!1,p.a.$emit(this.treeName+"_clearInput"),this.clearForm(this.Form),this.rectify=!1,this.Form.specialInspectionProblem=0},getDataType:function(e){var t=!0,i=!1,n=void 0;try{for(var a,s=o()(["String","Object","Number","Array","Function"]);!(t=(a=s.next()).done);t=!0){var l=a.value;if(Object.prototype.toString.call(e)==="[object "+l+"]")return l}}catch(e){i=!0,n=e}finally{try{!t&&s.return&&s.return()}finally{if(i)throw n}}},limitInt:function(e){this.Form[e]=this.Form[e].replace(/[^0-9]/g,"")},clearForm:function(e){for(var t in e){var i=this.getDataType(e[t]);if("String"===i)e[t]="";else if("Array"===i)e[t]=[];else if("Object"===i){a()(e[t]).length>0?this.clearForm(e[t]):e[t]={}}else e[t]=null}}},mounted:function(){var t=this;this.selectAllHandlePo(),setTimeout(function(){var i=e("#mainDiv").height(),n=e("#queryBox").outerHeight(!0),a=e("#operateBox").height();t.tableHeight=i-n-a},1)}}}).call(t,i("7t+N"))}});
//# sourceMappingURL=12.282f127baea55f53e9b8.js.map