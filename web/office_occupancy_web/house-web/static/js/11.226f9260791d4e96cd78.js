webpackJsonp([11],{"15IE":function(e,t,a){"use strict";(function(e){var i=a("fZjL"),r=a.n(i),o=a("d7EF"),n=a.n(o),s=a("W3Iv"),l=a.n(s),u=a("BO1k"),m=a.n(u),d=a("mvHQ"),c=a.n(d),p=a("PVpU"),h=a("Oizb"),g=(a("u3Mf"),a("d6pC")),b=a("yzMb"),f=a("uSev"),v=a("dO4M"),_=a("FAvH"),F=a("GR1E"),y=a("fYBn"),I=a("02tb"),C=a("5kkW"),A=a("3a1n"),N=a("xWJq"),x=a("UUPi"),k=a("VWcw"),L=a("I/3G"),w=a("k2bH"),S=a("OMJi"),T=(a.n(S),a("N+Om")),P=(a.n(T),a("gApy"));t.a={components:{singleBtnGroup:v.a,tableBtnGroup:_.a,tablePagination:F.a,tableComponent:f.a,cancelBtn:y.a,confirmBtn:I.a,searchBtn:C.a,resetBtn:A.a,prevBtn:N.a,nextBtn:x.a,yearSelect:k.a,myMap:L.a,yardMap:w.a},data:function(){var e=this;return{activeName:"yard",tableHeaderCellStyle:{"background-color":"#bee2f3","border-color":"#c8c8c8",padding:"6px 0",color:"#333333"},tableCellStyle:{"border-color":"#c8c8c8",padding:"6px 0px"},unitId:"",username:"",userId:"",configureNo:"",buildIdList:[],startTime:"",endTime:"",currentPage:1,pageSize:15,total:0,loading:null,tableHeight:0,selectRow:[],selectData:{},selectDataArray:[],tableData:[],distributeChangeList:[],operateType:"",dialogVisible:{unit:!1,project:!1,leader:!1,addInfo:!1},unitOpts:[],elevatorsOpts:[{elevatorId:0,elevatorName:"0台"},{elevatorId:1,elevatorName:"1台"},{elevatorId:2,elevatorName:"2台"},{elevatorId:3,elevatorName:"3台"},{elevatorId:4,elevatorName:"4台"},{elevatorId:5,elevatorName:"5台"},{elevatorId:6,elevatorName:"6台"}],regionOpts:[],regionIdList:[],autoConditionList:[],currentDialogName:"",currentForm:null,tipsText:"",distributionActiveName:"table1",sureDistributionActiveName:"",currentAutoCondition:null,sureCurrentAutoCondition:null,isSureDistributePage:!1,distributeTableData:[],replaceMode:1,baseInfoForm:{unitName:"",unitCharger:"",unitComplement:null,actualNumber:null,totalArea:null,PerCapitaArea:null,contactPhone:null,contacts:"",unitProperty:"",unitAddress:"",applyReason:"",unitId:null,elevatorsNumber:null,regionName:"",newUnitName:"",enclosureList:[],allocationPlan:null,allocationPlanName:"",selectionPlan:null,selectionPlanName:"",planName:"",leaderAdvice:""},Form_unit:{auditState:1,configureId:null,configureRooms:[{roomAreaMax:"",roomAreaMin:"",roomNumber:""}],elevatorsNumber:0,processInstanceId:null,regionIds:[],step:null,taskId:null,userId:null,userName:"",redistributionUnitId:"",comment:""},Form_project:{allocationPlan:1,auditState:0,configureId:null,configurePlanDataList:[],processInstanceId:null,selectionPlan:1,step:null,taskId:null,userId:null,userName:""},Form_leader:{allocationPlan:null,auditState:1,comment:"",configureId:null,processInstanceId:null,step:null,taskId:null,userId:null,userName:""},Form_addInfo:{configureId:null,processInstanceId:null,step:null,auditState:0,taskId:null,userId:null,userName:""},Form_yard:{yard:{type:1,regionId:"",yardId:null,yardLatitude:null,yardLongitude:null,yardName:"",yardPosition:""},yardAndestateVoList:[]},Form_build:{uuid:"",yardId:"",buildId:"",buildName:"",buildArea:"",buildDate:"",builder:"",overgroundFloor:"",undergroundFloor:"",obtainWay:"",buildCertificate:"",coveredArea:"",lossGrade:"",structureType:"",warrantNum:"",warrantPerson:"",warrantRemark:"",assetsValue:"",civilDefenceArea:"",buildRemark:"",buildLongitude:"",buildLatitude:"",propertyUnitId:"",elevatorNum:0,housePropertyNumber:"",outRent:{outRentId:"",buildId:"",coveredArea:"",rentUnit:"",startTime:"",endTime:"",rentMoney:"",financeRemark:"",isRent:0},newFloorImgUrlList:[],floorDrawingList:[],fileList:[],fileListImg:[]},Form_replacement:{makeMoney:"",profit:"",area:"",improvingDataList:[]},Form_rent:{rentalMode:"",rent:"",term:"",area:"",improvingDataList:[]},Form_construction:{expenditure:"",area:"",projectName:"",improvingDataList:[]},localSaveBuildInfo:[],localSaveBuildList:[],structureType:["砖木结构","砖混结构","钢筋混泥土结构","钢结构","型钢混泥土结构"],warrantRemarkOpt:["已统一登记到机关事务管理部门名下","登记在各部门或其他单位名下、已移交权属资料","登记在各部门或其他单位名下、未移交权属资料","未登记、已移交权属资料","未登记、未移交权属资料","其他情况"],rentalModeOpts:["年","季"],yardOptionsModal:[],uploadBuildUrl:h.n+"?uploadType=build",uploadImprovingUrl:h.n+"?uploadType=improvingData",acceptType:"image/jpeg,image/gif,image/png,image/bmp,.doc,.docx,.xlsx,.ppt,.pdf,.rar,.zip",acceptImgType:"image/jpeg,image/gif,image/png,image/bmp",limitImgNum:1,limitNum:5,fileList:[],fileListImg:[],fileListImproving:[],uploadNum:0,uploadImgNum:0,uploadImprovingNum:0,uploadedNum:0,uploadedImgNum:0,uploadedImprovingNum:0,uploadSuccessNum:0,uploadSuccessImgNum:0,uploadSuccessImprovingNum:0,submitFlag:!1,submitImgFlag:!1,submitImprovingFlag:!1,uploadChangeFlag:!1,uploadImgChangeFlag:!1,token:"",postHeaders:{Authorization:""},showMap:!1,position:{lng:0,lat:0},yardPosition:{yardLatitude:"",yardLongitude:""},unitOptions:[],unitAuthorityOptions:[],AllSchemeTableData:[],schemeTableData:[],schemeCurrentPage:1,schemePageSize:5,schemeTotal:0,planTableData:[],planCurrentPage:1,planPageSize:5,planTotal:0,oldPlanName:"",selectedSchemeId:"",downloadCheckedList:[],fileDownLoadCheckedList:[],distributeCurrentPage:1,distributePageSize:5,distributeTotal:0,currentPlanId:null,addInfoType:"yard",estateNameOpts:[],estateNameFlag:!0,serviceContentFlag:!0,startTimeFlag:!0,startTimeLimitFlag:!0,endTimeFlag:!0,endTimeLimitFlag:!0,contractAmountFlag:!0,submitTipsArray:[],serviceContentOpts:[{id:1,text:"安保"},{id:2,text:"保洁"},{id:3,text:"绿化"},{id:4,text:"零星维修"},{id:5,text:"收发"}],addYardName:"",addYardLongitude:"",addYardLatitude:"",roomNumberSubmitFlag:!1,roomAreaNotNullFlag:!1,roomAreaRangeRepeatFlag:!1,roomAreaRangeErrorFlag:!1,addInfoProcess:0,activeAuditState:null,activeAuditStateFormName:null,obtainWayOpts:[{value:1,name:"调剂"},{value:2,name:"租用"},{value:3,name:"置换"},{value:4,name:"自建"},{value:5,name:"购置"}],rules_unit:{auditState:[{required:!0,message:"请选择审查结果",trigger:"blur"}],regionIds:[{required:!0,message:"请选择区域",trigger:"change"}],elevatorsNumber:[{required:!0,message:"请选择电梯台数",trigger:"change"}],comment:[]},rules_project:{},rules_leader:{auditState:[{required:!0,message:"请选择审批结果",trigger:"blur"}],comment:[]},rules_build:{yardId:[{required:!0,message:"院落名称不能为空",trigger:"blur"}],buildName:[{required:!0,message:"楼座名称不能为空",trigger:"blur"}],buildArea:[{required:!0,message:"建筑面积不能为空",trigger:"blur"}],structureType:[{required:!0,message:"结构类型不能为空",trigger:"change"}],overgroundFloor:[{required:!0,message:"地上楼层不能为空",trigger:"blur"}],undergroundFloor:[{required:!0,message:"地下楼层不能为空",trigger:"blur"}],buildDate:[{required:!0,message:"建成时间不能为空",trigger:"blur"}],buildLongitude:[{required:!0,message:"经度不能为空",trigger:"blur"}],buildLatitude:[{required:!0,message:"纬度不能为空",trigger:"blur"}],propertyUnitId:[{required:!0,message:"请选择产权所属单位",trigger:"change"}],startTime:[{required:!0,validator:function(t,a,i){var r=new Date(e.Form_build.outRent.startTime).getTime(),o=new Date(e.Form_build.outRent.endTime).getTime();r||i(new Error("租赁开始时间不能为空")),r&&o&&r>o&&i(new Error("租赁开始时间不能大于租赁截止时间")),i()},trigger:"blur"}],endTime:[{required:!0,validator:function(t,a,i){var r=new Date(e.Form_build.outRent.startTime).getTime(),o=new Date(e.Form_build.outRent.endTime).getTime();o||i(new Error("租赁截止时间不能为空")),r&&o&&r>o&&i(new Error("租赁截止时间不能小于租赁开始时间")),i()},trigger:"blur"}],elevatorNum:[{required:!0,message:"请选择电梯数量",trigger:"change"}],housePropertyNumber:[{required:!0,message:"房产证号不能为空",trigger:"blur"}],"outRent.rentUnit":[{required:!0,message:"租用单位不能为空",trigger:"change"}],"outRent.rentMoney":[{required:!0,message:"租金标准不能为空",trigger:"blur"}],"outRent.financeRemark":[{required:!0,message:"财政备案不能为空",trigger:"blur"}]},rules_yard:{"yard.yardName":[{required:!0,message:"院落名称不能为空",trigger:"blur"}],"yard.yardPosition":[{required:!0,message:"院落地址不能为空",trigger:"blur"}],"yard.regionId":[{required:!0,message:"行政区划不能为空",trigger:"change"}],"yard.yardLongitude":[{required:!0,message:"经度不能为空",trigger:"blur"}],"yard.yardLatitude":[{required:!0,message:"纬度不能为空",trigger:"blur"}]},rules_replacement:{makeMoney:[{required:!0,message:"补钱不能为空",trigger:"blur"}],profit:[{required:!0,message:"收益不能为空",trigger:"blur"}],area:[{required:!0,message:"面积不能为空",trigger:"blur"}]},rules_rent:{rentalMode:[{required:!0,message:"付款周期不能为空",trigger:"blur"}],rent:[{required:!0,message:"租金不能为空",trigger:"blur"}],term:[{required:!0,message:"期限不能为空",trigger:"blur"}],area:[{required:!0,message:"面积不能为空",trigger:"blur"}]},rules_construction:{expenditure:[{required:!0,message:"财政支出不能为空",trigger:"blur"}],area:[{required:!0,message:"面积不能为空",trigger:"blur"}],projectName:[{required:!0,message:"项目名称不能为空",trigger:"blur"}]},activeInfo:null,popoverRepairInfo:!1,submitAllFlag:!1,distributeNum:0,pickerOptions_start:{},pickerOptions_end:{},currentAddInfoType:""}},watch:{fileListImg:function(t){var a=e(".upload_box_img").find(".el-upload");t.length===this.limitImgNum?a.css("display","none"):a.css("display","inline-block")},estateNameFlag:{handler:function(e,t){if(e){if(this.submitTipsArray.indexOf("物业名称不能为空")>-1){var a=this.submitTipsArray.indexOf("物业名称不能为空");this.submitTipsArray.splice(a,1)}}else{-1===this.submitTipsArray.indexOf("物业名称不能为空")&&this.submitTipsArray.push("物业名称不能为空")}},immediate:!1},serviceContentFlag:{handler:function(e,t){if(e){if(this.submitTipsArray.indexOf("服务内容不能为空")>-1){var a=this.submitTipsArray.indexOf("服务内容不能为空");this.submitTipsArray.splice(a,1)}}else{-1===this.submitTipsArray.indexOf("服务内容不能为空")&&this.submitTipsArray.push("服务内容不能为空")}},immediate:!1},startTimeFlag:{handler:function(e,t){if(e){if(this.submitTipsArray.indexOf("开始使用时间不能为空")>-1){var a=this.submitTipsArray.indexOf("开始使用时间不能为空");this.submitTipsArray.splice(a,1)}}else{-1===this.submitTipsArray.indexOf("开始使用时间不能为空")&&this.submitTipsArray.push("开始使用时间不能为空")}},immediate:!1},startTimeLimitFlag:{handler:function(e,t){if(e){if(this.submitTipsArray.indexOf("开始使用时间不能大于结束使用时间")>-1){var a=this.submitTipsArray.indexOf("开始使用时间不能大于结束使用时间");this.submitTipsArray.splice(a,1)}}else{var i="开始使用时间不能大于结束使用时间";-1===this.submitTipsArray.indexOf(i)&&this.submitTipsArray.push(i)}},immediate:!1},endTimeFlag:{handler:function(e,t){if(e){if(this.submitTipsArray.indexOf("结束使用时间不能为空")>-1){var a=this.submitTipsArray.indexOf("结束使用时间不能为空");this.submitTipsArray.splice(a,1)}}else{-1===this.submitTipsArray.indexOf("结束使用时间不能为空")&&this.submitTipsArray.push("结束使用时间不能为空")}},immediate:!1},endTimeLimitFlag:{handler:function(e,t){if(e){if(this.submitTipsArray.indexOf("结束使用时间不能小于开始使用时间")>-1){var a=this.submitTipsArray.indexOf("结束使用时间不能小于开始使用时间");this.submitTipsArray.splice(a,1)}}else{var i="结束使用时间不能小于开始使用时间";-1===this.submitTipsArray.indexOf(i)&&this.submitTipsArray.push(i)}},immediate:!1},contractAmountFlag:{handler:function(e,t){if(e){if(this.submitTipsArray.indexOf("使用金额不能为空")>-1){var a=this.submitTipsArray.indexOf("使用金额不能为空");this.submitTipsArray.splice(a,1)}}else{-1===this.submitTipsArray.indexOf("使用金额不能为空")&&this.submitTipsArray.push("使用金额不能为空")}},immediate:!1}},methods:{allocationPlanChange:function(e){var t=this;if(1===e){var a=this.currentAutoCondition.name,i=this.currentAutoCondition.tableName,r=this.currentAutoCondition.currentPage;if(this.selectData[a]&&this.selectData[a][r]){var o=this.selectData[a][r];this.$nextTick(function(){o.forEach(function(e){t.$refs[i][0].toggleRowSelection(t.currentAutoCondition.tableData[e.index],!0)})})}}},showInfoDetail:function(e){this.$refs.Form_build.clearValidate(),this.activeInfo=e,this.popoverRepairInfo=!1;var t=JSON.parse(c()(this.localSaveBuildInfo[e]));this.Form_build=t,this.fileList=t.fileList,this.fileListImg=t.fileListImg,this.uploadedNum=t.fileList.length,this.uploadedImgNum=t.fileListImg.length,this.selectYardHandle(t.yardId),this.$refs.map.setBuildPosition(t.buildLongitude,t.buildLatitude,t.buildName,"build")},baseInfoToYard:function(){this.addInfoProcess++,this.addInfoType="yard";var t=e(".addInfo-dialog").find(".dialog-content"),a=e(".addInfo-dialog").find(".step-item")[1],i=e(a).outerHeight();t.css("height",i);var r=1100*this.addInfoProcess;e(".addInfo-dialog").find(".dialog-content").animate({left:"-"+r+"px"}),2===this.activeAuditState&&(1===this.replaceMode?this.Form_replacement.profit="0":this.Form_replacement.makeMoney="0"),this.uploadImprovingNum=0,this.uploadedImprovingNum=0,this.submitImprovingFlag=!1},nextStep:function(){var t=this,a=e(".addInfo-dialog").find(".el-dialog__body");0===this.addInfoProcess?this.$refs[this.activeAuditStateFormName].validate(function(e){if(!e)return!1;0===t.uploadImprovingNum?t.baseInfoToYard():t.$refs.improvingUpload.submit()}):1===this.addInfoProcess&&this.$refs.Form_yard.validate(function(a){if(!a)return!1;if(1===t.Form_yard.yard.type){if(t.estateNameSelectChange(),t.serviceContentSelectChange(),t.startTimeBlur(),t.endTimeBlur(),t.contractAmountBlur(),t.estateNameFlag&&t.serviceContentFlag&&t.startTimeFlag&&t.startTimeLimitFlag&&t.endTimeFlag&&t.endTimeLimitFlag&&t.contractAmountFlag){t.addYardName=t.Form_yard.yard.yardName,t.addYardLongitude=t.Form_yard.yard.yardLongitude,t.addYardLatitude=t.Form_yard.yard.yardLatitude,t.getYardDic(),t.getUnitDic(),t.estateNameFlag=!0,t.serviceContentFlag=!0,t.startTimeFlag=!0,t.startTimeLimitFlag=!0,t.endTimeFlag=!0,t.endTimeLimitFlag=!0,t.contractAmountFlag=!0,t.submitTipsArray=[],t.addInfoProcess++,t.addInfoType="build";var i=1100*t.addInfoProcess,r=e(".addInfo-dialog").find(".dialog-content"),o=e(".addInfo-dialog").find(".step-item")[2],n=e(o).outerHeight();r.css("height",n),e(".addInfo-dialog").find(".dialog-content").animate({left:"-"+i+"px"})}}else{t.getYardDic(),t.getUnitDic(),t.estateNameFlag=!0,t.serviceContentFlag=!0,t.startTimeFlag=!0,t.startTimeLimitFlag=!0,t.endTimeFlag=!0,t.endTimeLimitFlag=!0,t.contractAmountFlag=!0,t.submitTipsArray=[],t.addInfoProcess++,t.addInfoType="build";var s=1100*t.addInfoProcess,l=e(".addInfo-dialog").find(".dialog-content"),u=e(".addInfo-dialog").find(".step-item")[2],m=e(u).outerHeight();l.css("height",m),e(".addInfo-dialog").find(".dialog-content").animate({left:"-"+s+"px"})}}),a.scrollTop(0)},prevStep:function(){this.addInfoProcess--;var t=e(".addInfo-dialog").find(".el-dialog__body");if(0===this.addInfoProcess){var a=e(".addInfo-dialog").find(".dialog-content"),i=e(".addInfo-dialog").find(".step-item")[0],r=e(i).outerHeight();a.css("height",r),this.uploadedImprovingNum=this.fileListImproving.length}else if(1===this.addInfoProcess){this.addInfoType="yard";var o=e(".addInfo-dialog").find(".dialog-content"),n=e(".addInfo-dialog").find(".step-item")[1],s=e(n).outerHeight();o.css("height",s)}t.scrollTop(0);var l=1100*this.addInfoProcess;e(".addInfo-dialog").find(".dialog-content").animate({left:"-"+l+"px"})},jumpToNext:function(){this.getYardDic(),this.getUnitDic(),this.addInfoProcess++,this.addInfoType="build",this.clearForm(this.Form_yard),this.Form_yard.yard.type=1,this.$refs.Form_yard.clearValidate();var t=e(".addInfo-dialog").find(".dialog-content"),a=e(".addInfo-dialog").find(".step-item")[2],i=e(a).outerHeight();t.css("height",i),e(".addInfo-dialog").find(".el-dialog__body").scrollTop(0);var r=1100*this.addInfoProcess;e(".addInfo-dialog").find(".dialog-content").animate({left:"-"+r+"px"})},addBuild:function(e){var t=this;this.$refs.Form_build.validate(function(a){if(!a)return!1;t.submitAllFlag=!!e,0===t.uploadNum&&0===t.uploadImgNum?t.saveBuildForm():t.submitUpload()})},deleteBuild:function(){var e=this;if(this.localSaveBuildInfo.length>0)for(var t=this.localSaveBuildInfo.length-1;t>=0;t--)if(this.localSaveBuildInfo[t].uuid===this.Form_build.uuid){this.localSaveBuildInfo.splice(t,1),this.localSaveBuildList.splice(t,1);break}this.$refs.Form_build.resetFields(),this.clearForm(this.Form_build),this.Form_build.outRent.isRent=0,this.Form_build.elevatorNum=0,this.showMap=!1,this.uploadChangeFlag=!1,this.uploadImgChangeFlag=!1,this.submitImgFlag=!1,this.submitFlag=!1,setTimeout(function(){e.showMap=!0,e.uploadNum=0,e.uploadImgNum=0,e.uploadedNum=0,e.uploadedImgNum=0,e.uploadSuccessNum=0,e.uploadSuccessImgNum=0,e.fileList=[],e.fileListImg=[]},1e3)},saveBuildForm:function(){var e=this,t=JSON.parse(c()(this.Form_build));if(t.uuid){for(var a=this.localSaveBuildInfo.length-1;a>=0;a--)if(this.localSaveBuildInfo[a].uuid===t.uuid){this.localSaveBuildInfo.splice(a,1,t);break}}else t.uuid=P(),this.localSaveBuildInfo.push(t),this.localSaveBuildList.push({buildName:t.buildName,id:t.uuid});this.submitAllFlag?this.submitForm():(this.$refs.Form_build.resetFields(),this.clearForm(this.Form_build),this.Form_build.outRent.isRent=0,this.Form_build.elevatorNum=0,this.showMap=!1,this.uploadChangeFlag=!1,this.uploadImgChangeFlag=!1,this.submitImgFlag=!1,this.submitFlag=!1,setTimeout(function(){e.showMap=!0,e.uploadNum=0,e.uploadImgNum=0,e.uploadedNum=0,e.uploadedImgNum=0,e.uploadSuccessNum=0,e.uploadSuccessImgNum=0,e.fileList=[],e.fileListImg=[]},1e3)),this.activeInfo=null},loadingStart:function(e){this.loading||(this.loading=this.$loading({lock:!0,text:"正在加载...",spinner:"el-icon-loading",target:e,customClass:"loading-box"}))},loadingEnd:function(){this.loading&&(this.loading.close(),this.loading=null)},changeSize:function(e){this.pageSize=e,this.getList()},changePage:function(e){this.currentPage=e,this.getList()},getList:function(){var e=this;this.loadingStart(".table-box"),Object(p.j)(this.currentPage,this.pageSize,this.configureNo,this.startTime,this.endTime,this.userId,this.unitId).then(function(t){e.tableData=t.records,e.total=t.total,e.tableData.forEach(function(t){t.applyStatusText=e.getApplyStatus(t.step),t.totalArea||(t.totalArea="无"),t.actualNumber||(t.actualNumber="无"),t.perArea||(t.perArea="无")}),e.loadingEnd()}).catch(function(t){e.loadingEnd();var a=t.result?t.result:"配置申请列表获取失败";e.$message({message:a,type:"error"})})},search:function(){this.currentPage=1,this.getList()},reset:function(){this.currentPage=1,this.configureNo="",this.startTime="",this.endTime="",this.unitId="",this.getList()},getUserUnitDic:function(){var e=this;Object(h.l)().then(function(t){e.unitAuthorityOptions=t}).catch(function(t){var a=t.result?t.result:"单位下拉选项获取失败";e.$message({message:a,type:"error"})})},getReapportionUnit:function(){var e=this;Object(p.r)().then(function(t){e.unitOpts=t,e.unitOpts.unshift({unitId:"",unitName:"暂无单位"})}).catch(function(t){var a=t.result?t.result:"重新分配的单位列表获取失败";e.$message({message:a,type:"error"})})},getRegionList:function(){var e=this;Object(h.h)().then(function(t){e.regionOpts=t,e.regionOpts.forEach(function(t){e.regionIdList.push(t.regionId)})}).catch(function(t){var a=t.result?t.result:"行政区划列表获取失败";e.$message({message:a,type:"error"})})},getApplyStatus:function(e){switch(e){case 2:return"单位审查";case 3:return"分配方案";case 4:return"领导审批";case 5:return"完善资料"}},getReviewAuditState:function(e){switch(e){case 1:return"调剂";case 2:return"置换";case 3:return"租用";case 4:return"建设"}},openDialog:function(t){var a=this;switch(Object(p.k)(t.configureId).then(function(e){var t=!0,i=!1,r=void 0;try{for(var o,s=m()(l()(e.configure));!(t=(o=s.next()).done);t=!0){var u=o.value,d=n()(u,2),c=d[0],p=d[1];void 0!==a.baseInfoForm[c]&&(a.baseInfoForm[c]=p||"暂无")}}catch(e){i=!0,r=e}finally{try{!t&&s.return&&s.return()}finally{if(i)throw r}}e.configureEnclosureList&&e.configureEnclosureList.length>0&&(e.configureEnclosureList.forEach(function(e){e.detail=e.enclosurePhysicsUrl+","+e.enclosureName}),a.baseInfoForm.enclosureList=e.configureEnclosureList)}).catch(function(e){var t=e.result?e.result:"配置申请信息获取失败";a.$message({message:t,type:"error"})}),this.getBasicConfigure(t.configureId),t.step){case 2:this.dialogVisible.unit=!0,this.currentDialogName="unit",this.currentForm=this.Form_unit,this.operateType="单位审查",this.tipsText="审查",this.currentForm.regionIds=this.regionIdList;break;case 3:this.dialogVisible.project=!0,this.currentDialogName="project",this.currentForm=this.Form_project,this.operateType="拟定分配方案",this.tipsText="拟定分配方案",Object(p.g)(t.configureId).then(function(e){e.forEach(function(e,t){e.name=e.roomAreaMin+"(m²)-"+e.roomAreaMax+"(m²)",e.tableName="table"+(t+1),e.tableData=[],e.currentPage=1,e.pageSize=5,e.total=0,e.gotTheData=!1}),a.autoConditionList=e,a.currentAutoCondition=a.autoConditionList[0],a.distributionActiveName="table1",a.distributeNum=a.currentAutoCondition.roomNumber,a.getAutoAllocationRoomList()}).catch(function(e){var t=e.result?e.result:"自动分房的筛选条件列表获取失败";a.$message({message:t,type:"error"})}),Object(p.u)(t.configureId,2).then(function(e){a.baseInfoForm.elevatorsNumber=e.elevatorsNumber,a.baseInfoForm.regionName=e.regionList.join(","),a.baseInfoForm.newUnitName=e.newUnitName||""}).catch(function(e){var t=e.result?e.result:"单位审查相关信息获取失败";a.$message({message:t,type:"error"})}),Object(p.p)(t.configureId).then(function(e){e&&(a.baseInfoForm.leaderAdvice=e)}).catch(function(e){var t=e.result?e.result:"领导审批意见获取失败";a.$message({message:t,type:"error"})});break;case 4:this.dialogVisible.leader=!0,this.currentDialogName="leader",this.currentForm=this.Form_leader,this.operateType="领导审批",this.tipsText="领导审批",Object(p.u)(t.configureId,3).then(function(e){a.currentPlanId=e.planId,a.currentForm.configureId=t.configureId,a.currentForm.allocationPlan=e.allocationPlan,a.baseInfoForm.allocationPlan=e.allocationPlan,a.baseInfoForm.allocationPlanName=a.getReviewAuditState(e.allocationPlan),a.baseInfoForm.selectionPlan=e.selectionPlan,a.baseInfoForm.selectionPlanName=1===e.selectionPlan?"智能分配":"人工分配",1===e.allocationPlan&&(1===e.selectionPlan?a.getPlanDataDetail():(a.getSchemeDataDetail(),a.getSchemeName(),a.getChangeData(a.currentPlanId)))}).catch(function(e){var t=e.result?e.result:"分配方案相关信息获取失败";a.$message({message:t,type:"error"})});break;case 5:this.dialogVisible.addInfo=!0,this.currentDialogName="addInfo",this.currentForm=this.Form_addInfo,this.activeAuditState=t.allocationPlan,this.addInfoProcess=0,this.operateType="完善资料",this.tipsText="资料添加",this.showMap=!0,this.getEstateNameList();var i="";switch(this.activeAuditState){case 2:this.activeAuditStateFormName="Form_replacement",i="Form_replacement",this.currentAddInfoType="置换";break;case 3:this.activeAuditStateFormName="Form_rent",i="Form_rent",this.currentAddInfoType="租用";break;case 4:this.activeAuditStateFormName="Form_construction",i="Form_construction",this.currentAddInfoType="建设"}this.$nextTick(function(){a.$refs[i].clearValidate();var t=e(".addInfo-dialog").find(".dialog-content"),r=e(".addInfo-dialog").find(".step-item")[0],o=e(r).outerHeight();t.css("height",o)})}this.currentForm.configureId=t.configureId,this.currentForm.processInstanceId=t.processInstanceId,this.currentForm.taskId=t.taskId,this.currentForm.step=t.step,this.currentForm.userId=this.userId,this.currentForm.userName=sessionStorage.getItem("name")},getChangeData:function(e){var t=this;Object(p.i)(e).then(function(e){e&&(t.distributeChangeList=e)}).catch(function(e){var a=e.result?e.result:"分配统计数据获取失败";t.$message({message:a,type:"error"})})},getSchemeName:function(){var e=this;Object(p.s)(this.currentForm.configureId).then(function(t){e.baseInfoForm.planName=t}).catch(function(t){var a=t.result?t.result:"方案名称获取失败";e.$message({message:a,type:"error"})})},leaderDistributeCurrentChange:function(e){this.distributeCurrentPage=e,1===this.currentForm.selectionPlan?this.getPlanDataDetail():this.getSchemeDataDetail()},getPlanDataDetail:function(){var e=this;Object(p.q)(this.distributeCurrentPage,this.distributePageSize,this.currentForm.configureId).then(function(t){e.distributeTotal=t.total,e.distributeTableData=t.records[0].planDataDtoList,e.distributeTableData.forEach(function(e){e.position=e.yardName+"-"+e.buildName+"-"+e.houseNumber,e.oldUnitNameList&&e.oldUnitNameList.length>0?e.oldUnitName=e.oldUnitNameList.join(","):e.oldUnitName="无"})}).catch(function(t){var a=t.result?t.result:"房间分配方案数据获取失败";e.$message({message:a,type:"error"})})},getSchemeDataDetail:function(){var e=this;Object(p.e)(this.distributeCurrentPage,this.distributePageSize,this.currentPlanId).then(function(t){e.distributeTotal=t.total,e.distributeTableData=t.records,e.distributeTableData.forEach(function(e){var t=[],a=[];e.position=e.yardName+"-"+e.buildName+"-"+e.houseNumber,e.newUnitList.forEach(function(e){0!==e.newUnitId&&a.push(e.newUnitName)}),e.oldUnitList.forEach(function(e){0!==e.oldUnitId&&t.push(e.oldUnitName)}),e.oldUnitName=t.join(","),e.newUnitName=a.join(",")})}).catch(function(t){var a=t.result?t.result:"该方案房间信息获取失败";e.$message({message:a,type:"error"})})},getAutoAllocationRoomList:function(){var e=this;Object(p.f)(this.currentAutoCondition.currentPage,this.currentAutoCondition.pageSize,this.currentAutoCondition.elevatorsNumber,this.currentAutoCondition.regionId,this.currentAutoCondition.roomAreaMax,this.currentAutoCondition.roomAreaMin,this.baseInfoForm.unitId,this.currentAutoCondition.redistributionUnitId).then(function(t){if(t&&t.records.length>0){t.records.forEach(function(e){if(e.position=e.yardName+"-"+e.buildName+"-"+e.houseNumber,e.unitList&&e.unitList.length>0){var t=[];e.unitList.forEach(function(e){t.push(e.unitName)}),e.unitName=t.join(",")}else e.unitName=""}),t.records.forEach(function(e,t){e.index=t}),e.currentAutoCondition.tableData=t.records,e.currentAutoCondition.total=t.total,e.currentAutoCondition.gotTheData=!0;var a=e.currentAutoCondition.name,i=e.currentAutoCondition.tableName,r=e.currentAutoCondition.currentPage;if(e.selectData[a]&&e.selectData[a][r]){var o=e.selectData[a][r];e.$nextTick(function(){o.forEach(function(t){e.$refs[i][0].toggleRowSelection(e.currentAutoCondition.tableData[t.index],!0)})})}}}).catch(function(t){var a=t.result?t.result:"房间信息列表获取失败";e.$message({message:a,type:"error"})})},getBasicConfigure:function(e){var t=this,a=e||null;Object(p.h)(a).then(function(e){var a=!0,i=!1,r=void 0;try{for(var o,s=m()(l()(e));!(a=(o=s.next()).done);a=!0){var u=o.value,d=n()(u,2),c=d[0],p=d[1];void 0!==t.baseInfoForm[c]&&(t.baseInfoForm[c]=p)}}catch(e){i=!0,r=e}finally{try{!a&&s.return&&s.return()}finally{if(i)throw r}}t.baseInfoForm.totalArea&&(0!==t.baseInfoForm.actualNumber&&(t.baseInfoForm.PerCapitaArea=(t.baseInfoForm.totalArea/t.baseInfoForm.actualNumber).toFixed(2),t.baseInfoForm.PerCapitaArea=t.baseInfoForm.PerCapitaArea+"m²"),t.baseInfoForm.totalArea=t.baseInfoForm.totalArea.toFixed(2),t.baseInfoForm.totalArea=t.baseInfoForm.totalArea+"m²")}).catch(function(e){var a=e.result?e.result:"配置申请基础数据获取失败";t.$message({message:a,type:"error"})})},addHouseInfo:function(){this.Form_unit.configureRooms.push({roomAreaMax:null,roomAreaMin:null,roomNumber:null})},deleteHouseInfo:function(e){if(1===this.Form_unit.configureRooms.length)return this.$message({message:"至少要有一条房间信息",type:"warning"}),!1;this.Form_unit.configureRooms.splice(e,1)},auditStateRadioChange:function(e){var t="Form_"+this.currentDialogName,a="rules_"+this.currentDialogName;this.$refs[t].clearValidate(["auditState"]),2===e?0===this[a].comment.length&&this[a].comment.push({required:!0,message:"审批意见不能为空",trigger:"blur"}):(this[a].comment=[],this.$refs[t].clearValidate(["comment"]))},planeCurrentChange:function(e){this.planCurrentPage=e,this.getConfigurePlanDataCount()},updateScheme:function(e){e?(sessionStorage.setItem("planId",e),sessionStorage.setItem("configureId",this.currentForm.configureId),this.$router.push({name:"roomDistributeView"})):this.$message({message:"请先编辑方案名称",type:"warning"})},updateName:function(t,a,i){var r=this;this.schemeTableData[a].readonly=!1,this.$nextTick(function(){var t=e(".plan-name-column").find("input");e(t[a]).focus(),r.oldPlanName=i})},deleteScheme:function(e,t,a){var i=this;if(e)this.$confirm("此操作将永久删除方案"+a+", 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(p.c)(e).then(function(e){i.$message({message:"方案删除成功",type:"success"}),i.getSchemeList()}).catch(function(e){var t=e.result?e.result:"方案删除失败";i.$message({message:t,type:"error"})})}).catch(function(){i.$message({type:"info",message:"已取消删除"})});else{var r=(this.schemeCurrentPage-1)*this.schemePageSize+t;this.allSchemeTableData.splice(r,1),this.schemeTotal=this.allSchemeTableData.length,this.schemeTotal%this.schemePageSize>0?this.schemeTotal>this.schemePageSize?(this.schemeCurrentPage=Math.ceil(this.schemeTotal/this.schemePageSize),this.schemeTableData=this.allSchemeTableData.slice((this.schemeCurrentPage-1)*this.schemePageSize)):this.schemeTableData=this.allSchemeTableData:this.schemeTotal>this.schemePageSize?(this.schemeCurrentPage=this.schemeTotal/this.schemePageSize,this.schemeTableData=this.allSchemeTableData.slice((this.schemeCurrentPage-1)*this.schemePageSize)):this.schemeTableData=this.allSchemeTableData}},schemeCurrentChange:function(e){this.schemeCurrentPage=e;var t=(this.schemeCurrentPage-1)*this.schemePageSize,a=this.schemeCurrentPage*this.schemePageSize;this.schemeTableData=this.allSchemeTableData.slice(t,a)},addScheme:function(){this.allSchemeTableData.push({planName:"",readonly:!0,planId:null,checked:!1}),this.schemeTotal=this.allSchemeTableData.length,this.schemeTotal%this.schemePageSize>0?this.schemeTotal>this.schemePageSize?(this.schemeCurrentPage=Math.ceil(this.schemeTotal/this.schemePageSize),this.schemeTableData=this.allSchemeTableData.slice((this.schemeCurrentPage-1)*this.schemePageSize)):this.schemeTableData=this.allSchemeTableData:this.schemeTotal>this.schemePageSize?(this.schemeCurrentPage=this.schemeTotal/this.schemePageSize,this.schemeTableData=this.allSchemeTableData.slice((this.schemeCurrentPage-1)*this.schemePageSize)):this.schemeTableData=this.allSchemeTableData},planNameInputFocus:function(e){this.oldPlanName=e},savePlanName:function(e,t,a){var i=this;(e=e.trim())&&e!==this.oldPlanName&&(this.schemeTableData[a].readonly=!0,t?Object(p.A)(this.currentForm.configureId,t,e).then(function(e){i.getSchemeList(),i.$message({message:"方案名称修改成功",type:"success"})}).catch(function(e){var t=e.result?e.result:"方案名称修改失败";i.$message({message:t,type:"error"})}):Object(p.b)(this.currentForm.configureId,e).then(function(e){i.getSchemeList(),i.$message({message:"方案名称新增成功",type:"success"})}).catch(function(e){var t=e.result?e.result:"方案名称新增失败";i.$message({message:t,type:"error"})}))},getSchemeList:function(){var e=this;Object(p.n)(this.currentForm.configureId).then(function(t){t.forEach(function(e){e.readonly=!0,e.checked=!1}),e.allSchemeTableData=t,e.schemeTotal=t.length;var a=Math.ceil(e.schemeTotal/e.schemePageSize);e.schemeTotal>e.schemePageSize?a<e.schemeCurrentPage&&(e.schemeCurrentPage=a):e.schemeCurrentPage=1;var i=(e.schemeCurrentPage-1)*e.schemePageSize,r=e.schemeCurrentPage*e.schemePageSize;if(e.schemeTableData=e.allSchemeTableData.slice(i,r),e.selectedSchemeId)for(var o=0;o<e.schemeTableData.length;o++)e.schemeTableData[o].planId===e.selectedSchemeId&&(e.schemeTableData[o].checked=!0)}).catch(function(t){var a=t.result?t.result:"配置方案列表获取失败";e.$message({message:a,type:"error"})})},prev:function(){this.isSureDistributePage=!1,this.operateType="拟定分配方案",this.distributeChangeList=[],1===this.currentForm.selectionPlan?this.getAutoAllocationRoomList():this.getSchemeList()},next:function(){var e=this;if(this.operateType="确认分配",1===this.currentForm.selectionPlan){if(0===r()(this.selectData).length)return this.$message({message:"请选择至少一个房间",type:"warning"}),!1;for(var t=0;t<this.autoConditionList.length;t++){var a=!0,i=this.autoConditionList[t];if(0!==i.roomNumber&&!1===i.gotTheData)return this.$message({message:"所选的房间个数不匹配！",type:"warning"}),!1;if(i.total>=i.roomNumber){for(var o in this.selectData)if(o===i.name){a=!1;var s=this.selectData[o],u=0;for(var d in s)u+=s[d].length;if(u!==i.roomNumber)return this.$message({message:"所选的房间个数不匹配！",type:"warning"}),!1}if(a)return this.$message({message:"所选的房间个数不匹配！",type:"warning"}),!1}}for(var c=r()(this.selectData).sort(),h={},g=0;g<c.length;g++){var b=c[g];h[b]=this.selectData[b]}this.isSureDistributePage=!0,this.selectDataArray=[];var f=function(){var t={allTableData:[]},a=r()(x);a.sort(function(e,t){return e-t}),a.forEach(function(e){x[e].sort(function(e,t){return e.index-t.index}).forEach(function(e){t.allTableData.push(e)})}),t.name=N,t.currentPage=1,t.pageSize=5,t.total=t.allTableData.length||0;var i=(t.currentPage-1)*t.pageSize,o=t.currentPage*t.pageSize;t.tableData=t.allTableData.slice(i,o)||[],e.selectDataArray.push(t)},v=!0,_=!1,F=void 0;try{for(var y,I=m()(l()(h));!(v=(y=I.next()).done);v=!0){var C=y.value,A=n()(C,2),N=A[0],x=A[1];f()}}catch(e){_=!0,F=e}finally{try{!v&&I.return&&I.return()}finally{if(_)throw F}}this.sureCurrentAutoCondition=this.selectDataArray[0],this.sureDistributionActiveName=this.selectDataArray[0].name}else this.selectedSchemeId?(Object(p.m)(this.selectedSchemeId).then(function(t){t>0?(e.isSureDistributePage=!0,e.getConfigurePlanDataCount()):e.$message({message:"该方案暂无任何配置信息，请先编辑方案",type:"warning"})}).catch(function(t){var a=t.result?t.result:"方案个数获取失败";e.$message({message:a,type:"error"})}),this.getChangeData(this.selectedSchemeId)):this.$message({message:"请选择一个方案",type:"warning"})},getConfigurePlanDataCount:function(){var e=this;Object(p.e)(this.planCurrentPage,this.planPageSize,this.selectedSchemeId).then(function(t){t.records.forEach(function(e){if(e.position=e.yardName+"-"+e.buildName+"-"+e.houseNumber,e.newUnitList.length>0){var t=[];e.newUnitList.forEach(function(e){0!==e.newUnitId&&t.push(e.newUnitName)}),e.newUnitName=t.join(",")}else e.newUnitName="暂无";if(e.oldUnitList.length>0){var a=[];e.oldUnitList.forEach(function(t){0!==t.oldUnitId&&a.push(t.oldUnitName),e.oldUnitName=a.join(",")})}else e.oldUnitName="暂无"}),e.planTableData=t.records,e.planTotal=t.total}).catch(function(t){var a=t.result?t.result:"该方案房间信息获取失败";e.$message({message:a,type:"error"})})},distributeCurrentChange:function(e){this.currentAutoCondition.currentPage=e,this.getAutoAllocationRoomList()},sureDistributeCurrentChange:function(e){this.sureCurrentAutoCondition.currentPage=e;var t=(this.sureCurrentAutoCondition.currentPage-1)*this.sureCurrentAutoCondition.pageSize,a=this.sureCurrentAutoCondition.currentPage*this.sureCurrentAutoCondition.pageSize;this.sureCurrentAutoCondition.tableData=this.sureCurrentAutoCondition.allTableData.slice(t,a)},handleSelectionChange:function(e){var t=this.currentAutoCondition.name,a=this.currentAutoCondition.currentPage;e.length>0?(void 0===this.selectData[t]&&(this.selectData[t]={}),this.selectData[t][a]=e):(this.selectData[t]&&this.selectData[t][a]&&delete this.selectData[t][a],0===r()(this.selectData[t]).length&&delete this.selectData[t]);var i=this.selectData[this.currentAutoCondition.name],o=0;if(i)for(var n in i)o+=i[n].length;var s=this.currentAutoCondition.roomNumber-o;s>=0&&(this.distributeNum=s)},handleSelectionAllChange:function(e){var t=this.currentAutoCondition.name,a=this.currentAutoCondition.currentPage;e.length>0?(void 0===this.selectData[t]&&(this.selectData[t]={}),this.selectData[t][a]=e):(this.selectData[t]&&this.selectData[t][a]&&delete this.selectData[t][a],0===r()(this.selectData[t]).length&&delete this.selectData[t]);var i=this.selectData[this.currentAutoCondition.name],o=0;if(i)for(var n in i)o+=i[n].length;var s=this.currentAutoCondition.roomNumber-o;this.distributeNum=s>=0?s:0},schemeHandleSelectionChange:function(e){!1!==e.checked?e.planId?(this.schemeTableData.forEach(function(t){t.planId!==e.planId&&(t.checked=!1)}),this.selectedSchemeId=e.planId):(this.$message({message:"请先编辑方案名称",type:"warning"}),this.schemeTableData.forEach(function(e){e.checked=!1}),this.selectedSchemeId=""):this.selectedSchemeId=""},selectionPlanChange:function(e){this.currentForm.selectionPlan=e,2===e?this.getSchemeList():this.getAutoAllocationRoomList()},distributionTabClick:function(e){for(var t=e.name,a=0;a<this.autoConditionList.length;a++)if(this.autoConditionList[a].tableName===t){this.currentAutoCondition=this.autoConditionList[a];break}this.getAutoAllocationRoomList();var i=this.selectData[this.currentAutoCondition.name],r=0;if(i)for(var o in i)r+=i[o].length;var n=this.currentAutoCondition.roomNumber-r;n>=0&&(this.distributeNum=n)},sureDistributionTabClick:function(e){for(var t=e.name,a=0;a<this.selectDataArray.length;a++)if(this.selectDataArray[a].name===t){this.sureCurrentAutoCondition=this.selectDataArray[a],this.sureDistributionActiveName=this.selectDataArray[a].name;break}},addEstate:function(){this.Form_yard.yardAndestateVoList.push({estateId:null,estateName:"",serviceContentId:null,contractAmount:null,endTime:"",startTime:"",serviceContentList:[]})},handleDelete:function(e,t){this.Form_yard.yardAndestateVoList.splice(e,1)},getEstateNameList:function(){var e=this;Object(g.n)().then(function(t){e.estateNameOpts=t}).catch(function(t){var a=t.result?t.result:"物业名称下拉选项获取失败";e.$message({message:a,type:"error"})})},selectYardHandle:function(e){var t=this;if(e===this.addYardName)return this.$refs.map.setYardPosition(this.addYardLongitude,this.addYardLatitude,this.addYardName,"yard"),!1;Object(g.u)(e).then(function(e){t.$refs.map.setYardPosition(e.yardLongitude,e.yardLatitude,e.yardName,"yard")}).catch(function(e){var a=e.result?e.result:"坐标信息获取失败";t.$message({message:a,type:"error"})})},selectYear:function(e,t){this.Form_build[e]=t},getUnitDic:function(){var e=this;Object(h.c)().then(function(t){e.unitOptions=t}).catch(function(t){var a=t.result?t.result:"单位信息获取失败";e.$message({message:a,type:"error"})})},getYardDic:function(){var e=this;Object(h.d)(1).then(function(t){if(e.yardOptionsModal=t,e.yardOptions=t,e.addYardName&&e.addYardLongitude&&e.addYardLatitude&&1===e.Form_yard.yard.type){var a={};a.yardId=e.addYardName,a.yardLatitude=e.addYardLatitude,a.yardLongitude=e.addYardLongitude,a.yardName=e.addYardName,e.yardOptionsModal.push(a)}var i=!0;if(e.Form_build.yardId){for(var r=0;r<e.yardOptionsModal.length;r++)if(e.yardOptionsModal[r].yardId===e.Form_build.yardId){i=!1;break}i&&(e.Form_build.yardId="")}}).catch(function(t){var a=t.result?t.result:"院落名称下拉菜单获取失败";e.$message({message:a,type:"error"})})},rentStatusChange:function(e){0===e&&(this.Form_build.outRent.isRent=0)},setPostion:function(e,t){"build"===this.addInfoType?(this.Form_build.buildLongitude=e,this.Form_build.buildLatitude=t):(this.Form_yard.yard.yardLongitude=e,this.Form_yard.yard.yardLatitude=t)},buildMapBindCoord:function(e,t){this.buildLimitFloat(e),""!==this.Form_build.buildLongitude&&null!==this.Form_build.buildLatitude&&""!==this.Form_build.buildLongitude&&null!==this.Form_build.buildLatitude&&b.a.$emit("mapBindCoord",this.Form_build.buildLongitude,this.Form_build.buildLatitude)},yardMapBindCoord:function(e,t,a){this.yardLimitFloat(e,t,a);var i=this.Form_yard.yard.yardLongitude,r=this.Form_yard.yard.yardLatitude;""!==i&&null!==i&&""!==r&&null!==r&&b.a.$emit("mapBindCoord",i,r)},submitUpload:function(){this.$refs.upload.submit(),this.$refs.uploadImg.submit()},beforeAvatarUpload:function(e){var t=e.size/1024/1024<200;return t||this.$message.error("上传文件大小不能超过200MB!"),t},handleRemove:function(t,a){if("success"===t.status){this.uploadedNum--;for(var i=this.Form_build.floorDrawingList.length-1;i>=0;i--)if(this.Form_build.floorDrawingList[i].floordrawingVirtualUrl===t.response.imgList[0].imgUrl){this.Form_build.floorDrawingList.splice(i,1);break}for(var r=this.Form_build.fileList.length-1;r>=0;r--)if(this.Form_build.fileList[r].uid===t.uid){this.Form_build.fileList.splice(r,1);break}}this.uploadNum=a.length-this.uploadedNum,this.fileList=a,this.$nextTick(function(){var t=e(".addInfo-dialog").find(".dialog-content"),a=e(".addInfo-dialog").find(".step-item")[2],i=e(a).outerHeight();t.css("height",i)})},handleImgRemove:function(e,t){"success"===e.status&&(this.uploadedImgNum--,this.Form_build.fileListImg=[],this.Form_build.newFloorImgUrlList=[]),this.uploadImgNum=t.length-this.uploadedImgNum,this.fileListImg=t},improvingHandleRemove:function(t,a){if("success"===t.status){this.uploadedImprovingNum--;for(var i=this[this.activeAuditStateFormName].improvingDataList.length-1;i>=0;i--){var r=this[this.activeAuditStateFormName].improvingDataList[i];if(r.floordrawingVirtualUrl===r.response.imgList[0].imgUrl){this[this.activeAuditStateFormName].improvingDataList.splice(i,1);break}}}this.uploadImprovingNum=a.length-this.uploadedImprovingNum,this.fileListImproving=a,this.$nextTick(function(){var t=e(".addInfo-dialog").find(".dialog-content"),a=e(".addInfo-dialog").find(".step-item")[0],i=e(a).outerHeight();t.css("height",i)})},handleSuccess:function(e,t,a){this.uploadSuccessNum++,this.Form_build.floorDrawingList.push({floordrawingUrl:e.imgList[0].imgPath,floordrawingVirtualUrl:e.imgList[0].imgUrl,floordrawingFileName:t.name,buildId:this.Form_build.buildId}),this.Form_build.fileList.push(t),this.uploadSuccessNum===this.uploadNum&&(this.submitFlag=!0),(this.submitFlag&&this.uploadChangeFlag&&this.submitImgFlag&&this.uploadImgChangeFlag||this.submitFlag&&this.uploadChangeFlag&&!this.uploadImgChangeFlag)&&this.saveBuildForm()},handleImgSuccess:function(e,t,a){this.uploadSuccessImgNum++,this.Form_build.newFloorImgUrlList.push({floorimgUrl:e.imgList[0].imgPath,floorVirtualUrl:e.imgList[0].imgUrl}),this.Form_build.fileListImg.push(t),this.uploadSuccessImgNum===this.uploadImgNum&&(this.submitImgFlag=!0),(this.submitFlag&&this.uploadChangeFlag&&this.submitImgFlag&&this.uploadImgChangeFlag||!this.uploadChangeFlag&&this.submitImgFlag&&this.uploadImgChangeFlag)&&this.saveBuildForm()},improvingHandleSuccess:function(e,t,a){this.uploadSuccessImprovingNum++,this[this.activeAuditStateFormName].improvingDataList.push({improvingDrawingUrl:e.imgList[0].imgPath,improvingDrawingVirtualUrl:e.imgList[0].imgUrl,improvingDrawingFileName:t.name}),this.uploadSuccessImprovingNum===this.uploadImprovingNum&&(this.submitImprovingFlag=!0),this.submitImprovingFlag&&this.baseInfoToYard()},handleChange:function(t,a){this.uploadChangeFlag=!0,this.uploadNum=a.length-this.uploadedNum,this.$nextTick(function(){var t=e(".addInfo-dialog").find(".dialog-content"),a=e(".addInfo-dialog").find(".step-item")[2],i=e(a).outerHeight();t.css("height",i)})},handleImgChange:function(e,t){this.uploadImgChangeFlag=!0,this.uploadImgNum=t.length-this.uploadedImgNum,this.fileListImg=t},improvingHandleChange:function(t,a){this.uploadImprovingNum=a.length-this.uploadedImprovingNum,this.$nextTick(function(){var t=e(".addInfo-dialog").find(".dialog-content"),a=e(".addInfo-dialog").find(".step-item")[0],i=e(a).outerHeight();t.css("height",i)})},handleExceed:function(e,t){this.$message.warning("最多只能上传五个文件！")},handleImgExceed:function(e,t){this.$message.warning("最多只能上传一张图片！")},handleError:function(e,t,a){401===e.status&&(this.$store.dispatch("Logout",this.token),this.$router.push({path:"/login"}));var i=e.result?e.result:"上传失败";this.$message({message:i,type:"error"})},estateNameSelectChange:function(){var e=this.Form_yard.yardAndestateVoList.length;if(e>0){var t=0;this.estateNameFlag=!1;for(var a=0;a<e;a++){if(!this.Form_yard.yardAndestateVoList[a].estateId)break;t++}t===e&&(this.estateNameFlag=!0)}else this.estateNameFlag=!0},serviceContentSelectChange:function(){var e=this.Form_yard.yardAndestateVoList.length;if(e>0){var t=0;this.serviceContentFlag=!1;for(var a=0;a<e;a++){if(0===this.Form_yard.yardAndestateVoList[a].serviceContentList.length)break;t++}t===e&&(this.serviceContentFlag=!0)}else this.serviceContentFlag=!0},startTimeBlur:function(){var e=this.Form_yard.yardAndestateVoList.length;if(e>0){var t=0,a=0;this.startTimeFlag=!1,this.startTimeLimitFlag=!1;for(var i=0;i<e;i++){if(!this.Form_yard.yardAndestateVoList[i].startTime)break;t++}for(var r=0;r<e;r++){var o=this.Form_yard.yardAndestateVoList[r];if(o.startTime&&o.endTime&&o.startTime>=o.endTime)break;a++}t===e&&(this.startTimeFlag=!0),a===e&&(this.startTimeLimitFlag=!0)}else this.startTimeFlag=!0,this.startTimeLimitFlag=!0},endTimeBlur:function(){var e=this.Form_yard.yardAndestateVoList.length;if(e){var t=0,a=0;this.endTimeFlag=!1,this.endTimeLimitFlag=!1;for(var i=0;i<e;i++){if(!this.Form_yard.yardAndestateVoList[i].endTime)break;t++}for(var r=0;r<e;r++){var o=this.Form_yard.yardAndestateVoList[r];if(o.startTime&&o.endTime&&o.startTime>=o.endTime)break;a++}t===e&&(this.endTimeFlag=!0),a===e&&(this.endTimeLimitFlag=!0)}else this.endTimeFlag=!0,this.endTimeLimitFlag=!0},contractAmountBlur:function(){var e=this.Form_yard.yardAndestateVoList.length;if(e>0){var t=0;this.contractAmountFlag=!1;for(var a=0;a<e;a++){if(!this.Form_yard.yardAndestateVoList[a].contractAmount)break;t++}t===e&&(this.contractAmountFlag=!0)}else this.contractAmountFlag=!0},submitForm:function(e){var t=this;if("addInfo"===this.currentDialogName){if(0===this.localSaveBuildInfo.length)return this.$message({message:"请至少添加一个楼座",type:"warning"}),!1;switch(this.localSaveBuildInfo.forEach(function(e){e.yardId===t.addYardName&&(e.yardId=""),delete e.fileList,delete e.fileListImg,delete e.uuid}),this.currentForm.buildVoList=this.localSaveBuildInfo,this.Form_yard.yard.yardName&&(this.currentForm.yardAddVo=this.Form_yard),this.activeAuditState){case 2:this.currentForm.improvingDataRRC=this.Form_replacement;break;case 3:this.currentForm.improvingDataRRC=this.Form_rent;break;case 4:this.currentForm.improvingDataRRC=this.Form_construction}Object(p.w)(this.currentForm).then(function(e){t.$message({message:t.tipsText+"成功",type:"success"}),t.getList(),t.dialogVisible[t.currentDialogName]=!1,b.a.$emit("updateBacklogTips")}).catch(function(e){var a=e.result?e.result:t.tipsText+"失败";t.$message({message:a,type:"error"})})}else this.$refs[e].validate(function(e){if(!e)return!1;var a=JSON.parse(c()(t.currentForm));if("unit"===t.currentDialogName){if(1===a.auditState&&(t.submitVerify(),!(t.roomNumberSubmitFlag&&t.roomAreaNotNullFlag&&t.roomAreaRangeRepeatFlag&&t.roomAreaRangeErrorFlag)))return!1;2===a.auditState?(delete a.configureRooms,delete a.elevatorsNumber,delete a.regionIds,delete a.useunitId):("暂无单位"===a.useunitId&&(a.useunitId=""),delete a.comment)}else"project"===t.currentDialogName&&(1===t.currentForm.allocationPlan?1===t.currentForm.selectionPlan?t.selectDataArray.forEach(function(e){e.allTableData.forEach(function(e){var t={};t.buildId=e.buildId,t.houseId=e.houseId,t.yardId=e.yardId,e.unitList&&e.unitList.length>0&&(t.configurePlanOldUnits=[],e.unitList.forEach(function(e){t.configurePlanOldUnits.push({unitId:e.unitId})})),a.configurePlanDataList.push(t)})}):a.planId=t.selectedSchemeId:delete a.selectionPlan);Object(p.w)(a).then(function(e){t.$message({message:t.tipsText+"成功",type:"success"}),t.getList(),t.dialogVisible[t.currentDialogName]=!1,b.a.$emit("updateBacklogTips")}).catch(function(e){var a=e.result?e.result:t.tipsText+"失败";t.$message({message:a,type:"error"})})})},clearForm:function(e){for(var t in e){var a=this.getDataType(e[t]);if("String"===a)e[t]="";else if("Array"===a)e[t]=[];else if("Object"===a){r()(e[t]).length>0?this.clearForm(e[t]):e[t]={}}else e[t]=null}},dialogOpen:function(){var e=this;this.$nextTick(function(){var t="Form_"+e.currentDialogName;e.$refs[t]&&e.$refs[t].clearValidate()})},dialogClosed:function(){switch(this.currentDialogName){case"unit":this.currentForm.configureRooms=[],this.clearForm(this.currentForm),this.clearForm(this.baseInfoForm),this.currentForm.auditState=1;this.currentForm.configureRooms.push({roomAreaMax:null,roomAreaMin:null,roomNumber:null}),this.currentForm.elevatorsNumber=0,this.currentForm.useunitId="暂无单位";break;case"project":this.clearForm(this.currentForm),this.clearForm(this.baseInfoForm),this.autoConditionList=[],this.currentAutoCondition=null,this.sureCurrentAutoCondition=null,this.distributionActiveName="table1",this.sureDistributionActiveName="",this.currentForm.allocationPlan=1,this.currentForm.auditState=0,this.currentForm.selectionPlan=1,this.selectData={},this.selectDataArray=[],this.isSureDistributePage=!1,this.allSchemeTableData=[],this.schemeTableData=[],this.schemeCurrentPage=1,this.schemePageSize=5,this.schemeTotal=0,this.planTableData=[],this.planCurrentPage=1,this.planPageSize=5,this.planTotal=0,this.oldPlanName="",this.selectedSchemeId="",this.distributeChangeList=[],this.distributeNum=0;break;case"leader":this.distributeCurrentPage=1,this.distributeTotal=0,this.clearForm(this.currentForm),this.clearForm(this.baseInfoForm),this.currentForm.auditState=1,this.rules_leader.comment=[],this.distributeChangeList=[];break;case"addInfo":switch(this.clearForm(this.currentForm),this.currentForm.auditState=0,this.clearForm(this.baseInfoForm),this.Form_build.outRent.isRent=0,this.Form_build.elevatorNum=0,this.clearForm(this.Form_build),this.Form_yard.yardAndestateVoList=[],this.clearForm(this.Form_yard),this.Form_yard.yard.type=1,this.clearForm(this.Form_replacement),this.clearForm(this.Form_rent),this.clearForm(this.Form_construction),this.$refs.Form_build.clearValidate(),this.$refs.Form_yard.clearValidate(),this.activeAuditState){case 2:this.$refs.Form_replacement.clearValidate();break;case 3:this.$refs.Form_rent.clearValidate();break;case 4:this.$refs.Form_construction.clearValidate()}this.uploadImgNum=0,this.uploadSuccessImgNum=0,this.fileList=[],this.fileListImg=[],this.uploadChangeFlag=!1,this.uploadImgChangeFlag=!1,this.submitImgFlag=!1,this.submitFlag=!1,this.showMap=!1,this.addInfoType="yard",this.addYardName="",this.addYardLongitude="",this.addYardLatitude="",this.activeAuditStateFormName=null,this.localSaveBuildInfo=[],this.localSaveBuildList=[],this.activeInfo=null,this.submitAllFlag=!1,this.addInfoProcess=0,this.replaceMode=1,this.currentAddInfoType="",this.uploadImprovingNum=0,this.uploadedImprovingNum=0,this.uploadSuccessImprovingNum=0,this.submitImprovingFlag=!1,this.fileListImproving=[],e(".addInfo-dialog").find(".el-dialog__body").scrollTop(0),e(".addInfo-dialog").find(".dialog-content").animate({left:"0px"})}this.downloadCheckedList=[],this.fileDownLoadCheckedList=[],this.currentDialogName="",this.currentForm=null,this.operateType="",this.tipsText="",this.roomNumberSubmitFlag=!1,this.roomAreaNotNullFlag=!1,this.roomAreaRangeRepeatFlag=!1,this.roomAreaRangeErrorFlag=!1,this.currentPlanId=null,this.distributeTableData=[]},getDataType:function(e){var t=!0,a=!1,i=void 0;try{for(var r,o=m()(["String","Object","Number","Array","Function"]);!(t=(r=o.next()).done);t=!0){var n=r.value;if(Object.prototype.toString.call(e)==="[object "+n+"]")return n}}catch(e){a=!0,i=e}finally{try{!t&&o.return&&o.return()}finally{if(a)throw i}}},buildLimitFloat:function(e,t,a){void 0===a?this.Form_build[e]=this.Form_build[e].replace(/[^\d.]/g,"").replace(/\.{2,}/g,".").replace(".","$#$").replace(/\./g,"").replace("$#$",".").replace(/^(\-)*(\d+)\.(\d\d).*$/,"$1$2.$3").replace(/^\./g,""):this.Form_build[a][e]=this.Form_build[a][e].replace(/[^\d.]/g,"").replace(/\.{2,}/g,".").replace(".","$#$").replace(/\./g,"").replace("$#$",".").replace(/^(\-)*(\d+)\.(\d\d).*$/,"$1$2.$3").replace(/^\./g,""),t&&void 0===a&&""!==this.Form_build[e]&&(this.Form_build[e]=(this.Form_build[e]-0).toFixed(2)),t&&a&&""!==this.Form_build[a][e]&&(this.Form_build[a][e]=(this.Form_build[a][e]-0).toFixed(2))},buildLimitInt:function(e){this.Form_build[e]=this.Form_build[e].replace(/[^0-9]/g,"")},yardLimitFloat:function(e,t,a){this.Form_yard[t][e]&&(this.Form_yard[t][e]=this.Form_yard[t][e].replace(/[^\d.]/g,"").replace(/\.{2,}/g,".").replace(".","$#$").replace(/\./g,"").replace("$#$",".").replace(/^\./g,"")),a&&this.Form_yard[t][e]&&(this.Form_yard[t][e]=(this.Form_yard[t][e]-0).toFixed(6))},baseLimitFloat:function(e,t){this[this.activeAuditStateFormName][e]=this[this.activeAuditStateFormName][e].replace(/[^\d.]/g,"").replace(/\.{2,}/g,".").replace(".","$#$").replace(/\./g,"").replace("$#$",".").replace(/^(\-)*(\d+)\.(\d\d).*$/,"$1$2.$3").replace(/^\./g,""),t&&""!==this[this.activeAuditStateFormName][e]&&(this[this.activeAuditStateFormName][e]=(this[this.activeAuditStateFormName][e]-0).toFixed(2))},contractAmountLimitFloat:function(e,t){this.Form_yard.yardAndestateVoList[e].contractAmount=this.Form_yard.yardAndestateVoList[e].contractAmount.replace(/[^\d.]/g,"").replace(/\.{2,}/g,".").replace(".","$#$").replace(/\./g,"").replace("$#$",".").replace(/^(\-)*(\d+)\.(\d\d).*$/,"$1$2.$3").replace(/^\./g,""),t&&""!==this.Form_yard.yardAndestateVoList[e].contractAmount&&(this.Form_yard.yardAndestateVoList[e].contractAmount=(this.Form_yard.yardAndestateVoList[e].contractAmount-0).toFixed(2))},roomNumberLimitInt:function(t,a){if(this.Form_unit.configureRooms[t].roomNumber&&(this.Form_unit.configureRooms[t].roomNumber=this.Form_unit.configureRooms[t].roomNumber.replace(/[^0-9]/g,"")),a){var i=this.Form_unit.configureRooms[t].roomNumber,r=e('<p class="errorTips roomNumberTips">房间数量不能为空</p>'),o=e(".house-table-box").find(".roomNumberTips").length;i?(e(".roomNumberTips").remove(),this.roomNumberSubmitFlag=!0):0===o&&(e(".house-table-box").append(r),this.roomNumberSubmitFlag=!1)}},roomAreaMinLimitFloat:function(t,a,i){if(this.Form_unit.configureRooms[t].roomAreaMin&&(this.Form_unit.configureRooms[t].roomAreaMin=this.Form_unit.configureRooms[t].roomAreaMin.replace(/[^\d.]/g,"").replace(/\.{2,}/g,".").replace(".","$#$").replace(/\./g,"").replace("$#$",".").replace(/^(\-)*(\d+)\.(\d\d).*$/,"$1$2.$3").replace(/^\./g,""),a&&""!==this.Form_unit.configureRooms[t].roomAreaMin&&(this.Form_unit.configureRooms[t].roomAreaMin=(this.Form_unit.configureRooms[t].roomAreaMin-0).toFixed(2))),i){var r=""!==this.Form_unit.configureRooms[t].roomAreaMin&&null!==this.Form_unit.configureRooms[t].roomAreaMin?this.Form_unit.configureRooms[t].roomAreaMin-0:"",o=""!==this.Form_unit.configureRooms[t].roomAreaMax&&null!==this.Form_unit.configureRooms[t].roomAreaMax?this.Form_unit.configureRooms[t].roomAreaMax-0:"",n=e('<p class="errorTips roomAreaMinNotNull">房间面积范围不能为空</p>'),s=e('<p class="errorTips roomAreaRangeRepet">房间面积范围不能重复</p>'),l=e('<p class="errorTips roomAreaRangeError">房间面积范围的最大值不能小于等于最小值</p>'),u=e(".house-table-box").find(".roomAreaMinNotNull").length,m=e(".house-table-box").find(".roomAreaRangeRepet").length,d=e(".house-table-box").find(".roomAreaRangeError").length;""===r?0===u&&(e(".house-table-box").append(n),this.roomAreaNotNullFlag=!1):(e(".roomAreaMinNotNull").remove(),this.roomAreaNotNullFlag=!0);for(var c=!1,p=0;p<this.Form_unit.configureRooms.length;p++)if(p!==t){var h=""!==this.Form_unit.configureRooms[p].roomAreaMin&&null!==this.Form_unit.configureRooms[p].roomAreaMin?this.Form_unit.configureRooms[p].roomAreaMin-0:"",g=""!==this.Form_unit.configureRooms[p].roomAreaMax&&null!==this.Form_unit.configureRooms[p].roomAreaMax?this.Form_unit.configureRooms[p].roomAreaMax-0:"";if(""!==h&&""!==g&&""!==r&&""!==o&&h<=r&&r<=g||h<=o&&o<=g){c=!0;break}}c?0===m&&(e(".house-table-box").append(s),this.roomAreaRangeRepeatFlag=!1):(e(".roomAreaRangeRepet").remove(),this.roomAreaRangeRepeatFlag=!0),""!==r&&""!==o&&r>=o?0===d&&(e(".house-table-box").append(l),this.roomAreaRangeErrorFlag=!1):(e(".roomAreaRangeError").remove(),this.roomAreaRangeErrorFlag=!0)}},roomAreaMaxLimitFloat:function(t,a,i){if(this.Form_unit.configureRooms[t].roomAreaMax&&(this.Form_unit.configureRooms[t].roomAreaMax=this.Form_unit.configureRooms[t].roomAreaMax.replace(/[^\d.]/g,"").replace(/\.{2,}/g,".").replace(".","$#$").replace(/\./g,"").replace("$#$",".").replace(/^(\-)*(\d+)\.(\d\d).*$/,"$1$2.$3").replace(/^\./g,""),a&&""!==this.Form_unit.configureRooms[t].roomAreaMax&&(this.Form_unit.configureRooms[t].roomAreaMax=(this.Form_unit.configureRooms[t].roomAreaMax-0).toFixed(2))),i){var r=""!==this.Form_unit.configureRooms[t].roomAreaMin&&null!==this.Form_unit.configureRooms[t].roomAreaMin?this.Form_unit.configureRooms[t].roomAreaMin-0:"",o=""!==this.Form_unit.configureRooms[t].roomAreaMax&&null!==this.Form_unit.configureRooms[t].roomAreaMax?this.Form_unit.configureRooms[t].roomAreaMax-0:"",n=e('<p class="errorTips roomAreaMinNotNull">房间面积范围不能为空</p>'),s=e('<p class="errorTips roomAreaRangeRepet">房间面积范围不能重复</p>'),l=e('<p class="errorTips roomAreaRangeError">房间面积范围的最大值不能小于等于最小值</p>'),u=e(".house-table-box").find(".roomAreaMinNotNull").length,m=e(".house-table-box").find(".roomAreaRangeRepet").length,d=e(".house-table-box").find(".roomAreaRangeError").length;""===o?0===u&&(e(".house-table-box").append(n),this.roomAreaNotNullFlag=!1):(e(".roomAreaMinNotNull").remove(),this.roomAreaNotNullFlag=!0);for(var c=!1,p=0;p<this.Form_unit.configureRooms.length;p++)if(p!==t){var h=""!==this.Form_unit.configureRooms[p].roomAreaMin&&null!==this.Form_unit.configureRooms[p].roomAreaMin?this.Form_unit.configureRooms[p].roomAreaMin-0:"",g=""!==this.Form_unit.configureRooms[p].roomAreaMax&&null!==this.Form_unit.configureRooms[p].roomAreaMax?this.Form_unit.configureRooms[p].roomAreaMax-0:"";if(""!==h&&""!==g&&""!==r&&""!==o&&h<=r&&r<=g||h<=o&&o<=g){c=!0;break}}c?0===m&&(e(".house-table-box").append(s),this.roomAreaRangeRepeatFlag=!1):(e(".roomAreaRangeRepet").remove(),this.roomAreaRangeRepeatFlag=!0),""!==r&&""!==o&&r>=o?0===d&&(e(".house-table-box").append(l),this.roomAreaRangeErrorFlag=!1):(e(".roomAreaRangeError").remove(),this.roomAreaRangeErrorFlag=!0)}},submitVerify:function(){this.roomNumberSubmitFlag=!1,this.roomAreaNotNullFlag=!1,this.roomAreaRangeRepeatFlag=!1,this.roomAreaRangeErrorFlag=!1;for(var t=e('<p class="errorTips roomNumberTips">房间数量不能为空</p>'),a=e(".house-table-box").find(".roomNumberTips").length,i=!0,r=0;r<this.Form_unit.configureRooms.length;r++){if(!(""!==this.Form_unit.configureRooms[r].roomNumber&&null!==this.Form_unit.configureRooms[r].roomNumber?this.Form_unit.configureRooms[r].roomNumber:"")){0===a&&e(".house-table-box").append(t),this.roomNumberSubmitFlag=!1,i=!1;break}}i&&(e(".roomNumberTips").remove(),this.roomNumberSubmitFlag=!0);for(var o=e('<p class="errorTips roomAreaMinNotNull">房间面积范围不能为空</p>'),n=e(".house-table-box").find(".roomAreaMinNotNull").length,s=!0,l=0;l<this.Form_unit.configureRooms.length;l++){var u=""!==this.Form_unit.configureRooms[l].roomAreaMin&&null!==this.Form_unit.configureRooms[l].roomAreaMin?this.Form_unit.configureRooms[l].roomAreaMin-0:"",m=""!==this.Form_unit.configureRooms[l].roomAreaMax&&null!==this.Form_unit.configureRooms[l].roomAreaMax?this.Form_unit.configureRooms[l].roomAreaMax-0:"";if(""===u||null===u||""===m||null===m){0===n&&e(".house-table-box").append(o),this.roomAreaNotNullFlag=!1,s=!1;break}}s&&(e(".roomAreaMinNotNull").remove(),this.roomAreaNotNullFlag=!0);for(var d=e('<p class="errorTips roomAreaRangeRepet">房间面积范围不能重复</p>'),c=e(".house-table-box").find(".roomAreaRangeRepet").length,p=!0,h=0;h<this.Form_unit.configureRooms.length;h++)for(var g=""!==this.Form_unit.configureRooms[h].roomAreaMin&&null!==this.Form_unit.configureRooms[h].roomAreaMin?this.Form_unit.configureRooms[h].roomAreaMin-0:"",b=""!==this.Form_unit.configureRooms[h].roomAreaMax&&null!==this.Form_unit.configureRooms[h].roomAreaMax?this.Form_unit.configureRooms[h].roomAreaMax-0:"",f=0;f<this.Form_unit.configureRooms.length;f++)if(h!==f){var v=""!==this.Form_unit.configureRooms[f].roomAreaMin&&null!==this.Form_unit.configureRooms[f].roomAreaMin?this.Form_unit.configureRooms[f].roomAreaMin-0:"",_=""!==this.Form_unit.configureRooms[f].roomAreaMax&&null!==this.Form_unit.configureRooms[f].roomAreaMax?this.Form_unit.configureRooms[f].roomAreaMax-0:"";if(""!==v&&""!==_&&v<=g&&g<=_||v<=b&&b<=_){0===c&&e(".house-table-box").append(d),this.roomAreaRangeRepeatFlag=!1,p=!1;break}}p&&(e(".roomAreaRangeError").remove(),this.roomAreaRangeRepeatFlag=!0);for(var F=e('<p class="errorTips roomAreaRangeError">房间面积范围的最大值不能小于等于最小值</p>'),y=e(".house-table-box").find(".roomAreaRangeError").length,I=!0,C=0;C<this.Form_unit.configureRooms.length;C++){var A=""!==this.Form_unit.configureRooms[C].roomAreaMin&&null!==this.Form_unit.configureRooms[C].roomAreaMin?this.Form_unit.configureRooms[C].roomAreaMin-0:"",N=""!==this.Form_unit.configureRooms[C].roomAreaMax&&null!==this.Form_unit.configureRooms[C].roomAreaMax?this.Form_unit.configureRooms[C].roomAreaMax-0:"";if(""!==A&&""!==N&&A>=N){0===y&&e(".house-table-box").append(F),this.roomAreaRangeErrorFlag=!1,I=!1;break}}I&&(e(".roomAreaRangeError").remove(),this.roomAreaRangeErrorFlag=!0)},fileDownLoad:function(e){var t=this;if(e&&0!==e.length){var i={};i.addressList=e,i.configureId=this.currentForm.configureId,i.downLoadType=1,Object(p.d)(i).then(function(e){a("3UNf")(e,decodeURIComponent(sessionStorage.getItem("CADdownloadFileName")))}).catch(function(e){var a=e.result?e.result:"文件下载失败";t.$message({message:a,type:"error"})})}else this.$message({message:"请先选择一个文件",type:"warning"})},handleCheckedFileChange:function(e){var t=this;this.downloadCheckedList=[],this.fileDownLoadCheckedList.forEach(function(e){var a=e.split(","),i={address:a[0],fileName:a[1]};t.downloadCheckedList.push(i)})}},mounted:function(){var t=this;this.userId=sessionStorage.getItem("userId"),this.getUserUnitDic(),this.getList(),this.getReapportionUnit(),this.getRegionList(),this.username=sessionStorage.getItem("username"),this.token=sessionStorage.getItem("TOKEN"),this.token&&(this.postHeaders.Authorization="Bearer "+this.token),setTimeout(function(){var a=e("#mainDiv").height(),i=e("#queryBox").outerHeight(!0),r=e("#operateBox").height();t.tableHeight=a-i-r},1),this.pickerOptions_start.disabledDate=function(e){if(t.endTime)return new Date(t.endTime).getTime()<e.getTime()},this.pickerOptions_end.disabledDate=function(e){if(t.startTime)return new Date(t.startTime).getTime()>e.getTime()}}}}).call(t,a("7t+N"))},Cf1h:function(e,t){},"I/3G":function(e,t,a){"use strict";var i=a("u3Mf"),r=a("yzMb"),o=a("YFyo"),n=a("97S/"),s=a("zG9E"),l=a("HcVH"),u=a("Qimm"),m=(a("OMJi"),{components:{BaiduMap:o.a,bmNavigation:n.a,bmMapType:s.a,bmMarker:l.a,bmLabel:u.a},data:function(){return{center:{lng:i.c,lat:i.b},zoom:15,markerPosition:{lng:0,lat:0},yardPosition:{lng:0,lat:0},buildPosition:{lng:0,lat:0},currentYardName:"",currentBuildName:"",yardImageUrl:""+i.a+i.f+"/images/yard.png",buildImageUrl:""+i.a+i.f+"/images/build.png"}},methods:{handler:function(e){e.BMap,e.map;this.zoom=this.zoom},mapClick:function(e){var t=e.point.lng,a=e.point.lat;this.markerPosition.lng=t,this.markerPosition.lat=a,this.$emit("mapClick",t,a)},setYardPosition:function(e,t,a){this.yardPosition.lng=e,this.yardPosition.lat=t,this.center.lng=e,this.center.lat=t,this.currentYardName=a},setBuildPosition:function(e,t,a){this.buildPosition.lng=e,this.buildPosition.lat=t,this.currentBuildName=a}},mounted:function(){var e=this;r.a.$off("mapBindCoord"),r.a.$on("mapBindCoord",function(t,a){e.markerPosition.lng=t,e.markerPosition.lat=a})}}),d={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("baidu-map",{ref:"baiduMap",attrs:{id:"baidu_map",ak:"2IMiGQlksUfRyo9UiGGq6EY6EsZAtFAl",center:e.center,zoom:e.zoom,"scroll-wheel-zoom":!0},on:{ready:e.handler,click:e.mapClick}},[a("bm-navigation",{attrs:{anchor:"BMAP_ANCHOR_TOP_RIGHT"}}),e._v(" "),a("bm-map-type",{attrs:{"map-types":["BMAP_NORMAL_MAP","BMAP_HYBRID_MAP"],anchor:"BMAP_ANCHOR_TOP_LEFT"}}),e._v(" "),a("bm-marker",{attrs:{position:e.markerPosition,icon:{url:e.buildImageUrl,size:{width:39,height:39}}}},[a("bm-label",{attrs:{content:"所选位置",labelStyle:{color:"red",fontSize:"14px"},offset:{width:-25,height:30}}})],1),e._v(" "),a("bm-marker",{attrs:{position:e.yardPosition,icon:{url:e.yardImageUrl,size:{width:39,height:39}}}},[a("bm-label",{attrs:{content:e.currentYardName,labelStyle:{color:"red",fontSize:"14px"},offset:{width:-10,height:30}}})],1),e._v(" "),a("bm-marker",{attrs:{position:e.buildPosition,icon:{url:e.buildImageUrl,size:{width:9,height:25}}}},[a("bm-label",{attrs:{content:e.currentBuildName,labelStyle:{color:"red",fontSize:"14px"},offset:{width:-10,height:30}}})],1)],1)},staticRenderFns:[]};var c=a("VU/8")(m,d,!1,function(e){a("o3fu")},null,null);t.a=c.exports},Kxw6:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("15IE"),r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"configBacklog"}},[a("div",{staticClass:"query-box",attrs:{id:"queryBox"}},[a("div",{staticClass:"clearfix"},[a("div",{staticClass:"query-item"},[a("div",{staticClass:"query-title"},[e._v("配置编号：")]),e._v(" "),a("div",{staticClass:"query-input"},[a("el-input",{attrs:{placeholder:"请输入配置编号"},model:{value:e.configureNo,callback:function(t){e.configureNo="string"==typeof t?t.trim():t},expression:"configureNo"}})],1)]),e._v(" "),a("div",{staticClass:"query-item",staticStyle:{"margin-left":"50px"}},[a("div",{staticClass:"query-title"},[e._v("申请单位：")]),e._v(" "),a("div",{staticClass:"query-input"},[a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请选择"},model:{value:e.unitId,callback:function(t){e.unitId=t},expression:"unitId"}},e._l(e.unitAuthorityOptions,function(e){return a("el-option",{key:e.unitId,attrs:{label:e.unitName,value:e.unitId}})}))],1)]),e._v(" "),a("div",{staticClass:"query-item",staticStyle:{"margin-left":"50px"}},[a("div",{staticClass:"query-title"},[e._v("申请时间：")]),e._v(" "),a("div",{staticClass:"query-input"},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd HH:mm:ss","picker-options":e.pickerOptions_start},model:{value:e.startTime,callback:function(t){e.startTime=t},expression:"startTime"}})],1)]),e._v(" "),a("div",{staticClass:"query-item"},[a("div",{staticClass:"query-title",staticStyle:{margin:"0 5px"}},[e._v("至")]),e._v(" "),a("div",{staticClass:"query-input"},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd 23:59:59","picker-options":e.pickerOptions_end},model:{value:e.endTime,callback:function(t){e.endTime=t},expression:"endTime"}})],1)]),e._v(" "),a("div",{staticClass:"query-btn"},[a("search-btn",{on:{clickBtn:e.search}}),e._v(" "),a("reset-btn",{on:{clickBtn:e.reset}})],1)])]),e._v(" "),a("div",{staticClass:"table-box"},[a("table-component",{attrs:{tableData:e.tableData,tableHeight:e.tableHeight}},[a("el-table-column",{attrs:{label:"序号",type:"index",width:"50",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"configureNo",label:"配置编号",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"unitName",label:"申请单位",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"configureApplicant",label:"申请人",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"unitComplement",label:"编制人数",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"actualNumber",label:"实有人数",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"totalArea",label:"现有面积(m²)",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"perArea",label:"人均面积(m²)",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"configureDate",label:"申请时间",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"table-operate",on:{click:function(a){e.openDialog(t.row)}}},[a("span",{staticClass:"iconfont"},[e._v("")]),e._v(" "),a("span",[e._v(e._s(t.row.applyStatusText))])])]}}])})],1),e._v(" "),a("div",{staticClass:"table-operate-box",attrs:{id:"operateBox"}},[a("div",{staticClass:"operate-btn"},[a("table-btn-group",{attrs:{batchDelBtnShow:!1,addBtnShow:!1}})],1),e._v(" "),a("div",{staticClass:"operate-pager"},[a("table-pagination",{attrs:{currentPage:e.currentPage,pageSize:e.pageSize,total:e.total},on:{"size-change":e.changeSize,"page-change":e.changePage}})],1)])],1),e._v(" "),a("el-dialog",{staticClass:"unit-dialog",attrs:{visible:e.dialogVisible.unit,"close-on-click-modal":!1,width:"1100px",center:!0},on:{"update:visible":function(t){e.$set(e.dialogVisible,"unit",t)},open:e.dialogOpen,closed:e.dialogClosed}},[a("div",{staticClass:"dialog-title",attrs:{slot:"title"},slot:"title"},[a("span",[e._v(e._s(e.operateType))])]),e._v(" "),a("div",{staticClass:"dialog-content"},[a("div",{staticClass:"clearfix"},[a("div",{staticClass:"content-item"},[a("span",[e._v("申请单位：")]),e._v(" "),a("span",[e._v(e._s(e.baseInfoForm.unitName))])]),e._v(" "),a("div",{staticClass:"content-item"},[a("span",[e._v("单位负责人：")]),e._v(" "),a("span",[e._v(e._s(e.baseInfoForm.unitCharger))])]),e._v(" "),a("div",{staticClass:"content-item"},[a("span",[e._v("编制人数：")]),e._v(" "),a("span",[e._v(e._s(e.baseInfoForm.unitComplement)+"人")])]),e._v(" "),a("div",{staticClass:"content-item"},[a("span",[e._v("实有人数：")]),e._v(" "),a("span",[e._v(e._s(e.baseInfoForm.actualNumber)+"人")])]),e._v(" "),a("div",{staticClass:"content-item"},[a("span",[e._v("现有面积：")]),e._v(" "),a("span",[e._v(e._s(e.baseInfoForm.totalArea?e.baseInfoForm.totalArea:"暂无"))])]),e._v(" "),a("div",{staticClass:"content-item"},[a("span",[e._v("人均面积：")]),e._v(" "),a("span",[e._v(e._s(e.baseInfoForm.PerCapitaArea?e.baseInfoForm.PerCapitaArea:"暂无"))])]),e._v(" "),a("div",{staticClass:"content-item"},[a("span",[e._v("联系电话：")]),e._v(" "),a("span",[e._v(e._s(e.baseInfoForm.contactPhone))])]),e._v(" "),a("div",{staticClass:"content-item"},[a("span",[e._v("联系人：")]),e._v(" "),a("span",[e._v(e._s(e.baseInfoForm.contacts))])]),e._v(" "),a("div",{staticClass:"content-item"},[a("span",[e._v("单位性质：")]),e._v(" "),a("span",[e._v(e._s(e.baseInfoForm.unitProperty))])]),e._v(" "),a("div",{staticClass:"content-item"},[a("span",[e._v("单位地址：")]),e._v(" "),a("span",[e._v(e._s(e.baseInfoForm.unitAddress))])]),e._v(" "),a("div",{staticClass:"content-item",staticStyle:{width:"100%"}},[a("span",[e._v("申请原因：")]),e._v(" "),a("span",[e._v(e._s(e.baseInfoForm.applyReason))])]),e._v(" "),e.baseInfoForm.enclosureList.length>0?a("div",{staticClass:"content-item",staticStyle:{width:"100%"}},[a("span",[e._v("下载附件：")]),e._v(" "),a("div",{staticClass:"file-download"},[a("el-checkbox-group",{on:{change:e.handleCheckedFileChange},model:{value:e.fileDownLoadCheckedList,callback:function(t){e.fileDownLoadCheckedList=t},expression:"fileDownLoadCheckedList"}},e._l(e.baseInfoForm.enclosureList,function(t,i){return a("div",{key:i,staticClass:"file-download-item"},[a("el-checkbox",{attrs:{label:t.detail}},[e._v(e._s(t.enclosureName))])],1)})),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){e.fileDownLoad(e.downloadCheckedList)}}},[e._v("点击下载")])],1)]):e._e()]),e._v(" "),a("el-form",{ref:"Form_unit",attrs:{model:e.Form_unit,rules:e.rules_unit,inline:""}},[a("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"审查结果：","label-width":"84px",prop:"auditState"}},[a("el-radio",{attrs:{label:1,name:e.currentDialogName},on:{change:e.auditStateRadioChange},model:{value:e.Form_unit.auditState,callback:function(t){e.$set(e.Form_unit,"auditState",t)},expression:"Form_unit.auditState"}},[e._v("同意申请")]),e._v(" "),a("el-radio",{attrs:{label:2,name:e.currentDialogName},on:{change:e.auditStateRadioChange},model:{value:e.Form_unit.auditState,callback:function(t){e.$set(e.Form_unit,"auditState",t)},expression:"Form_unit.auditState"}},[e._v("不同意申请")])],1),e._v(" "),a("el-form-item",{staticClass:"common-item",staticStyle:{width:"100%"},attrs:{label:"审查意见：","label-width":"84px",prop:"comment"}},[a("el-input",{attrs:{type:"textarea",rows:4,placeholder:"请输入审批意见",width:851},model:{value:e.Form_unit.comment,callback:function(t){e.$set(e.Form_unit,"comment","string"==typeof t?t.trim():t)},expression:"Form_unit.comment"}})],1),e._v(" "),1===e.Form_unit.auditState?a("el-form-item",{staticClass:"region-item",staticStyle:{width:"100%"},attrs:{label:"区域：","label-width":"84px",prop:"regionIds"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",multiple:"",placeholder:"请选择区域"},model:{value:e.Form_unit.regionIds,callback:function(t){e.$set(e.Form_unit,"regionIds",t)},expression:"Form_unit.regionIds"}},e._l(e.regionOpts,function(e){return a("el-option",{key:e.regionId,attrs:{label:e.regionName,value:e.regionId}})}))],1):e._e(),e._v(" "),1===e.Form_unit.auditState?a("el-form-item",{staticClass:"elevators-number",attrs:{label:"电梯台数：","label-width":"84px",prop:"elevatorsNumber"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择电梯台数",size:"small"},model:{value:e.Form_unit.elevatorsNumber,callback:function(t){e.$set(e.Form_unit,"elevatorsNumber",t)},expression:"Form_unit.elevatorsNumber"}},e._l(e.elevatorsOpts,function(e){return a("el-option",{key:e.elevatorId,attrs:{label:e.elevatorName,value:e.elevatorId}})}))],1):e._e(),e._v(" "),1===e.Form_unit.auditState?a("el-form-item",{attrs:{label:"参与统筹调剂单位：","label-width":"140px",prop:"redistributionUnitId"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{filterable:"",placeholder:"请选择参与统筹调剂单位",size:"small"},model:{value:e.Form_unit.redistributionUnitId,callback:function(t){e.$set(e.Form_unit,"redistributionUnitId",t)},expression:"Form_unit.redistributionUnitId"}},e._l(e.unitOpts,function(e){return a("el-option",{key:e.unitId,attrs:{label:e.unitName,value:e.unitId}})}))],1):e._e(),e._v(" "),1===e.Form_unit.auditState?a("el-form-item",{staticClass:"house-info-table-item",staticStyle:{width:"100%"},attrs:{label:"房间信息：","label-width":"84px"}},[a("el-button",{staticClass:"house-info-add-btn",attrs:{icon:"el-icon-plus"},on:{click:function(t){return t.stopPropagation(),e.addHouseInfo(t)}}},[e._v("添加")]),e._v(" "),a("div",{staticClass:"house-table-box"},[a("table-component",{attrs:{tableData:e.Form_unit.configureRooms,tableHeight:200}},[a("el-table-column",{attrs:{label:"序号",type:"index",width:"50",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"房间数量",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{staticClass:"roomNumber-item",attrs:{placeholder:"请输入房间数量",size:"small"},on:{blur:function(a){e.roomNumberLimitInt(t.$index,!0)}},nativeOn:{keyup:function(a){e.roomNumberLimitInt(t.$index)}},model:{value:t.row.roomNumber,callback:function(a){e.$set(t.row,"roomNumber","string"==typeof a?a.trim():a)},expression:"scope.row.roomNumber"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"房间面积范围(m²)",align:"center",width:196},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{staticClass:"roomArea-item",attrs:{size:"small"},on:{blur:function(a){e.roomAreaMinLimitFloat(t.$index,!0,!0)}},nativeOn:{keyup:function(a){e.roomAreaMinLimitFloat(t.$index)}},model:{value:t.row.roomAreaMin,callback:function(a){e.$set(t.row,"roomAreaMin","string"==typeof a?a.trim():a)},expression:"scope.row.roomAreaMin"}}),e._v(" "),a("span",{staticClass:"roomArea-line"},[e._v("-")]),e._v(" "),a("el-input",{staticClass:"roomArea-item",attrs:{size:"small"},on:{blur:function(a){e.roomAreaMaxLimitFloat(t.$index,!0,!0)}},nativeOn:{keyup:function(a){e.roomAreaMaxLimitFloat(t.$index)}},model:{value:t.row.roomAreaMax,callback:function(a){e.$set(t.row,"roomAreaMax","string"==typeof a?a.trim():a)},expression:"scope.row.roomAreaMax"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center",width:80},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){e.deleteHouseInfo(t.$index)}}},[e._v("删除")])]}}])})],1)],1)],1):e._e()],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("cancel-btn",{attrs:{fontSize:14},on:{clickBtn:function(t){e.dialogVisible.unit=!1}}}),e._v(" "),a("confirm-btn",{attrs:{fontSize:14},on:{clickBtn:function(t){e.submitForm("Form_unit")}}})],1)]),e._v(" "),a("el-dialog",{staticClass:"project-dialog",attrs:{visible:e.dialogVisible.project,"close-on-click-modal":!1,width:"1100px",center:!0},on:{"update:visible":function(t){e.$set(e.dialogVisible,"project",t)},open:e.dialogOpen,closed:e.dialogClosed}},[a("div",{staticClass:"dialog-title",attrs:{slot:"title"},slot:"title"},[a("span",[e._v(e._s(e.operateType))])]),e._v(" "),a("div",{staticClass:"dialog-content"},[a("div",{directives:[{name:"show",rawName:"v-show",value:!e.isSureDistributePage,expression:"!isSureDistributePage"}],staticClass:"prev-page"},[a("div",{staticClass:"clearfix"},[a("div",{staticClass:"content-item"},[a("span",[e._v("申请单位：")]),e._v(" "),a("span",[e._v(e._s(e.baseInfoForm.unitName))])]),e._v(" "),a("div",{staticClass:"content-item"},[a("span",[e._v("单位负责人：")]),e._v(" "),a("span",[e._v(e._s(e.baseInfoForm.unitCharger))])]),e._v(" "),a("div",{staticClass:"content-item"},[a("span",[e._v("编制人数：")]),e._v(" "),a("span",[e._v(e._s(e.baseInfoForm.unitComplement))])]),e._v(" "),a("div",{staticClass:"content-item"},[a("span",[e._v("实有人数：")]),e._v(" "),a("span",[e._v(e._s(e.baseInfoForm.actualNumber))])]),e._v(" "),a("div",{staticClass:"content-item"},[a("span",[e._v("现有面积：")]),e._v(" "),a("span",[e._v(e._s(e.baseInfoForm.totalArea?e.baseInfoForm.totalArea:"暂无"))])]),e._v(" "),a("div",{staticClass:"content-item"},[a("span",[e._v("人均面积：")]),e._v(" "),a("span",[e._v(e._s(e.baseInfoForm.PerCapitaArea?e.baseInfoForm.PerCapitaArea:"暂无"))])]),e._v(" "),a("div",{staticClass:"content-item"},[a("span",[e._v("联系电话：")]),e._v(" "),a("span",[e._v(e._s(e.baseInfoForm.contactPhone))])]),e._v(" "),a("div",{staticClass:"content-item"},[a("span",[e._v("联系人：")]),e._v(" "),a("span",[e._v(e._s(e.baseInfoForm.contacts))])]),e._v(" "),a("div",{staticClass:"content-item"},[a("span",[e._v("单位性质：")]),e._v(" "),a("span",[e._v(e._s(e.baseInfoForm.unitProperty))])]),e._v(" "),a("div",{staticClass:"content-item"},[a("span",[e._v("单位地址：")]),e._v(" "),a("span",[e._v(e._s(e.baseInfoForm.unitAddress))])]),e._v(" "),a("div",{staticClass:"content-item",staticStyle:{width:"100%"}},[a("span",[e._v("申请原因：")]),e._v(" "),a("span",[e._v(e._s(e.baseInfoForm.applyReason))])]),e._v(" "),e.baseInfoForm.enclosureList.length>0?a("div",{staticClass:"content-item",staticStyle:{width:"100%"}},[a("span",[e._v("下载附件：")]),e._v(" "),a("div",{staticClass:"file-download"},[a("el-checkbox-group",{on:{change:e.handleCheckedFileChange},model:{value:e.fileDownLoadCheckedList,callback:function(t){e.fileDownLoadCheckedList=t},expression:"fileDownLoadCheckedList"}},e._l(e.baseInfoForm.enclosureList,function(t,i){return a("div",{key:i,staticClass:"file-download-item"},[a("el-checkbox",{attrs:{label:t.detail}},[e._v(e._s(t.enclosureName))])],1)})),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){e.fileDownLoad(e.downloadCheckedList)}}},[e._v("点击下载")])],1)]):e._e()]),e._v(" "),a("div",{staticClass:"clearfix",staticStyle:{"margin-top":"20px"}},[a("div",{staticClass:"content-item"},[a("span",[e._v("电梯台数：")]),e._v(" "),a("span",[e._v(e._s(e.baseInfoForm.elevatorsNumber)+"台")])]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.baseInfoForm.newUnitName,expression:"baseInfoForm.newUnitName"}],staticClass:"content-item newUnitName"},[a("span",[e._v("参与统筹调剂单位")]),e._v("：\n            "),a("span",[e._v(e._s(e.baseInfoForm.newUnitName))])]),e._v(" "),a("div",{staticClass:"content-item",staticStyle:{width:"100%"}},[a("span",[e._v("区域：")]),e._v(" "),a("span",[e._v(e._s(e.baseInfoForm.regionName))])]),e._v(" "),e.baseInfoForm.leaderAdvice?a("div",{staticClass:"content-item",staticStyle:{width:"100%"}},[a("span",{staticStyle:{color:"#ff0000"}},[e._v("审批意见：")]),e._v(" "),a("span",[e._v(e._s(e.baseInfoForm.leaderAdvice))])]):e._e()]),e._v(" "),a("el-form",{ref:"Form_project",attrs:{model:e.Form_project,rules:e.rules_project}},[a("el-form-item",{attrs:{label:"分配方案：","label-width":"84px",prop:"allocationPlan"}},[a("el-radio-group",{on:{change:e.allocationPlanChange},model:{value:e.Form_project.allocationPlan,callback:function(t){e.$set(e.Form_project,"allocationPlan",t)},expression:"Form_project.allocationPlan"}},[a("el-radio",{attrs:{label:1}},[e._v("调剂")]),e._v(" "),a("el-radio",{attrs:{label:2}},[e._v("置换")]),e._v(" "),a("el-radio",{attrs:{label:3}},[e._v("租用")]),e._v(" "),a("el-radio",{attrs:{label:4}},[e._v("建设")])],1)],1),e._v(" "),1===e.Form_project.allocationPlan?a("el-form-item",{attrs:{label:"选择方案：","label-width":"84px"}},[a("div",{staticClass:"plan-btn-box"},[a("span",{class:{active:1===e.Form_project.selectionPlan},on:{click:function(t){e.selectionPlanChange(1)}}},[e._v("智能分配")]),e._v(" "),a("span",{class:{active:2===e.Form_project.selectionPlan},on:{click:function(t){e.selectionPlanChange(2)}}},[e._v("人工分配")])])]):e._e()],1),e._v(" "),1===e.Form_project.allocationPlan?a("div",{staticClass:"distribute-box"},[1===e.Form_project.selectionPlan?a("div",{staticClass:"intelligent-distribution"},[a("el-tabs",{attrs:{type:"card"},on:{"tab-click":e.distributionTabClick},model:{value:e.distributionActiveName,callback:function(t){e.distributionActiveName=t},expression:"distributionActiveName"}},e._l(e.autoConditionList,function(t,i){return a("el-tab-pane",{key:i,attrs:{label:t.name,name:t.tableName}},[a("div",{staticClass:"distribute-room-table"},[a("el-table",{ref:t.tableName,refInFor:!0,attrs:{data:t.tableData,height:200,border:"",fit:"","header-cell-style":e.tableHeaderCellStyle,"cell-style":e.tableCellStyle},on:{select:e.handleSelectionChange,"select-all":e.handleSelectionAllChange}},[a("el-table-column",{attrs:{type:"selection",width:"50",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"房间位置",prop:"position",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"房间面积(m²)",prop:"houseUseArea",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"原使用单位",prop:"unitName",align:"center"}})],1)],1),e._v(" "),a("div",{staticClass:"distribution-table-pagination-box"},[a("div",{staticClass:"distribution-table-tips"},[e._v("\n                    您还能选择\n                    "),a("span",[e._v(e._s(e.distributeNum))]),e._v("个智能分配\n                  ")]),e._v(" "),a("div",{staticClass:"distribution-table-pagination"},[a("el-pagination",{attrs:{small:"",layout:"prev, pager, next","current-page":t.currentPage,"page-size":t.pageSize,total:t.total},on:{"current-change":e.distributeCurrentChange}})],1)])])}))],1):e._e(),e._v(" "),2===e.Form_project.selectionPlan?a("div",{staticClass:"labour-distribution"},[a("div",{staticClass:"scheme-btn-box clearfix"},[a("span",[e._v("添加方案：")]),e._v(" "),a("el-button",{staticClass:"scheme-add-btn",attrs:{icon:"el-icon-plus"},on:{click:function(t){return t.stopPropagation(),e.addScheme(t)}}},[e._v("添加")])],1),e._v(" "),a("div",{staticClass:"scheme-table-box"},[a("div",{staticClass:"scheme-table"},[a("el-table",{ref:"scheme",attrs:{data:e.schemeTableData,height:200,border:"",fit:"","header-cell-style":e.tableHeaderCellStyle,"cell-style":e.tableCellStyle}},[a("el-table-column",{attrs:{width:"50",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-checkbox",{on:{change:function(a){e.schemeHandleSelectionChange(t.row)}},model:{value:t.row.checked,callback:function(a){e.$set(t.row,"checked",a)},expression:"scope.row.checked"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"方案名称",align:"center","class-name":"plan-name-column"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{placeholder:"请输入方案名称",readonly:t.row.readonly,size:"small"},on:{blur:function(a){e.savePlanName(t.row.planName,t.row.planId,t.$index)},focus:function(a){e.planNameInputFocus(t.row.planName)}},model:{value:t.row.planName,callback:function(a){e.$set(t.row,"planName","string"==typeof a?a.trim():a)},expression:"scope.row.planName"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"300",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"scheme-operate-box"},[a("div",{staticClass:"update",on:{click:function(a){e.updateName(a,t.$index,t.row.planName)}}},[a("a",{staticClass:"el-icon-edit"},[e._v("编辑方案名称")])]),e._v(" "),a("div",{staticClass:"update",class:{"disable-btn":!t.row.planId},on:{click:function(a){e.updateScheme(t.row.planId)}}},[a("a",{staticClass:"el-icon-edit"},[e._v("编辑方案")])]),e._v(" "),a("div",{staticClass:"delete",on:{click:function(a){e.deleteScheme(t.row.planId,t.$index,t.row.planName)}}},[a("a",{staticClass:"el-icon-delete"},[e._v("删除")])])])]}}])})],1)],1),e._v(" "),a("div",{staticClass:"distribution-table-pagination-box"},[a("div",{staticClass:"distribution-table-pagination"},[a("el-pagination",{attrs:{small:"",layout:"prev, pager, next","current-page":e.schemeCurrentPage,"page-size":e.schemePageSize,total:e.schemeTotal},on:{"current-change":e.schemeCurrentChange}})],1)])])]):e._e()]):e._e()],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isSureDistributePage,expression:"isSureDistributePage"}],staticClass:"next-page"},[1===e.Form_project.selectionPlan?a("div",{staticClass:"next-page-intelligent"},[a("el-tabs",{attrs:{type:"card"},on:{"tab-click":e.sureDistributionTabClick},model:{value:e.sureDistributionActiveName,callback:function(t){e.sureDistributionActiveName=t},expression:"sureDistributionActiveName"}},e._l(e.selectDataArray,function(t,i){return a("el-tab-pane",{key:i,attrs:{label:t.name,name:t.name}},[a("table-component",{attrs:{tableData:t.tableData,tableHeight:200}},[a("el-table-column",{attrs:{label:"序号",type:"index",width:"50",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"房间位置",prop:"position",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"房间面积(m²)",prop:"houseUseArea",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"原使用单位",prop:"unitName",align:"center"}})],1),e._v(" "),a("div",{staticClass:"distribution-table-pagination-box"},[a("div",{staticClass:"distribution-table-pagination"},[a("el-pagination",{attrs:{small:"",layout:"prev, pager, next","current-page":t.currentPage,"page-size":t.pageSize,total:t.total},on:{"current-change":e.sureDistributeCurrentChange}})],1)])],1)}))],1):e._e(),e._v(" "),2===e.Form_project.selectionPlan?a("div",{staticClass:"next-page-labour"},[a("div",{staticClass:"allocation-plan"},[a("div",[e._v("分配方案：")]),e._v(" "),a("table-component",{attrs:{tableData:e.planTableData,tableHeight:200}},[a("el-table-column",{attrs:{label:"序号",type:"index",width:"50",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"房间位置",prop:"position",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"房间面积(m²)",prop:"houseUseArea",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"原使用单位",prop:"oldUnitName",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"新使用单位",prop:"newUnitName",align:"center"}})],1),e._v(" "),a("div",{staticClass:"distribution-table-pagination-box"},[a("div",{staticClass:"distribution-table-pagination"},[a("el-pagination",{attrs:{small:"",layout:"prev, pager, next","current-page":e.planCurrentPage,"page-size":e.planPageSize,total:e.planTotal},on:{"current-change":e.planeCurrentChange}})],1)])],1),e._v(" "),a("div",{staticClass:"allocation-statistics"},[a("div",[e._v("分配统计：")]),e._v(" "),a("table-component",{attrs:{tableData:e.distributeChangeList,tableHeight:200}},[a("el-table-column",{attrs:{label:"序号",type:"index",width:"50",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"单位名称",prop:"unitNames",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"房间数量",prop:"houseNumber",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"面积(m²)",prop:"useArea",align:"center"}})],1)],1)]):e._e()])]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e.isSureDistributePage&&1===e.Form_project.allocationPlan?a("prev-btn",{attrs:{fontSize:14},on:{clickBtn:e.prev}}):e._e(),e._v(" "),e.isSureDistributePage||1!==e.Form_project.allocationPlan?e._e():a("next-btn",{attrs:{fontSize:14},on:{clickBtn:e.next}}),e._v(" "),e.isSureDistributePage||1!==e.Form_project.allocationPlan?a("confirm-btn",{attrs:{fontSize:14,marginLeft:1===e.Form_project.allocationPlan?180:0},on:{clickBtn:function(t){e.submitForm("Form_project")}}}):e._e()],1)]),e._v(" "),a("el-dialog",{staticClass:"leader-dialog",attrs:{visible:e.dialogVisible.leader,"close-on-click-modal":!1,width:"1100px",center:!0},on:{"update:visible":function(t){e.$set(e.dialogVisible,"leader",t)},open:e.dialogOpen,closed:e.dialogClosed}},[a("div",{staticClass:"dialog-title",attrs:{slot:"title"},slot:"title"},[a("span",[e._v(e._s(e.operateType))])]),e._v(" "),a("div",{staticClass:"dialog-content"},[a("div",{staticClass:"clearfix"},[a("div",{staticClass:"content-item"},[a("span",[e._v("申请单位：")]),e._v(" "),a("span",[e._v(e._s(e.baseInfoForm.unitName))])]),e._v(" "),a("div",{staticClass:"content-item"},[a("span",[e._v("单位负责人：")]),e._v(" "),a("span",[e._v(e._s(e.baseInfoForm.unitCharger))])]),e._v(" "),a("div",{staticClass:"content-item"},[a("span",[e._v("编制人数：")]),e._v(" "),a("span",[e._v(e._s(e.baseInfoForm.unitComplement)+"人")])]),e._v(" "),a("div",{staticClass:"content-item"},[a("span",[e._v("实有人数：")]),e._v(" "),a("span",[e._v(e._s(e.baseInfoForm.actualNumber)+"人")])]),e._v(" "),a("div",{staticClass:"content-item"},[a("span",[e._v("现有面积：")]),e._v(" "),a("span",[e._v(e._s(e.baseInfoForm.totalArea?e.baseInfoForm.totalArea:"暂无"))])]),e._v(" "),a("div",{staticClass:"content-item"},[a("span",[e._v("人均面积：")]),e._v(" "),a("span",[e._v(e._s(e.baseInfoForm.PerCapitaArea?e.baseInfoForm.PerCapitaArea:"暂无"))])]),e._v(" "),a("div",{staticClass:"content-item"},[a("span",[e._v("联系电话：")]),e._v(" "),a("span",[e._v(e._s(e.baseInfoForm.contactPhone))])]),e._v(" "),a("div",{staticClass:"content-item"},[a("span",[e._v("联系人：")]),e._v(" "),a("span",[e._v(e._s(e.baseInfoForm.contacts))])]),e._v(" "),a("div",{staticClass:"content-item"},[a("span",[e._v("单位性质：")]),e._v(" "),a("span",[e._v(e._s(e.baseInfoForm.unitProperty))])]),e._v(" "),a("div",{staticClass:"content-item"},[a("span",[e._v("单位地址：")]),e._v(" "),a("span",[e._v(e._s(e.baseInfoForm.unitAddress))])]),e._v(" "),a("div",{staticClass:"content-item",staticStyle:{width:"100%"}},[a("span",[e._v("申请原因：")]),e._v(" "),a("span",[e._v(e._s(e.baseInfoForm.applyReason))])]),e._v(" "),e.baseInfoForm.enclosureList.length>0?a("div",{staticClass:"content-item",staticStyle:{width:"100%"}},[a("span",[e._v("下载附件：")]),e._v(" "),a("div",{staticClass:"file-download"},[a("el-checkbox-group",{on:{change:e.handleCheckedFileChange},model:{value:e.fileDownLoadCheckedList,callback:function(t){e.fileDownLoadCheckedList=t},expression:"fileDownLoadCheckedList"}},e._l(e.baseInfoForm.enclosureList,function(t,i){return a("div",{key:i,staticClass:"file-download-item"},[a("el-checkbox",{attrs:{label:t.detail}},[e._v(e._s(t.enclosureName))])],1)})),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){e.fileDownLoad(e.downloadCheckedList)}}},[e._v("点击下载")])],1)]):e._e()]),e._v(" "),a("div",{staticClass:"clearfix",staticStyle:{"margin-top":"20px"}},[a("div",{staticClass:"content-item"},[a("span",[e._v("分配方案：")]),e._v(" "),a("span",[e._v(e._s(e.baseInfoForm.allocationPlanName))])]),e._v(" "),1===e.baseInfoForm.allocationPlan?a("div",{staticClass:"content-item"},[a("span",[e._v("选择方案：")]),e._v(" "),a("span",[e._v(e._s(e.baseInfoForm.selectionPlanName))])]):e._e(),e._v(" "),2===e.baseInfoForm.selectionPlan&&1===e.baseInfoForm.allocationPlan?a("div",{staticClass:"content-item"},[a("span",[e._v("方案名称：")]),e._v(" "),a("span",[e._v(e._s(e.baseInfoForm.planName))])]):e._e()]),e._v(" "),1===e.baseInfoForm.allocationPlan?a("div",{staticClass:"room-distribute-table"},[a("div",{staticClass:"allocation-plan"},[a("div",[e._v("分配方案：")]),e._v(" "),a("table-component",{attrs:{tableData:e.distributeTableData,tableHeight:200}},[a("el-table-column",{attrs:{label:"序号",type:"index",width:"50",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"房间位置",prop:"position",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"房间面积(m²)",prop:"houseUseArea",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"原使用单位",prop:"oldUnitName",align:"center"}}),e._v(" "),2===e.baseInfoForm.selectionPlan?a("el-table-column",{attrs:{label:"新使用单位",prop:"newUnitName",align:"center"}}):e._e()],1),e._v(" "),a("div",{staticClass:"distribution-table-pagination-box"},[a("div",{staticClass:"distribution-table-pagination"},[a("el-pagination",{attrs:{small:"",layout:"prev, pager, next","current-page":e.distributeCurrentPage,"page-size":e.distributePageSize,total:e.distributeTotal},on:{"current-change":e.leaderDistributeCurrentChange}})],1)])],1),e._v(" "),2===e.baseInfoForm.selectionPlan?a("div",{staticClass:"allocation-statistics"},[a("div",[e._v("分配统计：")]),e._v(" "),a("table-component",{attrs:{tableData:e.distributeChangeList,tableHeight:200}},[a("el-table-column",{attrs:{label:"序号",type:"index",width:"50",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"单位名称",prop:"unitNames",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"房间数量",prop:"houseNumber",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"面积(m²)",prop:"useArea",align:"center"}})],1)],1):e._e()]):e._e(),e._v(" "),a("el-form",{ref:"Form_leader",attrs:{model:e.Form_leader,rules:e.rules_leader,inline:""}},[a("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"审批结果：","label-width":"84px",prop:"auditState"}},[a("el-radio",{attrs:{label:1,name:e.currentDialogName},on:{change:e.auditStateRadioChange},model:{value:e.Form_leader.auditState,callback:function(t){e.$set(e.Form_leader,"auditState",t)},expression:"Form_leader.auditState"}},[e._v("同意")]),e._v(" "),a("el-radio",{attrs:{label:2,name:e.currentDialogName},on:{change:e.auditStateRadioChange},model:{value:e.Form_leader.auditState,callback:function(t){e.$set(e.Form_leader,"auditState",t)},expression:"Form_leader.auditState"}},[e._v("不同意")])],1),e._v(" "),a("el-form-item",{staticClass:"common-item",staticStyle:{width:"100%"},attrs:{label:"审批意见：","label-width":"84px",prop:"comment"}},[a("el-input",{attrs:{type:"textarea",rows:4,placeholder:"请输入审批意见",width:851},model:{value:e.Form_leader.comment,callback:function(t){e.$set(e.Form_leader,"comment","string"==typeof t?t.trim():t)},expression:"Form_leader.comment"}})],1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("cancel-btn",{attrs:{fontSize:14},on:{clickBtn:function(t){e.dialogVisible.leader=!1}}}),e._v(" "),a("confirm-btn",{attrs:{fontSize:14},on:{clickBtn:function(t){e.submitForm("Form_leader")}}})],1)]),e._v(" "),a("el-dialog",{staticClass:"addInfo-dialog",attrs:{visible:e.dialogVisible.addInfo,"close-on-click-modal":!1,width:"1100px",center:!0},on:{"update:visible":function(t){e.$set(e.dialogVisible,"addInfo",t)},open:e.dialogOpen,closed:e.dialogClosed}},[a("div",{staticClass:"dialog-title",attrs:{slot:"title"},slot:"title"},[a("span",[e._v(e._s(e.operateType))])]),e._v(" "),a("div",{staticClass:"dialog-content"},[a("div",{staticClass:"step-item"},[a("div",{staticClass:"step-item-title"},[a("span",[e._v("添加基础信息")])]),e._v(" "),a("div",{staticClass:"step-item-content"},[2===e.activeAuditState?a("el-form",{ref:"Form_replacement",attrs:{model:e.Form_replacement,rules:e.rules_replacement,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"类型"}},[a("div",[e._v(e._s(e.currentAddInfoType))])]),e._v(" "),a("el-form-item",{attrs:{label:"模式"}},[a("div",[a("el-radio",{attrs:{label:1},model:{value:e.replaceMode,callback:function(t){e.replaceMode=t},expression:"replaceMode"}},[e._v("补钱")]),e._v(" "),a("el-radio",{attrs:{label:2},model:{value:e.replaceMode,callback:function(t){e.replaceMode=t},expression:"replaceMode"}},[e._v("收益")])],1)]),e._v(" "),1===e.replaceMode?a("el-form-item",{attrs:{label:"补钱(元)",prop:"makeMoney"}},[a("el-input",{attrs:{placeholder:"请输入补钱"},on:{blur:function(t){e.baseLimitFloat("makeMoney",!0)}},nativeOn:{keyup:function(t){e.baseLimitFloat("makeMoney")}},model:{value:e.Form_replacement.makeMoney,callback:function(t){e.$set(e.Form_replacement,"makeMoney","string"==typeof t?t.trim():t)},expression:"Form_replacement.makeMoney"}})],1):e._e(),e._v(" "),2===e.replaceMode?a("el-form-item",{attrs:{label:"收益(元)",prop:"profit"}},[a("el-input",{attrs:{placeholder:"请输入收益"},on:{blur:function(t){e.baseLimitFloat("profit",!0)}},nativeOn:{keyup:function(t){e.baseLimitFloat("profit")}},model:{value:e.Form_replacement.profit,callback:function(t){e.$set(e.Form_replacement,"profit","string"==typeof t?t.trim():t)},expression:"Form_replacement.profit"}})],1):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"面积(㎡)",prop:"area"}},[a("el-input",{attrs:{placeholder:"请输入面积"},on:{blur:function(t){e.baseLimitFloat("area",!0)}},nativeOn:{keyup:function(t){e.baseLimitFloat("area")}},model:{value:e.Form_replacement.area,callback:function(t){e.$set(e.Form_replacement,"area","string"==typeof t?t.trim():t)},expression:"Form_replacement.area"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"上传文件：","label-width":"100px",prop:"improvingDataList"}},[a("div",{staticClass:"improving-file-upload"},[a("el-upload",{ref:"improvingUpload",attrs:{headers:e.postHeaders,action:e.uploadImprovingUrl,"file-list":e.fileListImproving,"auto-upload":!1,accept:e.acceptType,limit:e.limitNum,"on-success":e.improvingHandleSuccess,"on-remove":e.improvingHandleRemove,"on-change":e.improvingHandleChange,"on-error":e.handleError,"on-exceed":e.handleExceed,"before-upload":e.beforeAvatarUpload,multiple:""}},[a("i",{staticClass:"iconfont upload-icon"},[e._v("")]),e._v(" "),a("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("点击选择文件")])],1)],1)])],1):e._e(),e._v(" "),3===e.activeAuditState?a("el-form",{ref:"Form_rent",attrs:{model:e.Form_rent,rules:e.rules_rent,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"类型"}},[a("div",[e._v(e._s(e.currentAddInfoType))])]),e._v(" "),a("el-form-item",{attrs:{label:"付款周期",prop:"rentalMode"}},[a("el-select",{attrs:{placeholder:"请选择付款周期",size:"small"},model:{value:e.Form_rent.rentalMode,callback:function(t){e.$set(e.Form_rent,"rentalMode",t)},expression:"Form_rent.rentalMode"}},e._l(e.rentalModeOpts,function(e,t){return a("el-option",{key:t,attrs:{label:e,value:e}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"租金(元)",prop:"rent"}},[a("el-input",{attrs:{placeholder:"请输入租金"},on:{blur:function(t){e.baseLimitFloat("rent",!0)}},nativeOn:{keyup:function(t){e.baseLimitFloat("rent")}},model:{value:e.Form_rent.rent,callback:function(t){e.$set(e.Form_rent,"rent","string"==typeof t?t.trim():t)},expression:"Form_rent.rent"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"期限(年)",prop:"term"}},[a("el-input",{attrs:{placeholder:"请输入期限"},model:{value:e.Form_rent.term,callback:function(t){e.$set(e.Form_rent,"term","string"==typeof t?t.trim():t)},expression:"Form_rent.term"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"面积(㎡)",prop:"area"}},[a("el-input",{attrs:{placeholder:"请输入面积"},on:{blur:function(t){e.baseLimitFloat("area",!0)}},nativeOn:{keyup:function(t){e.baseLimitFloat("area")}},model:{value:e.Form_rent.area,callback:function(t){e.$set(e.Form_rent,"area","string"==typeof t?t.trim():t)},expression:"Form_rent.area"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"上传文件：","label-width":"100px",prop:"improvingDataList"}},[a("div",{staticClass:"improving-file-upload"},[a("el-upload",{ref:"improvingUpload",attrs:{headers:e.postHeaders,action:e.uploadImprovingUrl,"file-list":e.fileListImproving,"auto-upload":!1,accept:e.acceptType,limit:e.limitNum,"on-success":e.improvingHandleSuccess,"on-remove":e.improvingHandleRemove,"on-change":e.improvingHandleChange,"on-error":e.handleError,"on-exceed":e.handleExceed,"before-upload":e.beforeAvatarUpload,multiple:""}},[a("i",{staticClass:"iconfont upload-icon"},[e._v("")]),e._v(" "),a("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("点击选择文件")])],1)],1)])],1):e._e(),e._v(" "),4===e.activeAuditState?a("el-form",{ref:"Form_construction",attrs:{model:e.Form_construction,rules:e.rules_construction,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"类型"}},[a("div",[e._v(e._s(e.currentAddInfoType))])]),e._v(" "),a("el-form-item",{attrs:{label:"财政支出",prop:"expenditure"}},[a("el-input",{attrs:{placeholder:"请输入财政支出"},on:{blur:function(t){e.baseLimitFloat("expenditure",!0)}},nativeOn:{keyup:function(t){e.baseLimitFloat("expenditure")}},model:{value:e.Form_construction.expenditure,callback:function(t){e.$set(e.Form_construction,"expenditure","string"==typeof t?t.trim():t)},expression:"Form_construction.expenditure"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"面积(㎡)",prop:"area"}},[a("el-input",{attrs:{placeholder:"请输入面积"},on:{blur:function(t){e.baseLimitFloat("area",!0)}},nativeOn:{keyup:function(t){e.baseLimitFloat("area")}},model:{value:e.Form_construction.area,callback:function(t){e.$set(e.Form_construction,"area","string"==typeof t?t.trim():t)},expression:"Form_construction.area"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"项目名称",prop:"projectName"}},[a("el-input",{attrs:{placeholder:"请输入项目名称"},model:{value:e.Form_construction.projectName,callback:function(t){e.$set(e.Form_construction,"projectName","string"==typeof t?t.trim():t)},expression:"Form_construction.projectName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"上传文件：","label-width":"100px",prop:"improvingDataList"}},[a("div",{staticClass:"improving-file-upload"},[a("el-upload",{ref:"improvingUpload",attrs:{headers:e.postHeaders,action:e.uploadImprovingUrl,"file-list":e.fileListImproving,"auto-upload":!1,accept:e.acceptType,limit:e.limitNum,"on-success":e.improvingHandleSuccess,"on-remove":e.improvingHandleRemove,"on-change":e.improvingHandleChange,"on-error":e.handleError,"on-exceed":e.handleExceed,"before-upload":e.beforeAvatarUpload,multiple:""}},[a("i",{staticClass:"iconfont upload-icon"},[e._v("")]),e._v(" "),a("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("点击选择文件")])],1)],1)])],1):e._e()],1)]),e._v(" "),a("div",{staticClass:"step-item"},[a("div",{staticClass:"step-item-title"},[a("span",[e._v("添加院落信息")])]),e._v(" "),a("div",{staticClass:"step-item-content"},[a("el-form",{ref:"Form_yard",attrs:{inline:!0,model:e.Form_yard,rules:e.rules_yard}},[a("el-form-item",{attrs:{label:"院落名称","label-width":"120px",prop:"yard.yardName"}},[a("el-input",{attrs:{size:"small",placeholder:"请输入院落名称"},model:{value:e.Form_yard.yard.yardName,callback:function(t){e.$set(e.Form_yard.yard,"yardName","string"==typeof t?t.trim():t)},expression:"Form_yard.yard.yardName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"行政区划","label-width":"120px",prop:"yard.regionId"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{filterable:"",placeholder:"请选择",size:"small","popper-append-to-body":!1},model:{value:e.Form_yard.yard.regionId,callback:function(t){e.$set(e.Form_yard.yard,"regionId",t)},expression:"Form_yard.yard.regionId"}},e._l(e.regionOpts,function(e){return a("el-option",{key:e.regionId,attrs:{label:e.regionName,value:e.regionId}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"院落地址","label-width":"120px",prop:"yard.yardPosition"}},[a("el-input",{attrs:{size:"small",placeholder:"请输入院落地址"},model:{value:e.Form_yard.yard.yardPosition,callback:function(t){e.$set(e.Form_yard.yard,"yardPosition","string"==typeof t?t.trim():t)},expression:"Form_yard.yard.yardPosition"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"经度(°)","label-width":"120px",prop:"yard.yardLongitude"}},[a("el-input",{attrs:{size:"small",placeholder:"请输入经度"},on:{blur:function(t){e.yardMapBindCoord("yardLongitude","yard",!0)}},nativeOn:{keyup:function(t){e.yardLimitFloat("yardLongitude","yard")}},model:{value:e.Form_yard.yard.yardLongitude,callback:function(t){e.$set(e.Form_yard.yard,"yardLongitude","string"==typeof t?t.trim():t)},expression:"Form_yard.yard.yardLongitude"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"纬度(°)","label-width":"120px",prop:"yard.yardLatitude"}},[a("el-input",{attrs:{size:"small",placeholder:"请输入纬度"},on:{blur:function(t){e.yardMapBindCoord("yardLatitude","yard",!0)}},nativeOn:{keyup:function(t){e.yardLimitFloat("yardLatitude","yard")}},model:{value:e.Form_yard.yard.yardLatitude,callback:function(t){e.$set(e.Form_yard.yard,"yardLatitude","string"==typeof t?t.trim():t)},expression:"Form_yard.yard.yardLatitude"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"类型","label-width":"120px",prop:"yard.type"}},[a("el-radio",{attrs:{label:1},model:{value:e.Form_yard.yard.type,callback:function(t){e.$set(e.Form_yard.yard,"type",t)},expression:"Form_yard.yard.type"}},[e._v("院落")]),e._v(" "),a("el-radio",{attrs:{label:2},model:{value:e.Form_yard.yard.type,callback:function(t){e.$set(e.Form_yard.yard,"type",t)},expression:"Form_yard.yard.type"}},[e._v("土地")])],1),e._v(" "),1===e.Form_yard.yard.type?a("el-form-item",{staticClass:"estate-add-btn-box",attrs:{label:"添加物业","label-width":"120px",prop:"yardAndestateVoList"}},[a("el-button",{staticClass:"estate-add-btn",attrs:{icon:"el-icon-plus"},on:{click:function(t){return t.stopPropagation(),e.addEstate(t)}}},[e._v("添加")])],1):e._e()],1),e._v(" "),1===e.Form_yard.yard.type?a("div",{staticClass:"estate-table-box"},[e.estateNameFlag&&e.serviceContentFlag&&e.startTimeFlag&&e.startTimeLimitFlag&&e.endTimeFlag&&e.endTimeLimitFlag&&e.contractAmountFlag?e._e():a("div",{staticClass:"tips-box"},[e._v("提示："+e._s(e.submitTipsArray.join(",")))]),e._v(" "),a("table-component",{attrs:{tableData:e.Form_yard.yardAndestateVoList,tableHeight:200,tableCellPadding:"0"}},[a("el-table-column",{attrs:{label:"序号",type:"index",width:"50",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"物业名称",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择物业名称",size:"small"},model:{value:t.row.estateId,callback:function(a){e.$set(t.row,"estateId",a)},expression:"scope.row.estateId"}},e._l(e.estateNameOpts,function(e){return a("el-option",{key:e.estateId,attrs:{label:e.estateName,value:e.estateId}})}))]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"服务内容",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择服务内容",size:"small",multiple:""},model:{value:t.row.serviceContentList,callback:function(a){e.$set(t.row,"serviceContentList",a)},expression:"scope.row.serviceContentList"}},e._l(e.serviceContentOpts,function(e){return a("el-option",{key:e.id,attrs:{label:e.text,value:e.id}})}))]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"开始使用时间",align:"center",width:150},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"开始使用时间","value-format":"yyyy-MM-dd HH:mm:ss",size:"small"},model:{value:t.row.startTime,callback:function(a){e.$set(t.row,"startTime",a)},expression:"scope.row.startTime"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"结束使用时间",align:"center",width:150},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"结束使用时间","value-format":"yyyy-MM-dd 23:59:59",size:"small"},model:{value:t.row.endTime,callback:function(a){e.$set(t.row,"endTime",a)},expression:"scope.row.endTime"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"使用金额",align:"center",width:130},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入使用金额",size:"small"},on:{blur:function(a){e.contractAmountLimitFloat(t.$index,!0)}},nativeOn:{keyup:function(a){e.contractAmountLimitFloat(t.$index)}},model:{value:t.row.contractAmount,callback:function(a){e.$set(t.row,"contractAmount","string"==typeof a?a.trim():a)},expression:"scope.row.contractAmount"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center",width:65},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1)],1):e._e(),e._v(" "),a("div",{staticClass:"map-tips"},[e._v("提示：可手动输入经纬度,也可以点击下方地图自动生成经纬度。")]),e._v(" "),a("div",{staticClass:"my-map"},[a("yard-map",{attrs:{labelContent:"所选位置",position:e.position},on:{mapClick:e.setPostion}})],1)],1)]),e._v(" "),a("div",{staticClass:"step-item"},[a("div",{staticClass:"step-item-title"},[a("span",[e._v("添加楼座信息")]),e._v(" "),a("div",{staticClass:"btn-box"},[a("span",{on:{click:e.deleteBuild}},[a("i",{staticClass:"iconfont"},[e._v("")]),e._v(" 重置\n            ")]),e._v(" "),a("span",{on:{click:function(t){e.addBuild(!1)}}},[a("i",{staticClass:"el-icon-circle-plus-outline"}),e._v(" 新增\n            ")]),e._v(" "),a("el-popover",{attrs:{"popper-class":"more-info",placement:"bottom-end",width:"300",trigger:"click","visible-arrow":!1},model:{value:e.popoverRepairInfo,callback:function(t){e.popoverRepairInfo=t},expression:"popoverRepairInfo"}},[a("ul",{staticClass:"repair-info-more"},e._l(e.localSaveBuildList,function(t,i){return a("li",{key:i,class:{"info-active":e.activeInfo===i},on:{click:function(t){e.showInfoDetail(i)}}},[e._v(e._s(t.buildName))])})),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.localSaveBuildList.length>0,expression:"localSaveBuildList.length > 0"}],staticClass:"more-btn",attrs:{slot:"reference"},slot:"reference"},[e._v("\n                更多\n                "),a("i",{staticClass:"el-icon-arrow-down"})])])],1)]),e._v(" "),a("div",{staticClass:"step-item-content"},[a("el-form",{ref:"Form_build",staticClass:"build-info-Form",attrs:{inline:!0,model:e.Form_build,rules:e.rules_build}},[a("el-form-item",{attrs:{label:"院落名称","label-width":"130px",prop:"yardId"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{filterable:"",placeholder:"请选择",size:"small","popper-append-to-body":!1},on:{change:e.selectYardHandle},model:{value:e.Form_build.yardId,callback:function(t){e.$set(e.Form_build,"yardId",t)},expression:"Form_build.yardId"}},e._l(e.yardOptionsModal,function(e){return a("el-option",{key:e.yardId,attrs:{label:e.yardName,value:e.yardId}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"楼座名称","label-width":"130px",prop:"buildName"}},[a("el-input",{attrs:{size:"small",placeholder:"请输入楼座名称"},model:{value:e.Form_build.buildName,callback:function(t){e.$set(e.Form_build,"buildName","string"==typeof t?t.trim():t)},expression:"Form_build.buildName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"建筑面积(m²)","label-width":"130px",prop:"buildArea"}},[a("el-input",{attrs:{size:"small",placeholder:"请输入建筑面积"},on:{blur:function(t){e.buildLimitFloat("buildArea",!0)}},nativeOn:{keyup:function(t){e.buildLimitFloat("buildArea")}},model:{value:e.Form_build.buildArea,callback:function(t){e.$set(e.Form_build,"buildArea","string"==typeof t?t.trim():t)},expression:"Form_build.buildArea"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"建成时间","label-width":"130px",prop:"buildDate"}},[a("el-date-picker",{staticStyle:{width:"200px"},attrs:{type:"date",placeholder:"选择日期",size:"small","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.Form_build.buildDate,callback:function(t){e.$set(e.Form_build,"buildDate",t)},expression:"Form_build.buildDate"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"施工单位","label-width":"130px",prop:"builder"}},[a("el-input",{attrs:{size:"small",placeholder:"请输入施工单位"},model:{value:e.Form_build.builder,callback:function(t){e.$set(e.Form_build,"builder","string"==typeof t?t.trim():t)},expression:"Form_build.builder"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"地上楼层","label-width":"130px",prop:"overgroundFloor"}},[a("el-input",{attrs:{size:"small",placeholder:"请输入地上楼层"},on:{blur:function(t){e.buildLimitInt("overgroundFloor")}},nativeOn:{keyup:function(t){e.buildLimitInt("overgroundFloor")}},model:{value:e.Form_build.overgroundFloor,callback:function(t){e.$set(e.Form_build,"overgroundFloor","string"==typeof t?t.trim():t)},expression:"Form_build.overgroundFloor"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"地下楼层","label-width":"130px",prop:"undergroundFloor"}},[a("el-input",{attrs:{size:"small",placeholder:"请输入地下楼层"},on:{blur:function(t){e.buildLimitInt("undergroundFloor")}},nativeOn:{keyup:function(t){e.buildLimitInt("undergroundFloor")}},model:{value:e.Form_build.undergroundFloor,callback:function(t){e.$set(e.Form_build,"undergroundFloor","string"==typeof t?t.trim():t)},expression:"Form_build.undergroundFloor"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"取得方式","label-width":"130px",prop:"obtainWay"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择取得方式",size:"small"},model:{value:e.Form_build.obtainWay,callback:function(t){e.$set(e.Form_build,"obtainWay",t)},expression:"Form_build.obtainWay"}},e._l(e.obtainWayOpts,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.value}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"房产证号","label-width":"130px",prop:"housePropertyNumber"}},[a("el-input",{attrs:{size:"small",placeholder:"请输入房产证号"},model:{value:e.Form_build.housePropertyNumber,callback:function(t){e.$set(e.Form_build,"housePropertyNumber","string"==typeof t?t.trim():t)},expression:"Form_build.housePropertyNumber"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"土地证号","label-width":"130px",prop:"buildCertificate"}},[a("el-input",{attrs:{size:"small",placeholder:"请输入土地证号"},model:{value:e.Form_build.buildCertificate,callback:function(t){e.$set(e.Form_build,"buildCertificate","string"==typeof t?t.trim():t)},expression:"Form_build.buildCertificate"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"占地面积(m²)","label-width":"130px",prop:"coveredArea"}},[a("el-input",{attrs:{size:"small",placeholder:"请输入占地面积"},on:{blur:function(t){e.buildLimitFloat("coveredArea",!0)}},nativeOn:{keyup:function(t){e.buildLimitFloat("coveredArea")}},model:{value:e.Form_build.coveredArea,callback:function(t){e.$set(e.Form_build,"coveredArea","string"==typeof t?t.trim():t)},expression:"Form_build.coveredArea"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"完损等级","label-width":"130px",prop:"lossGrade"}},[a("el-input",{attrs:{size:"small",placeholder:"请输入完损等级"},model:{value:e.Form_build.lossGrade,callback:function(t){e.$set(e.Form_build,"lossGrade","string"==typeof t?t.trim():t)},expression:"Form_build.lossGrade"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"结构类型","label-width":"130px",prop:"structureType"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{filterable:"",placeholder:"请选择结构类型",size:"small"},model:{value:e.Form_build.structureType,callback:function(t){e.$set(e.Form_build,"structureType",t)},expression:"Form_build.structureType"}},e._l(e.structureType,function(e,t){return a("el-option",{key:t,attrs:{label:e,value:e}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"权证编号","label-width":"130px",prop:"warrantNum"}},[a("el-input",{attrs:{size:"small",placeholder:"请输入权证编号"},model:{value:e.Form_build.warrantNum,callback:function(t){e.$set(e.Form_build,"warrantNum","string"==typeof t?t.trim():t)},expression:"Form_build.warrantNum"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"所有权人","label-width":"130px",prop:"warrantPerson"}},[a("el-input",{attrs:{size:"small",placeholder:"请输入所有权人"},model:{value:e.Form_build.warrantPerson,callback:function(t){e.$set(e.Form_build,"warrantPerson","string"==typeof t?t.trim():t)},expression:"Form_build.warrantPerson"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"权属说明","label-width":"130px",prop:"warrantRemark"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{filterable:"",placeholder:"请选择权属说明",size:"small"},model:{value:e.Form_build.warrantRemark,callback:function(t){e.$set(e.Form_build,"warrantRemark",t)},expression:"Form_build.warrantRemark"}},e._l(e.warrantRemarkOpt,function(e,t){return a("el-option",{key:t,attrs:{label:e,value:e}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"资产原值(万)","label-width":"130px",prop:"assetsValue"}},[a("el-input",{attrs:{size:"small",placeholder:"请输入资产原值(万)"},on:{blur:function(t){e.buildLimitFloat("assetsValue",!0)}},nativeOn:{keyup:function(t){e.buildLimitFloat("assetsValue")}},model:{value:e.Form_build.assetsValue,callback:function(t){e.$set(e.Form_build,"assetsValue","string"==typeof t?t.trim():t)},expression:"Form_build.assetsValue"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"人防面积(m²)","label-width":"130px",prop:"civilDefenceArea"}},[a("el-input",{attrs:{size:"small",placeholder:"请输入人防面积"},on:{blur:function(t){e.buildLimitFloat("civilDefenceArea",!0)}},nativeOn:{keyup:function(t){e.buildLimitFloat("civilDefenceArea")}},model:{value:e.Form_build.civilDefenceArea,callback:function(t){e.$set(e.Form_build,"civilDefenceArea","string"==typeof t?t.trim():t)},expression:"Form_build.civilDefenceArea"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"产权所属单位","label-width":"130px",prop:"propertyUnitId"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{filterable:"",placeholder:"请选择",size:"small"},model:{value:e.Form_build.propertyUnitId,callback:function(t){e.$set(e.Form_build,"propertyUnitId",t)},expression:"Form_build.propertyUnitId"}},e._l(e.unitOptions,function(e){return a("el-option",{key:e.unitId,attrs:{label:e.unitName,value:e.unitId}})}))],1),e._v(" "),a("el-form-item",{staticClass:"form-item-radio",attrs:{label:"电梯数量","label-width":"130px",prop:"elevatorNum"}},[a("el-input",{attrs:{size:"small",placeholder:"请输入电梯数量"},nativeOn:{keyup:function(t){e.buildLimitInt("elevatorNum")}},model:{value:e.Form_build.elevatorNum,callback:function(t){e.$set(e.Form_build,"elevatorNum","string"==typeof t?t.trim():t)},expression:"Form_build.elevatorNum"}})],1),e._v(" "),a("el-form-item",{staticClass:"form-item-radio",attrs:{label:"是否租赁","label-width":"130px",prop:"isRent"}},[a("el-radio",{attrs:{label:1},on:{change:e.rentStatusChange},model:{value:e.Form_build.outRent.isRent,callback:function(t){e.$set(e.Form_build.outRent,"isRent",t)},expression:"Form_build.outRent.isRent"}},[e._v("租赁")]),e._v(" "),a("el-radio",{attrs:{label:0},on:{change:e.rentStatusChange},model:{value:e.Form_build.outRent.isRent,callback:function(t){e.$set(e.Form_build.outRent,"isRent",t)},expression:"Form_build.outRent.isRent"}},[e._v("不租赁")])],1),e._v(" "),1===e.Form_build.outRent.isRent?a("el-form-item",{attrs:{label:"租用单位","label-width":"130px",prop:"outRent.rentUnit"}},["detail"!==e.operateType?a("el-select",{staticStyle:{width:"200px"},attrs:{filterable:"",placeholder:"请选择租用单位",size:"small"},model:{value:e.Form_build.outRent.rentUnit,callback:function(t){e.$set(e.Form_build.outRent,"rentUnit",t)},expression:"Form_build.outRent.rentUnit"}},e._l(e.unitAuthorityOptions,function(e){return a("el-option",{key:e.unitId,attrs:{label:e.unitName,value:e.unitId}})})):e._e()],1):e._e(),e._v(" "),1===e.Form_build.outRent.isRent?a("el-form-item",{attrs:{label:"租赁开始时间","label-width":"130px",prop:"startTime"}},[a("el-date-picker",{staticStyle:{width:"200px"},attrs:{type:"date",placeholder:"选择租赁开始时间",size:"small","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.Form_build.outRent.startTime,callback:function(t){e.$set(e.Form_build.outRent,"startTime",t)},expression:"Form_build.outRent.startTime"}})],1):e._e(),e._v(" "),1===e.Form_build.outRent.isRent?a("el-form-item",{attrs:{label:"租赁截止时间","label-width":"130px",prop:"endTime"}},[a("el-date-picker",{staticStyle:{width:"200px"},attrs:{type:"date",placeholder:"选择租赁截止时间",size:"small","value-format":"yyyy-MM-dd 23:59:59"},model:{value:e.Form_build.outRent.endTime,callback:function(t){e.$set(e.Form_build.outRent,"endTime",t)},expression:"Form_build.outRent.endTime"}})],1):e._e(),e._v(" "),1===e.Form_build.outRent.isRent?a("el-form-item",{attrs:{label:"租金标准(元)","label-width":"130px",prop:"outRent.rentMoney"}},[a("el-input",{attrs:{size:"small",placeholder:"请输入租金标准"},on:{blur:function(t){e.buildLimitFloat("rentMoney",!0,"outRent")}},nativeOn:{keyup:function(t){e.buildLimitFloat("rentMoney",null,"outRent")}},model:{value:e.Form_build.outRent.rentMoney,callback:function(t){e.$set(e.Form_build.outRent,"rentMoney","string"==typeof t?t.trim():t)},expression:"Form_build.outRent.rentMoney"}})],1):e._e(),e._v(" "),1===e.Form_build.outRent.isRent?a("el-form-item",{attrs:{label:"财政备案","label-width":"130px",prop:"outRent.financeRemark"}},[a("el-input",{attrs:{size:"small",placeholder:"请输入财政备案"},model:{value:e.Form_build.outRent.financeRemark,callback:function(t){e.$set(e.Form_build.outRent,"financeRemark","string"==typeof t?t.trim():t)},expression:"Form_build.outRent.financeRemark"}})],1):e._e(),e._v(" "),a("el-form-item",{staticStyle:{display:"block"},attrs:{label:"楼座备注","label-width":"130px",prop:"buildRemark"}},[a("el-input",{staticStyle:{width:"888px"},attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"请输入楼座备注"},model:{value:e.Form_build.buildRemark,callback:function(t){e.$set(e.Form_build,"buildRemark","string"==typeof t?t.trim():t)},expression:"Form_build.buildRemark"}})],1),e._v(" "),a("el-form-item",{staticStyle:{display:"block"},attrs:{label:"上传图片","label-width":"130px"}},[a("div",{staticClass:"upload_box_img"},[a("el-upload",{ref:"uploadImg",attrs:{headers:e.postHeaders,action:e.uploadBuildUrl,"list-type":"picture-card","file-list":e.fileListImg,"on-remove":e.handleImgRemove,"auto-upload":!1,"on-success":e.handleImgSuccess,"on-change":e.handleImgChange,"on-error":e.handleError,accept:e.acceptImgType,limit:e.limitImgNum,"on-exceed":e.handleImgExceed,"before-upload":e.beforeAvatarUpload,multiple:""}},[a("i",{staticClass:"el-icon-plus"})])],1)]),e._v(" "),a("el-form-item",{staticStyle:{display:"block"},attrs:{label:"上传附件","label-width":"130px"}},[a("div",{staticClass:"upload_box_file"},[a("el-upload",{ref:"upload",attrs:{headers:e.postHeaders,action:e.uploadBuildUrl,"file-list":e.fileList,"on-remove":e.handleRemove,"auto-upload":!1,"on-success":e.handleSuccess,"on-change":e.handleChange,"on-error":e.handleError,accept:e.acceptType,limit:e.limitNum,"on-exceed":e.handleExceed,"before-upload":e.beforeAvatarUpload,multiple:""}},[a("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("点击上传")])],1)],1)]),e._v(" "),a("el-form-item",{attrs:{label:"经度(°)","label-width":"130px",prop:"buildLongitude"}},[a("el-input",{attrs:{size:"small",placeholder:"请输入经度"},on:{blur:function(t){e.buildMapBindCoord("buildLongitude")}},nativeOn:{keyup:function(t){e.buildLimitFloat("buildLongitude")}},model:{value:e.Form_build.buildLongitude,callback:function(t){e.$set(e.Form_build,"buildLongitude","string"==typeof t?t.trim():t)},expression:"Form_build.buildLongitude"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"纬度(°)","label-width":"130px",prop:"buildLatitude"}},[a("el-input",{attrs:{size:"small",placeholder:"请输入纬度"},on:{blur:function(t){e.buildMapBindCoord("buildLatitude")}},nativeOn:{keyup:function(t){e.buildLimitFloat("buildLatitude")}},model:{value:e.Form_build.buildLatitude,callback:function(t){e.$set(e.Form_build,"buildLatitude","string"==typeof t?t.trim():t)},expression:"Form_build.buildLatitude"}})],1)],1),e._v(" "),a("div",{staticClass:"my-map"},[a("div",{staticClass:"map-tips"},[e._v("提示：可手动输入经纬度,也可以点击下方地图自动生成经纬度。")]),e._v(" "),e.showMap?a("my-map",{ref:"map",attrs:{labelContent:"所选位置",position:e.position},on:{mapClick:e.setPostion}}):e._e()],1)],1)])]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("prev-btn",{directives:[{name:"show",rawName:"v-show",value:1===e.addInfoProcess||2===e.addInfoProcess,expression:"addInfoProcess === 1 || addInfoProcess === 2"}],attrs:{fontSize:14,marginLeft:0},on:{clickBtn:e.prevStep}}),e._v(" "),a("next-btn",{directives:[{name:"show",rawName:"v-show",value:0===e.addInfoProcess,expression:"addInfoProcess === 0"}],attrs:{fontSize:14,marginLeft:0},on:{clickBtn:e.nextStep}}),e._v(" "),a("next-btn",{directives:[{name:"show",rawName:"v-show",value:1===e.addInfoProcess,expression:"addInfoProcess === 1"}],attrs:{fontSize:14,marginLeft:100},on:{clickBtn:e.nextStep}}),e._v(" "),a("confirm-btn",{directives:[{name:"show",rawName:"v-show",value:1===e.addInfoProcess,expression:"addInfoProcess === 1"}],attrs:{fontSize:14,marginLeft:100,text:"跳过"},on:{clickBtn:e.jumpToNext}}),e._v(" "),a("confirm-btn",{directives:[{name:"show",rawName:"v-show",value:2===e.addInfoProcess,expression:"addInfoProcess === 2"}],attrs:{fontSize:14,marginLeft:100,text:"保存"},on:{clickBtn:function(t){e.addBuild(!0)}}})],1)])],1)},staticRenderFns:[]};var o=function(e){a("Cf1h")},n=a("VU/8")(i.a,r,!1,o,null,null);t.default=n.exports},U04F:function(e,t){},k2bH:function(e,t,a){"use strict";var i=a("u3Mf"),r=a("yzMb"),o=a("YFyo"),n=a("97S/"),s=a("zG9E"),l=a("HcVH"),u=a("Qimm"),m={components:{BaiduMap:o.a,bmNavigation:n.a,bmMapType:s.a,bmMarker:l.a,bmLabel:u.a},props:{labelContent:{type:String,default:""},operateType:{type:String,default:""},position:{type:Object,default:function(){return{lng:0,lat:0}}}},data:function(){return{yardImageUrl:""+i.a+i.f+"/images/yard.png",loading:!1,center:{lng:i.c,lat:i.b},zoom:15,markerPosition:{lng:0,lat:0}}},methods:{handler:function(e){e.BMap,e.map;"edit"===this.operateType&&(this.center.lng=this.position.lng,this.center.lat=this.position.lat,this.markerPosition.lng=this.position.lng,this.markerPosition.lat=this.position.lat)},mapClick:function(e){var t=e.point.lng,a=e.point.lat;this.markerPosition.lng=t,this.markerPosition.lat=a,this.$emit("mapClick",t,a)}},mounted:function(){var e=this;r.a.$off("mapBindCoord"),r.a.$on("mapBindCoord",function(t,a){e.center.lng=t,e.center.lat=a,e.markerPosition.lng=t,e.markerPosition.lat=a})}},d={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("baidu-map",{attrs:{id:"baidu_map",ak:"2IMiGQlksUfRyo9UiGGq6EY6EsZAtFAl",center:e.center,zoom:e.zoom,"scroll-wheel-zoom":!0},on:{ready:e.handler,click:e.mapClick}},[a("bm-navigation",{attrs:{anchor:"BMAP_ANCHOR_TOP_RIGHT"}}),e._v(" "),a("bm-map-type",{attrs:{"map-types":["BMAP_NORMAL_MAP","BMAP_HYBRID_MAP"],anchor:"BMAP_ANCHOR_TOP_LEFT"}}),e._v(" "),a("bm-marker",{attrs:{position:e.markerPosition,animation:"BMAP_ANIMATION_BOUNCE",icon:{url:e.yardImageUrl,size:{width:50,height:39}}}},[a("bm-label",{attrs:{content:e.labelContent,labelStyle:{color:"#333",fontSize:"14px",border:"1px solid #ccc"},offset:{width:-10,height:30}}})],1)],1)},staticRenderFns:[]};var c=a("VU/8")(m,d,!1,function(e){a("U04F")},null,null);t.a=c.exports},o3fu:function(e,t){}});
//# sourceMappingURL=11.226f9260791d4e96cd78.js.map