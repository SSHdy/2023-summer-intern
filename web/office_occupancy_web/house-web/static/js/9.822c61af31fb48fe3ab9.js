webpackJsonp([9],{"0xzQ":function(e,t,r){"use strict";function n(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";this.encode=function(r){var n,o,i,s,a,c,u,h="",g=0;for(r=t(r);g<r.length;)s=(n=r.charCodeAt(g++))>>2,a=(3&n)<<4|(o=r.charCodeAt(g++))>>4,c=(15&o)<<2|(i=r.charCodeAt(g++))>>6,u=63&i,isNaN(o)?c=u=64:isNaN(i)&&(u=64),h=h+e.charAt(s)+e.charAt(a)+e.charAt(c)+e.charAt(u);return h},this.decode=function(t){var n,o,i,s,a,c,u="",h=0;for(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");h<t.length;)n=e.indexOf(t.charAt(h++))<<2|(s=e.indexOf(t.charAt(h++)))>>4,o=(15&s)<<4|(a=e.indexOf(t.charAt(h++)))>>2,i=(3&a)<<6|(c=e.indexOf(t.charAt(h++))),u+=String.fromCharCode(n),64!=a&&(u+=String.fromCharCode(o)),64!=c&&(u+=String.fromCharCode(i));return u=r(u)};var t=function(e){e=e.replace(/\r\n/g,"\n");for(var t="",r=0;r<e.length;r++){var n=e.charCodeAt(r);n<128?t+=String.fromCharCode(n):n>127&&n<2048?(t+=String.fromCharCode(n>>6|192),t+=String.fromCharCode(63&n|128)):(t+=String.fromCharCode(n>>12|224),t+=String.fromCharCode(n>>6&63|128),t+=String.fromCharCode(63&n|128))}return t},r=function(e){for(var t="",r=0,n=0,o=0,i=0;r<e.length;)(n=e.charCodeAt(r))<128?(t+=String.fromCharCode(n),r++):n>191&&n<224?(o=e.charCodeAt(r+1),t+=String.fromCharCode((31&n)<<6|63&o),r+=2):(o=e.charCodeAt(r+1),i=e.charCodeAt(r+2),t+=String.fromCharCode((15&n)<<12|(63&o)<<6|63&i),r+=3);return t}}r.d(t,"a",function(){return n})},"5ctJ":function(e,t){},"8BHQ":function(e,t,r){e.exports=r.p+"static/img/login-national-emblem.461f719.png"},"J+bv":function(e,t,r){e.exports=r.p+"static/img/login-bg-2.efc638f.png"},"NXB/":function(e,t,r){e.exports=r.p+"static/img/loginry1.6fe8fcf.png"},SE2n:function(e,t,r){"use strict";t.a=function(e){return new o.a(function(t,r){i.a.post(s.g+"/user/detail",null,{headers:{Authorization:"Bearer "+e}}).then(function(e){t(e)},function(e){r(e)})})};var n=r("//Fk"),o=r.n(n),i=r("eOoE"),s=r("u3Mf")},aQ08:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("eOoE"),o=r("u3Mf"),i=r("0xzQ"),s=r("SE2n"),a={name:"Login",data:function(){return{clientHeight:"",PRO_TYPE:o.e,loginTitleUrl:"",bgUrl:"",user:{name:"",password:"",remeberPwd:!1},rules:{name:[{required:!0,message:"用户名不能为空",trigger:"blur"}],password:[{required:!0,message:"密码不能为空",trigger:"blur"}]}}},mounted:function(){var e=this;this.loginTitleUrl=r("NXB/"),this.bgUrl=r("mlLq"),console.log(this.bgUrl),this.clientHeight=""+document.documentElement.clientHeight,window.onresize=function(){e.clientHeight=""+document.documentElement.clientHeight},this.getCookie()},watch:{clientHeight:function(){this.changeFixed(this.clientHeight)}},methods:{changeFixed:function(e){this.$refs.login.style.height=e+"px"},login:function(){var e=this;this.user.name=this.$route.query.username,this.user.password=this.$route.query.password;var t=(new i.a).encode("app:123456"),r=encodeURIComponent(this.user.name),a=encodeURIComponent(this.user.password),c=o.g+"/oauth/token?client_id=app&client_secret=123456&grant_type=password&username="+r+"&password="+a;n.a.post(c,null,{headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+t}}).then(function(t){sessionStorage.setItem("TOKEN",t.access_token),sessionStorage.setItem("REFRESH_TOKEN",t.refresh_token),e.user.remeberPwd?document.cookie.length||e.setCookie(e.user.name,e.user.password,7):e.clearCookie(),Object(s.a)(t.access_token).then(function(t){sessionStorage.setItem("name",t.name),sessionStorage.setItem("username",t.username),sessionStorage.setItem("userId",t.userId),sessionStorage.setItem("roleBanner",t.roleBanner),sessionStorage.setItem("telephone",t.telephone),e.$router.push({path:"/home/nav"})}).catch(function(t){var r=t.result?t.result:"用户信息获取失败！";e.$message({message:r,type:"error"})})}).catch(function(t){var r=void 0;t.error_description?(t.error_description=decodeURIComponent(t.error_description),r=t.error_description):r="token获取失败",e.$message({message:r,type:"error"})})},setCookie:function(e,t,r){var n=new Date;n.setTime(n.getTime()+864e5*r);var o=(new i.a).encode(""+t);window.document.cookie="userName="+e+";path=/;expires="+n.toGMTString(),window.document.cookie="userPwd="+o+";path=/;expires="+n.toGMTString()},getCookie:function(){if(document.cookie.length>0){for(var e=document.cookie.split("; "),t=0;t<e.length;t++){var r=e[t].split("=");if("userName"==r[0])this.user.name=r[1];else if("userPwd"==r[0]){var n=(new i.a).decode(""+r[1]);this.user.password=n}}this.user.remeberPwd=!0}},clearCookie:function(){this.setCookie("","",-1)}},created:function(){console.log(this.$route),this.login()}},c={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{ref:"login",staticClass:"login",attrs:{id:"login"}},[t("div",{staticClass:"login-bg-1"},[t("img",{attrs:{src:this.bgUrl}})]),this._v(" "),this._m(0),this._v(" "),t("div",{staticClass:"login-bg-3"},[t("img",{attrs:{src:this.loginTitleUrl}})]),this._v(" "),this._m(1)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"login-bg-2"},[t("img",{attrs:{src:r("J+bv")}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"login-bg-4"},[t("img",{attrs:{src:r("8BHQ")}})])}]};var u=r("VU/8")(a,c,!1,function(e){r("5ctJ")},null,null);t.default=u.exports},mlLq:function(e,t,r){e.exports=r.p+"static/img/login-bg-1-sy.d972f4e.png"}});
//# sourceMappingURL=9.822c61af31fb48fe3ab9.js.map