webpackJsonp([29],{HIoU:function(e,t,a){"use strict";(function(e){var s=a("hmyF"),i=(a("zu8U"),a("Oizb")),l=a("yzMb"),o=a("5kkW"),n=a("3a1n"),r=a("XKMi"),u=a("uSev"),h=a("FAvH"),c=a("GR1E"),d=a("OMJi");a.n(d);t.a={components:{searchBtn:o.a,resetBtn:n.a,searchTreeSelect:r.a,tableBtnGroup:h.a,tablePagination:c.a,tableComponent:u.a},data:function(){return{unitIdList:[],housetypeId:null,housetype:[],form:{yardId:"",buildId:"",floorName:"",houseId:""},houseIds:[],floorNames:[],buildIds:[],yardIds:[],loading:null,tableData:[],tableHeight:0,currentPage:1,pageSize:15,total:1,houseUseAreaSum:0,houseBuildAreaSum:0,address:[{id:1,label:"院落",prop:"yardName",width:200},{id:2,label:"楼座",prop:"buildName",width:100},{id:3,label:"楼层",prop:"floorName",width:100},{id:4,label:"房间",prop:"houseNumber",width:100}],allTreeData:[],searchTreeName:"disposeSearchTree",unitOptions:[]}},created:function(){this.getHouseType(),this.getList(),this.selectAllHandlePo()},methods:{loadingStart:function(e){this.loading||(this.loading=this.$loading({lock:!0,text:"正在加载...",spinner:"el-icon-loading",target:e,customClass:"loading-box"}))},loadingEnd:function(){this.loading&&(this.loading.close(),this.loading=null)},handleSelectionChange:function(e){this.selectData=e},changeSize:function(e){this.currentPage=1,this.pageSize=e,this.getList()},changePage:function(e){this.currentPage=e,this.getList()},search:function(){this.currentPage=1,this.getList()},reset:function(){this.currentPage=1,l.a.$emit(this.searchTreeName+"_clear"),this.housetypeId=null,this.yardIds=[],this.floorNames=[],this.buildIds=[],this.houseIds=[],this.form.yardId="",this.form.buildId="",this.form.floorName="",this.form.houseId="",this.unitIdList=[],this.getList()},getHouseType:function(){var e=this;Object(i.g)().then(function(t){e.housetype=t})},getList:function(){var e=this;this.loadingStart(".table-box"),Object(s.e)(this.currentPage,this.pageSize,this.yardIds,this.buildIds,this.floorNames,this.houseIds,this.housetypeId,this.unitIdList).then(function(t){e.loadingEnd(),t.spareRoomDtoPage.records.length>0?(e.tableData=t.spareRoomDtoPage.records,e.total=t.spareRoomDtoPage.total,e.houseUseAreaSum=t.houseUseAreaSum?t.houseUseAreaSum.toFixed(2):0,e.houseBuildAreaSum=t.houseBuildAreaSum?t.houseBuildAreaSum.toFixed(2):0,e.tableData.forEach(function(e){e.useBuildArea?(e.houseUseArea?e.houseBuildArea=e.houseUseArea.toFixed(2):e.houseBuildArea="-",e.houseUseArea="-"):(e.houseBuildArea=e.houseBuildArea?e.houseBuildArea:"-",e.houseUseArea=e.houseUseArea?e.houseUseArea:"-")})):(e.tableData=[],e.total=0)}).catch(function(t){e.loadingEnd();var a=t.result?t.result:"获取超标房间信息列表失败";e.$message({message:a,type:"error"})})},selectAllHandlePo:function(){var e=this;Object(s.i)().then(function(t){e.allTreeData=t}).catch(function(t){var a=t.result?t.result:"处置位置获取失败";e.$message({message:a,type:"error"})})},handleSearchCheckChange:function(e,t){var a=this;this.houseIds=[],e.concat(t).forEach(function(e){3===e.type?a.houseIds.push(e.value):2===e.type?a.floorNames.push(e.value):1===e.type?a.buildIds.push(e.value):0===e.type&&a.yardIds.push(e.value)})},getUserUnitList:function(){var e=this;Object(s.h)().then(function(t){e.unitOptions=t}).catch(function(t){var a=t.result?t.result:"单位获取失败";e.$message({message:a,type:"error"})})}},mounted:function(){var t=this;this.getUserUnitList(),setTimeout(function(){var a=e("#mainDiv").height(),s=e("#queryBox").outerHeight(!0),i=e("#operateBox").height();t.tableHeight=a-s-i},1)}}}).call(t,a("7t+N"))},cjj0:function(e,t){},o7Kf:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("HIoU"),i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"rentRoomReport"}},[a("div",{staticClass:"query-box",attrs:{id:"queryBox"}},[a("div",{staticClass:"clearfix"},[a("div",{staticClass:"query-item"},[a("div",{staticClass:"query-title"},[e._v("房屋类型：")]),e._v(" "),a("div",{staticClass:"query-input"},[a("el-select",{attrs:{placeholder:"请选择房屋类型"},model:{value:e.housetypeId,callback:function(t){e.housetypeId=t},expression:"housetypeId"}},e._l(e.housetype,function(e){return a("el-option",{key:e.housetypeId,attrs:{label:e.housetypeName,value:e.housetypeId}})}))],1)]),e._v(" "),a("div",{staticClass:"query-item",staticStyle:{"margin-left":"50px"}},[a("div",{staticClass:"query-title"},[e._v("单位名称：")]),e._v(" "),a("div",{staticClass:"query-input"},[a("el-select",{attrs:{filterable:"",multiple:"",placeholder:"请选择"},model:{value:e.unitIdList,callback:function(t){e.unitIdList=t},expression:"unitIdList"}},e._l(e.unitOptions,function(e){return a("el-option",{key:e.unitId,attrs:{label:e.unitName,value:e.unitId}})}))],1)]),e._v(" "),a("div",{staticClass:"query-item",staticStyle:{"margin-left":"50px"}},[a("div",{staticClass:"query-title"},[e._v("位置：")]),e._v(" "),a("div",{staticClass:"query-input"},[a("search-tree-select",{attrs:{treeData:e.allTreeData,treeShow:!0,inputWidth:"100%",inputHeight:"32px",treeName:e.searchTreeName},on:{handleCheckChange:e.handleSearchCheckChange}})],1)]),e._v(" "),a("div",{staticClass:"query-btn"},[a("search-btn",{on:{clickBtn:e.search}}),e._v(" "),a("reset-btn",{on:{clickBtn:e.reset}})],1)])]),e._v(" "),a("div",{staticClass:"table-box"},[a("table-component",{attrs:{tableData:e.tableData,tableHeight:e.tableHeight},on:{select:e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"index",width:"50",label:"编号",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"position",label:"位置",align:"center"}},e._l(e.address,function(e){return a("el-table-column",{key:e.id,attrs:{label:e.label,align:"center",prop:e.prop,width:e.width,"show-overflow-tooltip":!0}})})),e._v(" "),a("el-table-column",{attrs:{prop:"houseUseArea",label:"使用面积(m²)",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"houseBuildArea",label:"建筑面积(m²)",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"contacts",label:"联系人",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"contactPhone",label:"联系电话",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"lesseeYears",label:"承租年限（年）",align:"center"}})],1),e._v(" "),a("div",{staticClass:"table-operate-box",attrs:{id:"operateBox"}},[a("div",{staticClass:"operate-btn"},[e._v("\n        总计  \n        "),a("span",[e._v("房间数量:"+e._s(e.total))]),e._v(" "),a("span",[e._v("使用面积:"+e._s(e.houseUseAreaSum)+"m²")]),e._v(" "),a("span",[e._v("建筑面积:"+e._s(e.houseBuildAreaSum)+"m²")])]),e._v(" "),a("div",{staticClass:"operate-pager"},[a("table-pagination",{attrs:{currentPage:e.currentPage,pageSize:e.pageSize,total:e.total},on:{"size-change":e.changeSize,"page-change":e.changePage}})],1)])],1)])},staticRenderFns:[]};var l=function(e){a("cjj0")},o=a("VU/8")(s.a,i,!1,l,null,null);t.default=o.exports}});
//# sourceMappingURL=29.18fbd03af457f432e228.js.map