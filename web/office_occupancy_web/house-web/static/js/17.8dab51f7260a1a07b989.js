webpackJsonp([17],{CX0W:function(e,t,i){"use strict";var a={props:{type:{type:String,default:""},menuPid:{type:Number,default:0},unitClassify:{type:Number,default:0},isShowAdd:{type:Boolean,default:!0},isShowUpdate:{type:Boolean,default:!0},isShowDelete:{type:Boolean,default:!0},isShowDetail:{type:Boolean,default:!0}},methods:{detail:function(){this.$emit("detailClick")},update:function(){this.$emit("updateClick")},del:function(){this.$emit("deleteClick")},add:function(){this.$emit("addClick")}},mounted:function(){}},l={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"singleBtn clearfix"},[e.isShowAdd&&2!==e.unitClassify&&"unit"===e.type||e.isShowAdd&&!e.menuPid&&"menu"===e.type?i("div",{staticClass:"add",on:{click:e.add}},[i("a",{staticClass:"el-icon-circle-plus-outline"},[e._v("添加")])]):e._e(),e._v(" "),e.isShowUpdate?i("div",{staticClass:"update",on:{click:e.update}},[i("a",{staticClass:"el-icon-edit"},[e._v("修改")])]):e._e(),e._v(" "),e.isShowDetail?i("div",{staticClass:"detail",on:{click:e.detail}},[i("a",{staticClass:"el-icon-view"},[e._v("详情")])]):e._e(),e._v(" "),e.isShowDelete?i("div",{staticClass:"delete",on:{click:e.del}},[i("a",{staticClass:"el-icon-delete"},[e._v("删除")])]):e._e()])},staticRenderFns:[]};var n=i("VU/8")(a,l,!1,function(e){i("chJI")},"data-v-4d335f3c",null);t.a=n.exports},YK7X:function(e,t){},chJI:function(e,t){},gkTg:function(e,t,i){"use strict";(function(e){var a=i("BO1k"),l=i.n(a),n=i("fZjL"),r=i.n(n),s=(i("u3Mf"),i("Oizb"),i("4YAr")),o=i("yzMb"),c=i("uSev"),u=i("CX0W"),d=i("FAvH"),m=i("GR1E"),p=i("fYBn"),h=i("02tb"),f=i("5kkW"),g=i("3a1n");t.a={components:{singleBtnGroup:u.a,tableBtnGroup:d.a,tableComponent:c.a,tablePagination:m.a,cancelBtn:p.a,confirmBtn:h.a,searchBtn:f.a,resetBtn:g.a},data:function(){var e=this;return{menuTitle:"",currentPage:1,pageSize:15,total:0,tableHeight:0,tableData:[],dialogTitle:"",operateType:"add",dialogVisible:!1,loading:null,Form:{menuId:null,menuTitle:"",menuOrder:"",menuUrl:"",menuPid:"",menuKey:"",isFreeze:0},rules:{menuTitle:[{required:!0,validator:function(t,i,a){""===i||null===i?a(new Error("菜单名称不能为空")):Object(s.A)(e.Form.menuTitle,e.Form.menuId).then(function(e){a()}).catch(function(e){a(new Error("菜单名称不能重复"))})},trigger:"blur"}],menuOrder:[{required:!0,message:"菜单序号不能为空",trigger:"blur"}],menuUrl:[{required:!0,message:"菜单链接不能为空",trigger:"blur"}],menuKey:[{required:!0,message:"菜单编码不能为空",trigger:"blur"}],isFreeze:[{required:!0,message:"是否冻结不能为空",trigger:"change"}]}}},methods:{loadingStart:function(e){this.loading||(this.loading=this.$loading({lock:!0,text:"正在加载...",spinner:"el-icon-loading",target:e,customClass:"loading-box"}))},loadingEnd:function(){this.loading&&(this.loading.close(),this.loading=null)},changeSize:function(e){this.pageSize=e,this.getList()},changePage:function(e){this.currentPage=e,this.getList()},getList:function(){var e=this;this.loadingStart(".table-box"),this.menuTitle?Object(s.r)(this.currentPage,this.pageSize,this.menuTitle).then(function(t){t&&(e.tableData=t.records,e.tableData.forEach(function(e){0===e.menuPid?(e.menuLevel="一级菜单",e.menuUrl="-"):e.menuLevel="二级菜单",0===e.isFreeze?e.state="非冻结":e.state="冻结"}),e.total=t.total,e.$nextTick(function(){o.a.$emit("resetTable",e.tableHeight)}),e.loadingEnd())}).catch(function(t){var i=t.result?t.result:"获取菜单信息失败";e.$message({message:i,type:"error"}),e.loadingEnd()}):""===this.menuTitle&&Object(s.q)(this.currentPage,this.pageSize).then(function(t){t&&(e.tableData=t.records,e.tableData.forEach(function(e){e.menuLevel="一级菜单",e.menuUrl="-",0===e.isFreeze?e.state="非冻结":e.state="冻结",e.children&&e.children.length>0&&e.children.forEach(function(e){e.menuLevel="二级菜单",0===e.isFreeze?e.state="非冻结":e.state="冻结"})}),e.total=t.total,e.$nextTick(function(){o.a.$emit("resetTable",e.tableHeight)}),e.loadingEnd())}).catch(function(t){var i=t.result?t.result:"获取菜单信息失败";e.$message({message:i,type:"error"}),e.loadingEnd()})},search:function(){this.currentPage=1,this.getList()},reset:function(){this.currentPage=1,this.menuTitle="",this.search()},addMenu:function(){this.dialogVisible=!0,this.dialogTitle="新增菜单",this.operateType="add",this.Form.menuPid=0},tableAdd:function(e){this.dialogVisible=!0,this.dialogTitle="新增菜单",this.operateType="add",this.Form.menuPid=parseInt(e)},tableDelete:function(e){var t=this;this.$confirm("此操作将永久删除菜单"+e.menuTitle+", 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(s.h)(parseInt(e.menuId)).then(function(e){t.$message({message:"删除菜单信息成功!",type:"success"}),t.currentPage=1,t.getList()}).catch(function(e){var i=e.result?e.result:"删除菜单信息失败!";t.$message({message:i,type:"error"})})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},tableEdit:function(e){var t=this;this.dialogVisible=!0,this.dialogTitle="修改菜单",this.operateType="edit",Object(s.k)(e).then(function(e){r()(e).map(function(i){t.Form[i]=e[i]})}).catch(function(e){var i=e.result?e.result:"菜单信息获取失败";t.$message({message:i,type:"error"})})},tableDetail:function(e){var t=this;this.dialogVisible=!0,this.dialogTitle="菜单详情",this.operateType="detail",Object(s.k)(e).then(function(e){r()(e).map(function(i){t.Form[i]=e[i]})}).catch(function(e){var i=e.result?e.result:"菜单信息获取失败";t.$message({message:i,type:"error"})})},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.saveForm()})},saveForm:function(){var e=this,t="add"===this.operateType?"新增":"修改";"add"===this.operateType?Object(s.b)(this.Form).then(function(i){e.$message({message:t+"菜单成功",type:"success"}),e.dialogVisible=!1,e.getList()}).catch(function(t){var i=t.result?t.result:i+"菜单失败";e.$message({message:i,type:"error"})}):Object(s.G)(this.Form).then(function(i){e.$message({message:t+"菜单成功",type:"success"}),e.dialogVisible=!1,e.getList()}).catch(function(t){var i=t.result?t.result:i+"菜单失败";e.$message({message:i,type:"error"})})},clearForm:function(e){for(var t in e){var i=this.getDataType(e[t]);if("String"===i)e[t]="";else if("Array"===i)e[t]=[];else if("Object"===i){r()(e[t]).length>0?this.clearForm(e[t]):e[t]={}}else e[t]=null}},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.Form.clearValidate()})},dialogClosed:function(){this.clearForm(this.Form),this.Form.menuPid=0,this.Form.isFreeze=0},getDataType:function(e){var t=!0,i=!1,a=void 0;try{for(var n,r=l()(["String","Object","Number","Array","Date"]);!(t=(n=r.next()).done);t=!0){var s=n.value;if(Object.prototype.toString.call(e)==="[object "+s+"]")return s}}catch(e){i=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(i)throw a}}},limitInt:function(e){this.Form[e]=this.Form[e].replace(/[^0-9]/g,"")}},mounted:function(){var t=this;this.getList(),setTimeout(function(){var i=e("#mainDiv").height(),a=e("#queryBox").outerHeight(!0),l=e("#operateBox").height();t.tableHeight=i-a-l},1)}}}).call(t,i("7t+N"))},k5dz:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("gkTg"),l={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"menus"}},[i("div",{staticClass:"query-box",attrs:{id:"queryBox"}},[i("div",{staticClass:"clearfix"},[i("div",{staticClass:"query-item"},[i("div",{staticClass:"query-title"},[e._v("菜单名称：")]),e._v(" "),i("div",{staticClass:"query-input"},[i("el-input",{directives:[{name:"enter-trim",rawName:"v-enter-trim"}],attrs:{placeholder:"请输入菜单名称"},model:{value:e.menuTitle,callback:function(t){e.menuTitle=t},expression:"menuTitle"}})],1)]),e._v(" "),i("div",{staticClass:"query-btn"},[i("search-btn",{on:{clickBtn:e.search}}),e._v(" "),i("reset-btn",{on:{clickBtn:e.reset}})],1)])]),e._v(" "),i("div",{staticClass:"table-box"},[i("table-component",{attrs:{tableData:e.tableData,tableHeight:e.tableHeight,rowKey:"menuId"}},[i("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"menuTitle",label:"菜单名称",align:"left"}}),e._v(" "),i("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"menuUrl",label:"菜单链接",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"menuKey",label:"菜单编码",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"menuLevel",label:"菜单级别",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"state",label:"是否冻结",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{label:"操作",width:"240",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("single-btn-group",{attrs:{type:"menu",menuPid:t.row.menuPid},on:{addClick:function(i){e.tableAdd(t.row.menuId)},updateClick:function(i){e.tableEdit(t.row.menuId)},deleteClick:function(i){e.tableDelete(t.row)},detailClick:function(i){e.tableDetail(t.row.menuId)}}})]}}])})],1),e._v(" "),i("div",{staticClass:"table-operate-box",attrs:{id:"operateBox"}},[i("div",{staticClass:"operate-btn"},[i("table-btn-group",{attrs:{batchDelBtnShow:!1},on:{addClick:e.addMenu}})],1),e._v(" "),i("div",{staticClass:"operate-pager"},[i("table-pagination",{attrs:{currentPage:e.currentPage,pageSize:e.pageSize,total:e.total},on:{"size-change":e.changeSize,"page-change":e.changePage}})],1)])],1),e._v(" "),i("el-dialog",{attrs:{visible:e.dialogVisible,"close-on-click-modal":!1,width:"780px",center:!0},on:{"update:visible":function(t){e.dialogVisible=t},open:e.dialogOpen,closed:e.dialogClosed}},[i("div",{staticClass:"dialog-title",attrs:{slot:"title"},slot:"title"},[i("span",[e._v(e._s(e.dialogTitle))])]),e._v(" "),i("el-form",{ref:"Form",attrs:{inline:!0,model:e.Form,rules:e.rules}},[i("el-form-item",{class:{"detail-form-item":"detail"===e.operateType},attrs:{label:"detail"===e.operateType?"菜单名称:":"菜单名称","label-width":"120px",prop:"menuTitle"}},[i("el-input",{directives:[{name:"enter-trim",rawName:"v-enter-trim"}],attrs:{size:"small",placeholder:"请输入菜单名称",readonly:"detail"===e.operateType},model:{value:e.Form.menuTitle,callback:function(t){e.$set(e.Form,"menuTitle",t)},expression:"Form.menuTitle"}})],1),e._v(" "),i("el-form-item",{class:{"detail-form-item":"detail"===e.operateType},attrs:{label:"detail"===e.operateType?"菜单序号:":"菜单序号","label-width":"120px",prop:"menuOrder"}},[i("el-input",{attrs:{size:"small",placeholder:"请输入菜单序号",readonly:"detail"===e.operateType},on:{blur:function(t){e.limitInt("menuOrder")}},nativeOn:{keyup:function(t){e.limitInt("menuOrder")}},model:{value:e.Form.menuOrder,callback:function(t){e.$set(e.Form,"menuOrder",t)},expression:"Form.menuOrder"}})],1),e._v(" "),0!==e.Form.menuPid?i("el-form-item",{class:{"detail-form-item":"detail"===e.operateType},attrs:{label:"detail"===e.operateType?"菜单链接:":"菜单链接","label-width":"120px",prop:"menuUrl"}},[i("el-input",{directives:[{name:"enter-trim",rawName:"v-enter-trim"}],attrs:{size:"small",placeholder:"请输入菜单链接",readonly:"detail"===e.operateType},model:{value:e.Form.menuUrl,callback:function(t){e.$set(e.Form,"menuUrl",t)},expression:"Form.menuUrl"}})],1):e._e(),e._v(" "),i("el-form-item",{class:{"detail-form-item":"detail"===e.operateType},attrs:{label:"detail"===e.operateType?"菜单编码:":"菜单编码","label-width":"120px",prop:"menuKey"}},[i("el-input",{directives:[{name:"enter-trim",rawName:"v-enter-trim"}],attrs:{size:"small",placeholder:"请输入菜单编码",readonly:"detail"===e.operateType},model:{value:e.Form.menuKey,callback:function(t){e.$set(e.Form,"menuKey",t)},expression:"Form.menuKey"}})],1),e._v(" "),i("el-form-item",{staticClass:"isFreeze-item",class:{"detail-form-item":"detail"===e.operateType},attrs:{label:"detail"===e.operateType?"是否冻结:":"是否冻结","label-width":"120px",prop:"isFreeze"}},[i("el-radio",{directives:[{name:"show",rawName:"v-show",value:!("detail"===e.operateType),expression:"!(operateType==='detail')"}],attrs:{label:1,name:"isFreeze"},model:{value:e.Form.isFreeze,callback:function(t){e.$set(e.Form,"isFreeze",t)},expression:"Form.isFreeze"}},[e._v("是")]),e._v(" "),i("el-radio",{directives:[{name:"show",rawName:"v-show",value:!("detail"===e.operateType),expression:"!(operateType==='detail')"}],attrs:{label:0,name:"isFreeze"},model:{value:e.Form.isFreeze,callback:function(t){e.$set(e.Form,"isFreeze",t)},expression:"Form.isFreeze"}},[e._v("否")]),e._v(" "),i("span",{directives:[{name:"show",rawName:"v-show",value:"detail"===e.operateType,expression:"operateType==='detail'"}],staticClass:"detail-isFreeze-text"},[e._v(e._s(1===e.Form.isFreeze?"冻结":"非冻结"))])],1)],1),e._v(" "),i("span",{directives:[{name:"show",rawName:"v-show",value:!("detail"===e.operateType),expression:"!(operateType==='detail')"}],staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("cancel-btn",{attrs:{fontSize:14},on:{clickBtn:function(t){e.dialogVisible=!1}}}),e._v(" "),i("confirm-btn",{attrs:{fontSize:14},on:{clickBtn:function(t){e.submitForm("Form")}}})],1)],1)],1)},staticRenderFns:[]};var n=function(e){i("YK7X")},r=i("VU/8")(a.a,l,!1,n,null,null);t.default=r.exports}});
//# sourceMappingURL=17.8dab51f7260a1a07b989.js.map