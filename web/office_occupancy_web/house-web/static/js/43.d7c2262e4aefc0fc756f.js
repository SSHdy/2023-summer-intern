webpackJsonp([43],{GrVN:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("oEas"),r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"houseCertificate"}},[a("div",{staticClass:"table-box"},[a("table-component",{attrs:{tableData:e.tableData,tableHeight:e.tableHeight},on:{select:e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"50",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"housePropertyCardNumber",label:"房产证号",align:"center","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{prop:"location",label:"坐落位置",align:"center","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{prop:"address",label:"楼栋/幢号",align:"center","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{prop:"owner",label:"所有权人",align:"center","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{prop:"houseCharacter",label:"房屋性质",align:"center","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{prop:"planningPurpose",label:"规划用途",align:"center","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{prop:"totalLayerNum",label:"楼层总数",align:"center","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{prop:"buildArea",label:"建筑面积(m²)",align:"center","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{prop:"certificationTime",label:"发证日期",align:"center","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("single-btn-group",{attrs:{isShowDetail:!0},on:{deleteClick:function(a){e.singleDetle(t.row)},updateClick:function(a){e.singleUpdate(t.row)},detailClick:function(a){e.singleDetail(t.row)}}})]}}])})],1),e._v(" "),a("div",{staticClass:"table-operate-box",attrs:{id:"operateBox"}},[a("div",{staticClass:"operate-btn"},[a("table-btn-group",{on:{batchDeleteClick:e.batchDelete,addClick:e.addUnit}})],1),e._v(" "),a("div",{staticClass:"operate-pager"},[a("table-pagination",{attrs:{currentPage:e.currentPage,pageSize:e.pageSize,total:e.total},on:{"size-change":e.changeSize,"page-change":e.changePage}})],1)])],1),e._v(" "),a("el-dialog",{attrs:{visible:e.dialogVisible,"close-on-click-modal":!1,width:"1102px",center:!0},on:{"update:visible":function(t){e.dialogVisible=t},closed:e.dialogClosed,open:e.dialogOpen}},[a("div",{staticClass:"dialog-title",attrs:{slot:"title"},slot:"title"},[a("span",[e._v(e._s(e.dialogTitle))])]),e._v(" "),a("el-form",{ref:"Form",attrs:{inline:!0,model:e.Form,rules:e.rules}},[a("el-form-item",{class:{"detail-form-item":"detail"===e.operateType},attrs:{label:"detail"===e.operateType?"房产证号：":"房产证号","label-width":"136px",prop:"housePropertyCardNumber"}},[a("el-input",{directives:[{name:"enter-trim",rawName:"v-enter-trim"}],attrs:{size:"small",readonly:"detail"===e.operateType,placeholder:"detail"!==e.operateType?"请输入房产证号":""},model:{value:e.Form.housePropertyCardNumber,callback:function(t){e.$set(e.Form,"housePropertyCardNumber",t)},expression:"Form.housePropertyCardNumber"}})],1),e._v(" "),a("el-form-item",{class:{"detail-form-item":"detail"===e.operateType},attrs:{label:"detail"===e.operateType?"坐落位置：":"坐落位置","label-width":"136px",prop:"location"}},[a("el-input",{directives:[{name:"enter-trim",rawName:"v-enter-trim"}],attrs:{size:"small",readonly:"detail"===e.operateType,placeholder:"detail"!==e.operateType?"请输入坐落位置":""},model:{value:e.Form.location,callback:function(t){e.$set(e.Form,"location",t)},expression:"Form.location"}})],1),e._v(" "),a("el-form-item",{class:{"detail-form-item":"detail"===e.operateType},attrs:{label:"detail"===e.operateType?"所有权人：":"所有权人","label-width":"136px",prop:"owner"}},[a("el-input",{directives:[{name:"enter-trim",rawName:"v-enter-trim"}],attrs:{size:"small",readonly:"detail"===e.operateType,placeholder:"detail"!==e.operateType?"请输入所有权人":""},model:{value:e.Form.owner,callback:function(t){e.$set(e.Form,"owner",t)},expression:"Form.owner"}})],1),e._v(" "),a("el-form-item",{class:{"detail-form-item":"detail"===e.operateType},attrs:{label:"detail"===e.operateType?"房屋性质：":"房屋性质","label-width":"136px",prop:"houseCharacter"}},[a("el-input",{directives:[{name:"enter-trim",rawName:"v-enter-trim"}],attrs:{size:"small",readonly:"detail"===e.operateType,placeholder:"detail"!==e.operateType?"请输入房屋性质":""},model:{value:e.Form.houseCharacter,callback:function(t){e.$set(e.Form,"houseCharacter",t)},expression:"Form.houseCharacter"}})],1),e._v(" "),a("el-form-item",{class:{"detail-form-item":"detail"===e.operateType},attrs:{label:"detail"===e.operateType?"规划用途：":"规划用途","label-width":"136px",prop:"planningPurpose"}},[a("el-input",{directives:[{name:"enter-trim",rawName:"v-enter-trim"}],attrs:{readonly:"detail"===e.operateType,size:"small",placeholder:"detail"!==e.operateType?"请输入规划用途":""},model:{value:e.Form.planningPurpose,callback:function(t){e.$set(e.Form,"planningPurpose",t)},expression:"Form.planningPurpose"}})],1),e._v(" "),a("el-form-item",{class:{"detail-form-item":"detail"===e.operateType},attrs:{label:"detail"===e.operateType?"发证日期：":"发证日期","label-width":"136px",prop:"certificationTime"}},["detail"!==e.operateType?a("el-date-picker",{staticStyle:{width:"200px"},attrs:{type:"date",placeholder:"请选择发证日期",size:"small","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.Form.certificationTime,callback:function(t){e.$set(e.Form,"certificationTime",t)},expression:"Form.certificationTime"}}):e._e(),e._v(" "),"detail"===e.operateType?a("el-input",{attrs:{size:"small",readonly:"detail"===e.operateType},model:{value:e.Form.certificationTime,callback:function(t){e.$set(e.Form,"certificationTime",t)},expression:"Form.certificationTime"}}):e._e()],1),e._v(" "),a("el-form-item",{class:{"detail-form-item":"detail"===e.operateType},attrs:{label:"detail"===e.operateType?"发证机关：":"发证机关","label-width":"136px",prop:"sendOffice"}},[a("el-input",{directives:[{name:"enter-trim",rawName:"v-enter-trim"}],attrs:{size:"small",readonly:"detail"===e.operateType,placeholder:"detail"!==e.operateType?"请输入发证机关":""},model:{value:e.Form.sendOffice,callback:function(t){e.$set(e.Form,"sendOffice",t)},expression:"Form.sendOffice"}})],1),e._v(" "),a("el-form-item",{class:{"detail-form-item":"detail"===e.operateType},attrs:{label:"detail"===e.operateType?"建筑面积(m²)：":"建筑面积(m²)","label-width":"136px",prop:"buildArea"}},[a("el-input",{attrs:{size:"small",placeholder:"detail"!==e.operateType?"请输入建筑面积":""},on:{blur:function(t){e.limitFloat("buildArea",!0)}},nativeOn:{keyup:function(t){e.limitFloat("buildArea")}},model:{value:e.Form.buildArea,callback:function(t){e.$set(e.Form,"buildArea",t)},expression:"Form.buildArea"}})],1),e._v(" "),a("el-form-item",{class:{"detail-form-item":"detail"===e.operateType},attrs:{label:"detail"===e.operateType?"楼栋/幢号：":"楼栋/幢号","label-width":"136px",prop:"address"}},[a("tree-select",{directives:[{name:"show",rawName:"v-show",value:"detail"!==e.operateType,expression:"operateType !=='detail'"}],attrs:{treeData:e.treeData,treeShow:e.treeShow,inputWidth:"100%",inputHeight:"34px",treeName:e.treeName},on:{handleCheckChange:e.handleCheckChange}}),e._v(" "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.Address,placement:"top"}},[a("span",{directives:[{name:"show",rawName:"v-show",value:"detail"==e.operateType,expression:"operateType =='detail'"}],staticClass:"detail-text"},[e._v(e._s(e.Address))])])],1),e._v(" "),a("el-form-item",{class:{"detail-form-item":"detail"===e.operateType},attrs:{label:"detail"===e.operateType?"楼层总数：":"楼层总数","label-width":"136px",prop:"totalLayerNum"}},[a("el-input",{attrs:{size:"small",readonly:"detail"===e.operateType,placeholder:"detail"!==e.operateType?"请输入楼层总数":""},on:{blur:function(t){e.limitInt("totalLayerNum")}},nativeOn:{keyup:function(t){e.limitInt("totalLayerNum")}},model:{value:e.Form.totalLayerNum,callback:function(t){e.$set(e.Form,"totalLayerNum",t)},expression:"Form.totalLayerNum"}})],1),e._v(" "),a("el-form-item",{class:{"detail-form-item":"detail"===e.operateType},attrs:{label:"detail"===e.operateType?"共有情况：":"共有情况","label-width":"136px",prop:"common"}},[a("el-input",{directives:[{name:"enter-trim",rawName:"v-enter-trim"}],attrs:{size:"small",readonly:"detail"===e.operateType,placeholder:"detail"!==e.operateType?"请输入共有情况":""},model:{value:e.Form.common,callback:function(t){e.$set(e.Form,"common",t)},expression:"Form.common"}})],1),e._v(" "),a("el-form-item",{class:{"detail-form-item":"detail"===e.operateType},attrs:{label:"detail"===e.operateType?"附记：":"附记","label-width":"136px",prop:"attachment"}},[a("el-input",{directives:[{name:"enter-trim",rawName:"v-enter-trim"}],attrs:{readonly:"detail"===e.operateType,size:"small",placeholder:"detail"!==e.operateType?"请输入附记":""},model:{value:e.Form.attachment,callback:function(t){e.$set(e.Form,"attachment",t)},expression:"Form.attachment"}})],1),e._v(" "),a("el-form-item",{class:{"detail-form-item":"detail"===e.operateType},attrs:{label:"detail"===e.operateType?"套内建筑面积(m²)：":"套内建筑面积(m²)","label-width":"136px",prop:"innerBuildArea"}},[a("el-input",{attrs:{readonly:"detail"===e.operateType,size:"small",placeholder:"detail"!==e.operateType?"请输入套内建筑面积":""},on:{blur:function(t){e.limitFloat("innerBuildArea",!0)}},nativeOn:{keyup:function(t){e.limitFloat("innerBuildArea")}},model:{value:e.Form.innerBuildArea,callback:function(t){e.$set(e.Form,"innerBuildArea",t)},expression:"Form.innerBuildArea"}})],1),e._v(" "),a("el-form-item",{class:{"detail-form-item":"detail"===e.operateType},staticStyle:{display:"block"},attrs:{label:"detail"===e.operateType?"备注信息：":"备注信息","label-width":"136px",prop:"remark"}},[a("el-input",{directives:[{name:"enter-trim",rawName:"v-enter-trim"}],staticStyle:{width:"900px","margin-top":"4px"},attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"detail"!==e.operateType?"请输入备注信息":"",readonly:"detail"===e.operateType},model:{value:e.Form.remark,callback:function(t){e.$set(e.Form,"remark",t)},expression:"Form.remark"}})],1),e._v(" "),a("el-form-item",{staticStyle:{display:"block"},attrs:{label:"detail"===e.operateType?"证件下载：":"上传证件图片","label-width":"136px",prop:"addImageFlag"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:"detail"!==e.operateType,expression:"operateType!=='detail'"}],staticClass:"upload_box"},[a("el-upload",{ref:"upload",attrs:{headers:e.postHeaders,action:e.uploadImgUrl,"list-type":"picture-card","file-list":e.fileList,"on-remove":e.handleRemove,"auto-upload":!1,"on-success":e.handleSuccess,"on-change":e.handleChange,"on-error":e.handleError,accept:e.acceptImgType,limit:e.limitImgNum,"on-exceed":e.handleExceed,"before-upload":e.beforeAvatarUpload,multiple:""}},[a("i",{staticClass:"el-icon-plus"})])],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"detail"===e.operateType,expression:"operateType==='detail'"}],staticClass:"img-preview-box clearfix"},e._l(e.detailFileList,function(t,i){return a("div",{key:i,staticClass:"img-preview-item",on:{click:function(a){e.preview(t.enclosureVirtualUrl)}}},[a("img",{attrs:{src:e.getImgUrl(t.enclosureVirtualUrl),alt:"已上传证件"}}),e._v(" "),a("div",{staticClass:"bigger-view-warpper"},[a("i",{staticClass:"bigger-view-icon"})]),e._v(" "),a("el-checkbox",{on:{change:function(a){e.imgCheckboxChange(a,t.enclosurePhysicsUrl)}}})],1)})),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.detailFileList.length,expression:"detailFileList.length"}],staticClass:"download-btn",attrs:{type:"primary",icon:"el-icon-download"},on:{click:e.downloadImg}},[e._v("下载证件")])],1)],1),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:"detail"!==e.operateType,expression:"operateType!=='detail'"}],staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("cancel-btn",{attrs:{fontSize:14},on:{clickBtn:function(t){e.dialogVisible=!1}}}),e._v(" "),a("confirm-btn",{attrs:{fontSize:14},on:{clickBtn:function(t){e.submitForm("Form")}}})],1)],1)],1)},staticRenderFns:[]};var l=function(e){a("JUIf")},o=a("VU/8")(i.a,r,!1,l,null,null);t.default=o.exports},JUIf:function(e,t){},oEas:function(e,t,a){"use strict";(function(e){var i=a("fZjL"),r=a.n(i),l=a("d7EF"),o=a.n(l),s=a("W3Iv"),n=a.n(s),d=a("BO1k"),c=a.n(d),m=a("u3Mf"),p=a("os9D"),u=(a("zu8U"),a("Oizb")),h=a("yzMb"),g=a("uSev"),f=a("dO4M"),v=a("FAvH"),b=a("GR1E"),y=a("fYBn"),F=a("02tb"),w=a("5kkW"),T=a("3a1n"),N=a("XKMi"),x=a("PJh5"),I=a.n(x),L=a("gAs1");a.n(L);t.a={components:{singleBtnGroup:f.a,tableBtnGroup:v.a,tablePagination:b.a,tableComponent:g.a,cancelBtn:y.a,confirmBtn:F.a,searchBtn:w.a,resetBtn:T.a,treeSelect:N.a},data:function(){var e=this;return{treeName:"houseCertificate",detailFileList:[],currentPage:1,pageSize:15,total:0,loading:null,tableHeight:0,selectData:[],tableData:[],dialogTitle:"",operateType:"add",dialogVisible:!1,treeShow:!0,treeData:[],Form:{id:"",propertyRightId:"",propertyType:1,location:"",attachment:"",buildArea:"",certificationTime:"",common:"",houseCharacter:"",innerBuildArea:"",owner:"",planningPurpose:"",remark:"",sendOffice:"",totalLayerNum:"",housePropertyCardNumber:"",addImageFlag:"",addressList:[],address:"",handleId:null,handleModuleList:[],buildNum:[]},deleteEnclosureIdList:[],downloadList:[],uploadImgNum:0,uploadedImgNum:0,uploadSuccessImgNum:0,acceptImgType:"image/jpeg,image/gif,image/png,image/bmp",uploadImgUrl:u.n+"?uploadType=propertyRights",token:"",postHeaders:{Authorization:""},fileList:[],oldFileList:[],limitImgNum:5,Address:"",rules:{housePropertyCardNumber:[{required:!0,message:"房产证号不能为空",trigger:"blur"}],location:[{required:!0,message:"坐落位置不能为空",trigger:"blur"}],owner:[{required:!0,message:"所有权人不能为空",trigger:"blur"}],houseCharacter:[{required:!0,message:"房屋性质不能为空",trigger:"blur"}],planningPurpose:[{required:!0,message:"规划用途不能为空",trigger:"blur"}],certificationTime:[{required:!0,message:"发证日期不能为空",trigger:"blur"}],sendOffice:[{required:!0,message:"发证机关不能为空",trigger:"blur"}],totalLayerNum:[{required:!0,message:"楼层总数不能为空",trigger:"blur"}],buildArea:[{required:!0,message:"建筑面积不能为空",trigger:"blur"}],address:[{required:!0,validator:function(t,a,i){"detail"!==e.operateType&&(e.Form.address?i():i(new Error("楼栋/幢号不能为空")))},trigger:"blur"}],addImageFlag:[{required:!0,validator:function(t,a,i){e.Form.addImageFlag?i():i(new Error("请先上传证件"))},trigger:"blur"}]}}},created:function(){this.getRightBuildTree()},methods:{loadingStart:function(e){this.loading||(this.loading=this.$loading({lock:!0,text:"正在加载...",spinner:"el-icon-loading",target:e,customClass:"loading-box"}))},loadingEnd:function(){this.loading&&(this.loading.close(),this.loading=null)},changeSize:function(e){this.currentPage=1,this.pageSize=e,this.getList()},changePage:function(e){this.currentPage=e,this.getList()},handleCheckChange:function(e,t){var a=this;this.Form.handleModuleList=[],this.Form.buildNum=[],e.length>0&&e.forEach(function(e){if(1===e.type){var t=parseInt(e.id.split(":")[0]),i=e.value,r=e.name,l={handleId:a.Form.handleId,yardId:t,buildId:i,buildName:r};a.Form.handleModuleList.push(l),a.Form.buildNum.push(i)}}),this.Form.handleModuleList.length>0?this.Form.address="true":this.Form.address=""},getRightBuildTree:function(){var e=this;Object(p.v)().then(function(t){e.treeData=t,e.treeData.forEach(function(e){0==e.type&&(e.disabled=!0),void 0!==e.children&&e.children.length>0&&e.children.forEach(function(e){delete e.children})})}).catch(function(t){var a=t.result?t.result:"产权楼栋树获取失败";e.$message({message:a,type:"error"})})},getList:function(){var e=this;this.loadingStart(".table-box"),Object(p.t)(this.currentPage,this.pageSize,1).then(function(t){e.tableData=t.records,e.total=t.total,e.tableData.forEach(function(e){e.certificationTime=I()(e.certificationTime).format("YYYY-MM-DD");var t=[];e.handleModuleList.forEach(function(e){t.push(e.buildName)}),e.address=t.join(",")}),e.loadingEnd()}).catch(function(t){var a=t.result?t.result:"房产证信息获取失败";e.$message({message:a,type:"error"}),e.loadingEnd()})},search:function(){this.getList()},reset:function(){this.currentPage=1,this.name="",this.search()},addUnit:function(){this.dialogVisible=!0,this.dialogTitle="新增房产证信息",this.operateType="add"},singleDetle:function(e){var t=this;this.$confirm("此操作将永久删除房产证号为"+e.housePropertyCardNumber+"的房产证信息, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(p.i)(e._id).then(function(e){t.$message({message:"删除房产证信息成功!",type:"success"}),t.currentPage=1,t.getList()}).catch(function(e){var a=e.result?e.result:"删除房产证信息失败";t.$message({message:a,type:"error"})})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},batchDelete:function(){var e=this,t=[];this.selectData.forEach(function(e,a){t.push(e._id)}),this.$confirm("此操作将永久删除这些房产证信息, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){if(0===t.length)return e.$message({message:"请先勾选删除项！",type:"warning"}),!1;Object(p.f)(t).then(function(t){e.$message({message:"批量删除房产证信息成功!",type:"success"}),e.currentPage=1,e.getList()}).catch(function(t){var a=t.result?t.result:"批量删除房产证信息失败";e.$message({message:a,type:"error"})})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},singleUpdate:function(e){var t=this;this.Form._id=e._id,this.dialogVisible=!0,this.dialogTitle="修改房产证信息",this.operateType="edit",Object(p.s)(e._id).then(function(e){var a=[],i=[],r=[];e.handleModuleList.forEach(function(e){a.push(e.buildName),i.push(e.yardId+":"+e.buildId),-1===r.indexOf(e.yardId)&&r.push(e.yardId)}),h.a.$emit(t.treeName+"_select",a,i,r),t.Form.address="true";var l=!0,s=!1,d=void 0;try{for(var p,u=c()(n()(e));!(l=(p=u.next()).done);l=!0){var g=p.value,f=o()(g,2),v=f[0],b=f[1];void 0!==t.Form[v]&&(t.Form[v]=b)}}catch(e){s=!0,d=e}finally{try{!l&&u.return&&u.return()}finally{if(s)throw d}}if(e.addressList&&e.addressList.length>0){var y=0;e.addressList.forEach(function(e,a){y++,e.name=e.enclosurePhysicsUrl.split(".")[0].substr(e.enclosurePhysicsUrl.split(".")[0].lastIndexOf("/")+1);var i=e.enclosurePhysicsUrl.split(".")[1];"rar"!==i&&"zip"!==i||(e.enclosureVirtualUrl="/images/compress.png");var r={name:e.name,url:m.a+m.f+e.enclosureVirtualUrl+"?access_token="+t.token,physics:e.enclosurePhysicsUrl};t.fileList.push(r),t.oldFileList.push(r)}),t.uploadedImgNum=y}t.uploadedImgNum=e.addressList.length,t.uploadedImgNum>0&&(t.Form.addImageFlag="true"),t.Form.addressList=[]}).catch(function(e){var a=e.result?e.result:"获取房产证信息失败";t.$message({message:a,type:"error"})})},singleDetail:function(e){var t=this;this.dialogTitle="房产证信息详情",this.operateType="detail",Object(p.s)(e._id).then(function(a){t.dialogVisible=!0,a.certificationTime=I()(a.certificationTime).format("YYYY-MM-DD");var i=!0,r=!1,l=void 0;try{for(var s,d=c()(n()(a));!(i=(s=d.next()).done);i=!0){var m=s.value,p=o()(m,2),u=p[0],h=p[1];void 0!==t.Form[u]&&(t.Form[u]=h)}}catch(e){r=!0,l=e}finally{try{!i&&d.return&&d.return()}finally{if(r)throw l}}var g=[];a.handleModuleList.forEach(function(e){g.push(e.buildName)}),t.Address=g.join(","),a.addressList.length>0&&a.addressList.forEach(function(e,a){e.name=e.enclosurePhysicsUrl.split(".")[0].substr(e.enclosurePhysicsUrl.split(".")[0].lastIndexOf("/")+1);var i=e.enclosurePhysicsUrl.split(".")[1];"rar"!==i&&"zip"!==i||(e.enclosureVirtualUrl="/images/compress.png"),t.detailFileList.push(e)}),t.Form.id=e._id}).catch(function(e){var a=e.result?e.result:"获取房产证信息详情失败";t.$message({message:a,type:"error"})})},handleSelectionChange:function(e){this.selectData=e},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;0===t.uploadImgNum?t.saveForm():t.submitUpload()})},saveForm:function(){var e=this;"add"===this.operateType?(void 0!==this.Form._id&&delete this.Form._id,Object(p.b)(this.Form).then(function(t){e.getList(),e.$message({message:"房产证信息新增成功!",type:"success"}),e.dialogVisible=!1}).catch(function(t){var a=t.result?t.result:"房产证信息新增失败";e.$message({message:a,type:"error"}),e.fileList=e.oldFileList,e.uploadImgNum=0,e.uploadSuccessImgNum=0})):"edit"===this.operateType&&Object(p.G)(this.Form,this.deleteEnclosureIdList).then(function(t){e.getList(),e.$message({message:"房产证信息修改成功!",type:"success"}),e.dialogVisible=!1}).catch(function(t){var a=t.result?t.result:"房产证信息修改失败";e.$message({message:a,type:"error"}),e.fileList=e.oldFileList,e.uploadImgNum=0,e.uploadSuccessImgNum=0})},beforeAvatarUpload:function(e){var t=e.size/1024/1024<200;return t||this.$message.error("上传头像图片大小不能超过 200MB!"),t},submitUpload:function(){this.$refs.upload.submit()},handleRemove:function(e,t){"success"===e.status&&(this.deleteEnclosureIdList.push(e.physics),this.uploadedImgNum--),this.uploadImgNum=t.length-this.uploadedImgNum,0===t.length&&(this.Form.addImageFlag="")},handleSuccess:function(e,t,a){this.uploadSuccessImgNum++,this.Form.addressList.push({enclosureType:1,enclosurePhysicsUrl:e.imgList[0].imgPath,enclosureVirtualUrl:e.imgList[0].imgUrl}),this.uploadSuccessImgNum===this.uploadImgNum&&this.saveForm()},handleChange:function(e,t){"image"!==e.raw.type.split("/")[0]&&(e.url=""+m.a+m.f+"/images/compress.png"),t.length>0&&(this.Form.addImageFlag="true"),this.uploadImgNum=t.length-this.uploadedImgNum},handleExceed:function(e,t){this.$message.warning("最多只能上传五张图片！")},handleError:function(e,t,a){401===e.status&&(this.$store.dispatch("Logout",this.token),this.$router.push({path:"/login"})),this.$message({message:e.message,type:"error"})},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.Form.clearValidate()})},dialogClosed:function(){h.a.$emit(this.treeName+"_clearInput"),h.a.$emit(this.treeName+"_clear"),this.clearForm(this.Form),this.Form.propertyType=1,this.deleteEnclosureIdList=[],this.fileList=[],this.oldFileList=[],this.detailFileList=[],this.downloadList=[],this.uploadImgNum=0,this.uploadedImgNum=0,this.uploadSuccessImgNum=0,this.Address=""},clearForm:function(e){for(var t in e){var a=this.getDataType(e[t]);if("String"===a)e[t]="";else if("Array"===a)e[t]=[];else if("Object"===a){r()(e[t]).length>0?this.clearForm(e[t]):e[t]={}}else e[t]=null}},getDataType:function(e){var t=!0,a=!1,i=void 0;try{for(var r,l=c()(["String","Object","Number","Array","Function"]);!(t=(r=l.next()).done);t=!0){var o=r.value;if(Object.prototype.toString.call(e)==="[object "+o+"]")return o}}catch(e){a=!0,i=e}finally{try{!t&&l.return&&l.return()}finally{if(a)throw i}}},limitFloat:function(e,t){this.Form[e]=this.Form[e].replace(/[^\d.]/g,"").replace(/\.{2,}/g,".").replace(".","$#$").replace(/\./g,"").replace("$#$",".").replace(/^(\-)*(\d+)\.(\d\d).*$/,"$1$2.$3").replace(/^\./g,""),t&&""!==this.Form[e]&&(this.Form[e]=(this.Form[e]-0).toFixed(2))},limitInt:function(e){this.Form[e]=this.Form[e].replace(/[^0-9]/g,"")},downloadImg:function(){var e=this;this.downloadList.length>0?Object(p.j)(this.downloadList,1,this.Form.id).then(function(e){a("3UNf")(e,decodeURIComponent(sessionStorage.getItem("CADdownloadFileName")))}).catch(function(t){var a=t.result?t.result:"证件下载失败";e.$message({message:a,type:"error"})}):this.$message({message:"请先选中一个证件",type:"warning"})},getImgUrl:function(e){return""+m.a+m.f+e+"?access_token="+this.token},imgCheckboxChange:function(e,t){if(e)-1===this.downloadList.indexOf(t)&&this.downloadList.push(t);else{var a=this.downloadList.indexOf(t);this.downloadList.splice(a,1)}},preview:function(t){e(".img-preview-bigger").css("display","block"),e("#biggerImg").attr("src",""+m.a+m.f+t+"?access_token="+this.token)},closePreview:function(){e(".img-preview-bigger").css("display","none"),e("#biggerImg").css("width","auto")}},mounted:function(){var t=this;this.getList(),setTimeout(function(){var a=e("#mainDiv").height(),i=e("#operateBox").height();t.tableHeight=a-i},1),this.token=sessionStorage.getItem("TOKEN"),this.token&&(this.postHeaders.Authorization="Bearer "+this.token)}}}).call(t,a("7t+N"))}});
//# sourceMappingURL=43.d7c2262e4aefc0fc756f.js.map