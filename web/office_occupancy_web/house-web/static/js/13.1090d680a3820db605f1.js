webpackJsonp([13],{CX0W:function(t,e,i){"use strict";var n={props:{type:{type:String,default:""},menuPid:{type:Number,default:0},unitClassify:{type:Number,default:0},isShowAdd:{type:Boolean,default:!0},isShowUpdate:{type:Boolean,default:!0},isShowDelete:{type:Boolean,default:!0},isShowDetail:{type:Boolean,default:!0}},methods:{detail:function(){this.$emit("detailClick")},update:function(){this.$emit("updateClick")},del:function(){this.$emit("deleteClick")},add:function(){this.$emit("addClick")}},mounted:function(){}},s={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"singleBtn clearfix"},[t.isShowAdd&&2!==t.unitClassify&&"unit"===t.type||t.isShowAdd&&!t.menuPid&&"menu"===t.type?i("div",{staticClass:"add",on:{click:t.add}},[i("a",{staticClass:"el-icon-circle-plus-outline"},[t._v("添加")])]):t._e(),t._v(" "),t.isShowUpdate?i("div",{staticClass:"update",on:{click:t.update}},[i("a",{staticClass:"el-icon-edit"},[t._v("修改")])]):t._e(),t._v(" "),t.isShowDetail?i("div",{staticClass:"detail",on:{click:t.detail}},[i("a",{staticClass:"el-icon-view"},[t._v("详情")])]):t._e(),t._v(" "),t.isShowDelete?i("div",{staticClass:"delete",on:{click:t.del}},[i("a",{staticClass:"el-icon-delete"},[t._v("删除")])]):t._e()])},staticRenderFns:[]};var o=i("VU/8")(n,s,!1,function(t){i("chJI")},"data-v-4d335f3c",null);e.a=o.exports},RYcG:function(t,e){t.exports={O_RDONLY:0,O_WRONLY:1,O_RDWR:2,S_IFMT:61440,S_IFREG:32768,S_IFDIR:16384,S_IFCHR:8192,S_IFBLK:24576,S_IFIFO:4096,S_IFLNK:40960,S_IFSOCK:49152,O_CREAT:512,O_EXCL:2048,O_NOCTTY:131072,O_TRUNC:1024,O_APPEND:8,O_DIRECTORY:1048576,O_NOFOLLOW:256,O_SYNC:128,O_SYMLINK:2097152,O_NONBLOCK:4,S_IRWXU:448,S_IRUSR:256,S_IWUSR:128,S_IXUSR:64,S_IRWXG:56,S_IRGRP:32,S_IWGRP:16,S_IXGRP:8,S_IRWXO:7,S_IROTH:4,S_IWOTH:2,S_IXOTH:1,E2BIG:7,EACCES:13,EADDRINUSE:48,EADDRNOTAVAIL:49,EAFNOSUPPORT:47,EAGAIN:35,EALREADY:37,EBADF:9,EBADMSG:94,EBUSY:16,ECANCELED:89,ECHILD:10,ECONNABORTED:53,ECONNREFUSED:61,ECONNRESET:54,EDEADLK:11,EDESTADDRREQ:39,EDOM:33,EDQUOT:69,EEXIST:17,EFAULT:14,EFBIG:27,EHOSTUNREACH:65,EIDRM:90,EILSEQ:92,EINPROGRESS:36,EINTR:4,EINVAL:22,EIO:5,EISCONN:56,EISDIR:21,ELOOP:62,EMFILE:24,EMLINK:31,EMSGSIZE:40,EMULTIHOP:95,ENAMETOOLONG:63,ENETDOWN:50,ENETRESET:52,ENETUNREACH:51,ENFILE:23,ENOBUFS:55,ENODATA:96,ENODEV:19,ENOENT:2,ENOEXEC:8,ENOLCK:77,ENOLINK:97,ENOMEM:12,ENOMSG:91,ENOPROTOOPT:42,ENOSPC:28,ENOSR:98,ENOSTR:99,ENOSYS:78,ENOTCONN:57,ENOTDIR:20,ENOTEMPTY:66,ENOTSOCK:38,ENOTSUP:45,ENOTTY:25,ENXIO:6,EOPNOTSUPP:102,EOVERFLOW:84,EPERM:1,EPIPE:32,EPROTO:100,EPROTONOSUPPORT:43,EPROTOTYPE:41,ERANGE:34,EROFS:30,ESPIPE:29,ESRCH:3,ESTALE:70,ETIME:101,ETIMEDOUT:60,ETXTBSY:26,EWOULDBLOCK:35,EXDEV:18,SIGHUP:1,SIGINT:2,SIGQUIT:3,SIGILL:4,SIGTRAP:5,SIGABRT:6,SIGIOT:6,SIGBUS:10,SIGFPE:8,SIGKILL:9,SIGUSR1:30,SIGSEGV:11,SIGUSR2:31,SIGPIPE:13,SIGALRM:14,SIGTERM:15,SIGCHLD:20,SIGCONT:19,SIGSTOP:17,SIGTSTP:18,SIGTTIN:21,SIGTTOU:22,SIGURG:16,SIGXCPU:24,SIGXFSZ:25,SIGVTALRM:26,SIGPROF:27,SIGWINCH:28,SIGIO:23,SIGSYS:12,SSL_OP_ALL:2147486719,SSL_OP_ALLOW_UNSAFE_LEGACY_RENEGOTIATION:262144,SSL_OP_CIPHER_SERVER_PREFERENCE:4194304,SSL_OP_CISCO_ANYCONNECT:32768,SSL_OP_COOKIE_EXCHANGE:8192,SSL_OP_CRYPTOPRO_TLSEXT_BUG:2147483648,SSL_OP_DONT_INSERT_EMPTY_FRAGMENTS:2048,SSL_OP_EPHEMERAL_RSA:0,SSL_OP_LEGACY_SERVER_CONNECT:4,SSL_OP_MICROSOFT_BIG_SSLV3_BUFFER:32,SSL_OP_MICROSOFT_SESS_ID_BUG:1,SSL_OP_MSIE_SSLV2_RSA_PADDING:0,SSL_OP_NETSCAPE_CA_DN_BUG:536870912,SSL_OP_NETSCAPE_CHALLENGE_BUG:2,SSL_OP_NETSCAPE_DEMO_CIPHER_CHANGE_BUG:1073741824,SSL_OP_NETSCAPE_REUSE_CIPHER_CHANGE_BUG:8,SSL_OP_NO_COMPRESSION:131072,SSL_OP_NO_QUERY_MTU:4096,SSL_OP_NO_SESSION_RESUMPTION_ON_RENEGOTIATION:65536,SSL_OP_NO_SSLv2:16777216,SSL_OP_NO_SSLv3:33554432,SSL_OP_NO_TICKET:16384,SSL_OP_NO_TLSv1:67108864,SSL_OP_NO_TLSv1_1:268435456,SSL_OP_NO_TLSv1_2:134217728,SSL_OP_PKCS1_CHECK_1:0,SSL_OP_PKCS1_CHECK_2:0,SSL_OP_SINGLE_DH_USE:1048576,SSL_OP_SINGLE_ECDH_USE:524288,SSL_OP_SSLEAY_080_CLIENT_DH_BUG:128,SSL_OP_SSLREF2_REUSE_CERT_TYPE_BUG:0,SSL_OP_TLS_BLOCK_PADDING_BUG:512,SSL_OP_TLS_D5_BUG:256,SSL_OP_TLS_ROLLBACK_BUG:8388608,ENGINE_METHOD_DSA:2,ENGINE_METHOD_DH:4,ENGINE_METHOD_RAND:8,ENGINE_METHOD_ECDH:16,ENGINE_METHOD_ECDSA:32,ENGINE_METHOD_CIPHERS:64,ENGINE_METHOD_DIGESTS:128,ENGINE_METHOD_STORE:256,ENGINE_METHOD_PKEY_METHS:512,ENGINE_METHOD_PKEY_ASN1_METHS:1024,ENGINE_METHOD_ALL:65535,ENGINE_METHOD_NONE:0,DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6,F_OK:0,R_OK:4,W_OK:2,X_OK:1,UV_UDP_REUSEADDR:4}},Zhyv:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("fOjG"),s={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"baseInfoUnit"}},[i("div",{staticClass:"query-box",attrs:{id:"queryBox"}},[i("div",{staticClass:"clearfix"},[i("div",{staticClass:"query-item"},[i("div",{staticClass:"query-title"},[t._v("单位名称：")]),t._v(" "),i("div",{staticClass:"query-input"},[i("el-input",{attrs:{placeholder:"请输入单位名称"},model:{value:t.name,callback:function(e){t.name="string"==typeof e?e.trim():e},expression:"name"}})],1)]),t._v(" "),i("div",{staticClass:"query-item",staticStyle:{"margin-left":"50px"}},[i("div",{staticClass:"query-title"},[t._v("单位类型：")]),t._v(" "),i("div",{staticClass:"query-input"},[i("el-select",{attrs:{filterable:"",placeholder:"请选择"},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},t._l(t.unitTypeOptions,function(t){return i("el-option",{key:t.unittypeId,attrs:{label:t.unittypeName,value:t.unittypeId}})}))],1)]),t._v(" "),i("div",{staticClass:"query-btn"},[i("search-btn",{on:{clickBtn:t.search}}),t._v(" "),i("reset-btn",{on:{clickBtn:t.reset}})],1)])]),t._v(" "),i("div",{staticClass:"table-box"},[i("table-component",{attrs:{tableData:t.tableData,tableHeight:t.tableHeight,rowKey:"unitId"}},[i("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"unitName",label:"单位名称",align:"left"}}),t._v(" "),i("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"unittypeName",label:"单位类型",align:"center"}}),t._v(" "),i("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"unitSocialCode",label:"统一社会信用代码",align:"center"}}),t._v(" "),i("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"unitComplement",label:"总编制人数",align:"center"}}),t._v(" "),i("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"unitLevel",label:"单位分类",align:"center"}}),t._v(" "),i("el-table-column",{attrs:{label:"操作",width:"190",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("single-btn-group",{attrs:{type:"unit",isShowDetail:!1,unitClassify:e.row.unitClassify},on:{addClick:function(i){t.tableAdd(e.row)},updateClick:function(i){t.tableEdit(e.row)},deleteClick:function(i){t.tableDelete(e.row.unitId,e.row.unitName)}}})]}}])})],1),t._v(" "),i("div",{staticClass:"table-operate-box",attrs:{id:"operateBox"}},[i("div",{staticClass:"operate-btn"},[i("table-btn-group",{attrs:{batchDelBtnShow:!1,addText:"添加"},on:{addClick:t.addUnit}})],1),t._v(" "),i("div",{staticClass:"operate-pager"},[i("table-pagination",{attrs:{currentPage:t.currentPage,pageSize:t.pageSize,total:t.total},on:{"size-change":t.changeSize,"page-change":t.changePage}})],1)])],1),t._v(" "),i("el-dialog",{attrs:{visible:t.dialogVisible,"close-on-click-modal":!1,width:"1100px",center:!0},on:{"update:visible":function(e){t.dialogVisible=e},open:t.dialogOpen,closed:t.dialogClosed}},[i("div",{staticClass:"dialog-title",attrs:{slot:"title"},slot:"title"},[i("span",[t._v(t._s(t.dialogTitle))])]),t._v(" "),i("el-form",{ref:"Form",attrs:{inline:!0,model:t.Form,rules:t.rules}},[i("el-form-item",{staticClass:"radio-box",attrs:{label:"是否为单位","label-width":"134px"}},[i("el-radio-group",{on:{change:t.unitClassifyChange},model:{value:t.unitClassify,callback:function(e){t.unitClassify=e},expression:"unitClassify"}},[i("el-radio",{attrs:{label:"yes",name:"unitClassify"}},[t._v("是")]),t._v(" "),i("el-radio",{attrs:{label:0,name:"unitClassify"}},[t._v("否")])],1)],1),t._v(" "),0===t.unitClassify?i("el-form-item",{attrs:{label:"类别名称","label-width":"134px",prop:"unit.unitName"}},[i("el-input",{attrs:{size:"small",placeholder:"请输入类别名称"},model:{value:t.Form.unit.unitName,callback:function(e){t.$set(t.Form.unit,"unitName","string"==typeof e?e.trim():e)},expression:"Form.unit.unitName"}})],1):t._e(),t._v(" "),"yes"===t.unitClassify?i("div",{staticClass:"line"}):t._e(),t._v(" "),"yes"===t.unitClassify?i("el-form-item",{staticClass:"radio-box",attrs:{label:"是否临时单位","label-width":"134px"}},[i("el-radio-group",{model:{value:t.Form.unit.isTempUnit,callback:function(e){t.$set(t.Form.unit,"isTempUnit",e)},expression:"Form.unit.isTempUnit"}},[i("el-radio",{attrs:{label:1,name:"isTempUnit"}},[t._v("是")]),t._v(" "),i("el-radio",{attrs:{label:0,name:"isTempUnit"}},[t._v("否")])],1)],1):t._e(),t._v(" "),"yes"===t.unitClassify?i("el-form-item",{attrs:{label:"单位名称","label-width":"134px",prop:"unit.unitName"}},[i("el-input",{attrs:{size:"small",placeholder:"请输入单位名称"},model:{value:t.Form.unit.unitName,callback:function(e){t.$set(t.Form.unit,"unitName","string"==typeof e?e.trim():e)},expression:"Form.unit.unitName"}})],1):t._e(),t._v(" "),"yes"===t.unitClassify&&1===t.Form.unit.isTempUnit?i("el-form-item",{attrs:{label:"办公人数","label-width":"134px",prop:"unit.workerNumber"}},[i("el-input",{attrs:{size:"small",placeholder:"请输入办公人数"},nativeOn:{keyup:function(e){t.limitInt("workerNumber")}},model:{value:t.Form.unit.workerNumber,callback:function(e){t.$set(t.Form.unit,"workerNumber","string"==typeof e?e.trim():e)},expression:"Form.unit.workerNumber"}})],1):t._e(),t._v(" "),"yes"===t.unitClassify&&1===t.Form.unit.isTempUnit?i("el-form-item",{attrs:{label:"备注","label-width":"134px",prop:"unit.remark"}},[i("el-input",{staticStyle:{width:"878px"},attrs:{size:"small",type:"textarea",placeholder:"请输入备注"},model:{value:t.Form.unit.remark,callback:function(e){t.$set(t.Form.unit,"remark","string"==typeof e?e.trim():e)},expression:"Form.unit.remark"}})],1):t._e(),t._v(" "),"yes"===t.unitClassify&&0===t.Form.unit.isTempUnit?i("el-form-item",{attrs:{label:"单位类型","label-width":"134px",prop:"unit.unitType"}},[i("el-select",{staticStyle:{width:"200px"},attrs:{filterable:"",placeholder:"请选择单位类型",size:"small"},model:{value:t.Form.unit.unitType,callback:function(e){t.$set(t.Form.unit,"unitType",e)},expression:"Form.unit.unitType"}},t._l(t.unitTypeOptions,function(t){return i("el-option",{key:t.unittypeId,attrs:{label:t.unittypeName,value:t.unittypeId}})}))],1):t._e(),t._v(" "),"yes"===t.unitClassify&&0===t.Form.unit.isTempUnit?i("el-form-item",{attrs:{label:"单位类别","label-width":"134px",prop:"unit.unitCategory"}},[i("el-select",{staticStyle:{width:"200px"},attrs:{filterable:"",placeholder:"请选择单位类别",size:"small"},model:{value:t.Form.unit.unitCategory,callback:function(e){t.$set(t.Form.unit,"unitCategory",e)},expression:"Form.unit.unitCategory "}},t._l(t.unitCategoryOpts,function(t,e){return i("el-option",{key:e,attrs:{label:t,value:t}})}))],1):t._e(),t._v(" "),"yes"===t.unitClassify&&0===t.Form.unit.isTempUnit?i("el-form-item",{attrs:{label:"单位级别","label-width":"134px",prop:"unit.unitGrade"}},[i("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择单位级别",size:"small"},on:{change:t.unitGradeChange},model:{value:t.Form.unit.unitGrade,callback:function(e){t.$set(t.Form.unit,"unitGrade",e)},expression:"Form.unit.unitGrade"}},t._l(t.unitGradeOpts,function(t,e){return i("el-option",{key:e,attrs:{label:t,value:t}})}))],1):t._e(),t._v(" "),"yes"===t.unitClassify&&0===t.Form.unit.isTempUnit?i("el-form-item",{attrs:{label:"机关级别","label-width":"134px",prop:"unit.officeLevel"}},[i("el-select",{staticStyle:{width:"200px"},attrs:{filterable:"",placeholder:"请选择机关级别",size:"small"},model:{value:t.Form.unit.officeLevel,callback:function(e){t.$set(t.Form.unit,"officeLevel",e)},expression:"Form.unit.officeLevel"}},t._l(t.officeLevelOpts,function(t,e){return i("el-option",{key:e,attrs:{label:t.name,value:t.id}})}))],1):t._e(),t._v(" "),"yes"===t.unitClassify&&0===t.Form.unit.isTempUnit?i("el-form-item",{attrs:{label:"统一社会信用代码","label-width":"134px",prop:"unit.unitSocialCode"}},[i("el-input",{attrs:{size:"small",placeholder:"请输入统一社会信用代码"},model:{value:t.Form.unit.unitSocialCode,callback:function(e){t.$set(t.Form.unit,"unitSocialCode","string"==typeof e?e.trim():e)},expression:"Form.unit.unitSocialCode"}})],1):t._e(),t._v(" "),"yes"===t.unitClassify&&0===t.Form.unit.isTempUnit?i("el-form-item",{attrs:{label:"工勤编制数","label-width":"134px",prop:"unit.unitWork"}},[i("el-input",{attrs:{size:"small",placeholder:"请输入工勤编制数"},nativeOn:{keyup:function(e){t.limitInt("unitWork")}},model:{value:t.Form.unit.unitWork,callback:function(e){t.$set(t.Form.unit,"unitWork","string"==typeof e?e.trim():e)},expression:"Form.unit.unitWork"}})],1):t._e(),t._v(" "),"yes"===t.unitClassify&&"副县"===t.Form.unit.unitGrade?i("el-form-item",{attrs:{label:"单位副职数","label-width":"134px",prop:"unit.unitDeputy"}},[i("el-input",{attrs:{size:"small",placeholder:"请输入单位副职数"},nativeOn:{keyup:function(e){t.limitInt("unitDeputy")}},model:{value:t.Form.unit.unitDeputy,callback:function(e){t.$set(t.Form.unit,"unitDeputy","string"==typeof e?e.trim():e)},expression:"Form.unit.unitDeputy"}})],1):t._e(),t._v(" "),"yes"===t.unitClassify&&0===t.Form.unit.isTempUnit?i("el-form-item",{staticClass:"unit-professional-list",staticStyle:{display:"block"},attrs:{label:"单位编制信息","label-width":"134px",prop:"unitProfessionalList"}},t._l(t.Form.unitProfessionalList,function(e,n){return i("div",{key:n,staticClass:"unit-level-box"},[i("div",{staticClass:"unit-level-item"},[i("el-select",{staticStyle:{width:"200px"},attrs:{filterable:"","no-data-text":"请先选择单位级别",placeholder:"请选择等级",size:"small"},on:{change:function(e){t.professionalLevelChange(e,n)}},model:{value:e.professionalLevel,callback:function(i){t.$set(e,"professionalLevel",i)},expression:"item.professionalLevel"}},t._l(t.professionalLevelOpts,function(t){return i("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),t._v(" "),i("span",[t._v("-")]),t._v(" "),i("el-select",{staticStyle:{width:"200px"},attrs:{"no-data-text":"请先选择等级",filterable:"",placeholder:"请选择职级",size:"small"},model:{value:e.professionalId,callback:function(i){t.$set(e,"professionalId",i)},expression:"item.professionalId"}},t._l(e.professionOpts,function(t){return i("el-option",{key:t.professionalId,attrs:{label:t.professionalName,value:t.professionalId}})})),t._v(" "),i("span",[t._v("-")]),t._v(" "),i("el-input",{staticStyle:{width:"200px"},attrs:{size:"small",placeholder:"请输入人数"},nativeOn:{keyup:function(e){t.unitProfessionalLimitInt("professionalNum",n)}},model:{value:e.professionalNum,callback:function(i){t.$set(e,"professionalNum","string"==typeof i?i.trim():i)},expression:"item.professionalNum"}}),t._v(" "),0!==n?i("span",{staticClass:"delete-item-btn",on:{click:function(e){t.deleteUnitProfessional(n)}}},[i("i",{staticClass:"el-icon-close"}),t._v(" 删除\n            ")]):t._e(),t._v(" "),0===n?i("span",{staticClass:"add-item-btn",on:{click:t.addUnitProfessional}},[i("i",{staticClass:"el-icon-plus"}),t._v(" 添加\n            ")]):t._e()],1)])})):t._e(),t._v(" "),"yes"===t.unitClassify&&t.Form.unit.unitComplement>0&&0===t.Form.unit.isTempUnit?i("el-form-item",{attrs:{label:"当前总编制人数","label-width":"134px"}},[i("span",[t._v(t._s(t.Form.unit.unitComplement))])]):t._e()],1),t._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("cancel-btn",{attrs:{fontSize:14},on:{clickBtn:function(e){t.dialogVisible=!1}}}),t._v(" "),i("confirm-btn",{attrs:{fontSize:14},on:{clickBtn:function(e){t.submitForm("Form")}}})],1)],1)],1)},staticRenderFns:[]};var o=function(t){i("wqHb")},a=i("VU/8")(n.a,s,!1,o,null,null);e.default=a.exports},chJI:function(t,e){},fOjG:function(t,e,i){"use strict";(function(t){var n=i("BO1k"),s=i.n(n),o=i("fZjL"),a=i.n(o),r=i("d6pC"),l=i("Oizb"),u=(i("yzMb"),i("uSev")),m=i("CX0W"),p=i("FAvH"),c=i("GR1E"),f=i("fYBn"),d=i("02tb"),_=i("5kkW"),S=i("3a1n"),h=i("RYcG");i.n(h);e.a={components:{singleBtnGroup:m.a,tableBtnGroup:p.a,tableComponent:u.a,tablePagination:c.a,cancelBtn:f.a,confirmBtn:d.a,searchBtn:_.a,resetBtn:S.a},data:function(){var t=this;return{name:"",type:"",currentPage:1,pageSize:15,total:0,tableHeight:0,tableData:[],loading:null,unitTypeOptions:[],dialogTitle:"",operateType:"add",operateLevel:0,dialogVisible:!1,unitClassify:"yes",oldUnitClassify:null,Form:{unit:{unitComplement:0,unitId:null,unitName:"",unitPid:0,unitSocialCode:"",unitGrade:"",unitType:null,unitClassify:null,unitCategory:null,officeLevel:null,unitWork:null,unitDeputy:null,isTempUnit:0,workerNumber:null,remark:""},unitProfessionalList:[]},unitCategoryOpts:["机关本级","垂直管理机构","派出机构","参照公务员法管理的事业单位","其他"],unitGradeOpts:["正县","副县","正科","副科"],officeLevelOpts:[{name:"市级机关",id:1},{name:"县级机关",id:2},{name:"乡级机关",id:3}],msg:"",unitGradeOriginalVal:"",rules:{"unit.unitName":[{required:!0,message:"单位名称不能为空",trigger:"blur"}],"unit.unitType":[{required:!0,message:"请选择单位类型",trigger:"change"}],"unit.unitSocialCode":[{required:!0,message:"统一社会信用代码不能为空",trigger:"blur"}],"unit.unitCategory":[{required:!0,message:"请选择单位类别",trigger:"change"}],"unit.unitGrade":[{required:!0,message:"请选择单位级别",trigger:"change"}],"unit.officeLevel":[{required:!0,message:"请选择机关级别",trigger:"change"}],"unit.unitWork":[{required:!0,message:"工勤编制数不能为空",trigger:"blur"}],"unit.unitDeputy":[{required:!0,message:"单位副职数不能为空",trigger:"blur"}],unitProfessionalList:[{required:!0,validator:function(e,i,n){0===t.Form.unitProfessionalList.length?n(new Error("请至少添加一条单位编制信息")):(t.Form.unitProfessionalList.forEach(function(t){""!==t.professionalId&&""!==t.professionalNum||n(new Error("请将单位编制信息填写完整"))}),n())},trigger:"blur"}]}}},watch:{"Form.unit.unitWork":function(t,e){var i=""!==this.Form.unit.unitWork&&null!==this.Form.unit.unitWork?parseInt(this.Form.unit.unitWork):0,n=""!==this.Form.unit.unitDeputy&&null!==this.Form.unit.unitDeputy?parseInt(this.Form.unit.unitDeputy):0,s=0;this.Form.unitProfessionalList.length>0&&this.Form.unitProfessionalList.forEach(function(t){var e=""!==t.professionalNum&&null!==t.professionalNum?parseInt(t.professionalNum):0;s+=e}),this.Form.unit.unitComplement=i+n+s},"Form.unit.unitDeputy":function(t,e){var i=""!==this.Form.unit.unitWork&&null!==this.Form.unit.unitWork?parseInt(this.Form.unit.unitWork):0,n=""!==this.Form.unit.unitDeputy&&null!==this.Form.unit.unitDeputy?parseInt(this.Form.unit.unitDeputy):0,s=0;this.Form.unitProfessionalList.length>0&&this.Form.unitProfessionalList.forEach(function(t){var e=""!==t.professionalNum&&null!==t.professionalNum?parseInt(t.professionalNum):0;s+=e}),this.Form.unit.unitComplement=i+n+s},"Form.unitProfessionalList":{handler:function(t,e){var i=""!==this.Form.unit.unitWork&&null!==this.Form.unit.unitWork?parseInt(this.Form.unit.unitWork):0,n=""!==this.Form.unit.unitDeputy&&null!==this.Form.unit.unitDeputy?parseInt(this.Form.unit.unitDeputy):0,s=0;this.Form.unitProfessionalList.length>0&&this.Form.unitProfessionalList.forEach(function(t){var e=""!==t.professionalNum&&null!==t.professionalNum?parseInt(t.professionalNum):0;s+=e}),this.Form.unit.unitComplement=i+n+s},deep:!0}},methods:{unitGradeChange:function(t){var e=this;""===this.unitGradeOriginalVal||null===this.unitGradeOriginalVal?(this.professionalLevelOpts=[{id:3,name:"市级机关"},{id:4,name:"县级机关"},{id:5,name:"乡级机关"}],this.unitGradeOriginalVal=t):this.$confirm("单位级别改变会清空单位编制信息内容, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.Form.unitProfessionalList=[];e.Form.unitProfessionalList.push({professionalId:"",professionalNum:"",professionalLevel:"",professionOpts:[]}),"副县"!==t&&(e.Form.unit.unitDeputy=null),e.unitGradeOriginalVal=t}).catch(function(){e.Form.unit.unitGrade=e.unitGradeOriginalVal})},unitClassifyChange:function(t){if(this.$refs.Form.clearValidate(),this.rules["unit.unitName"]=[],this.Form.unit.unitName="",0===t)this.rules["unit.unitName"].push({required:!0,message:"类别名称不能为空",trigger:"blur"});else if(this.rules["unit.unitName"].push({required:!0,message:"单位名称不能为空",trigger:"blur"}),0===this.oldUnitClassify){this.Form.unitProfessionalList=[];this.Form.unitProfessionalList.push({professionalId:"",professionalNum:"",professionalLevel:"",professionOpts:[]})}},addUnitProfessional:function(){if("add_level1"===this.operateType||"add_level2"===this.operateType){this.Form.unitProfessionalList.push({professionalId:"",professionalNum:"",professionalLevel:"",professionOpts:[]})}else{var t={professionalId:"",professionalNum:"",professionalLevel:"",unitId:this.Form.unit.unitId,professionOpts:[]};this.Form.unitProfessionalList.push(t)}},deleteUnitProfessional:function(t){this.Form.unitProfessionalList.splice(t,1)},professionalLevelChange:function(t,e){this.Form.unitProfessionalList[e].professionalId="",this.Form.unitProfessionalList[e].professionalNum="",this.getAllProfessionList(t,e)},loadingStart:function(t){this.loading||(this.loading=this.$loading({lock:!0,text:"正在加载...",spinner:"el-icon-loading",target:t,customClass:"loading-box"}))},loadingEnd:function(){this.loading&&(this.loading.close(),this.loading=null)},changeSize:function(t){this.pageSize=t,this.getList()},changePage:function(t){this.currentPage=t,this.getList()},getList:function(){var t=this;this.loadingStart(".table-box"),this.name||this.type?Object(r.t)(this.currentPage,this.pageSize,this.name,this.type).then(function(e){t.tableData=e.records,t.total=e.total,t.recursionList(t.tableData),t.loadingEnd()}).catch(function(e){t.loadingEnd();var i=e.result?e.result:"获取单位信息失败";t.$message({message:i,type:"error"})}):""===this.name&&""===this.type&&Object(r.s)(this.currentPage,this.pageSize).then(function(e){t.total=e.total,t.tableData=e.records,t.recursionList(t.tableData),t.loadingEnd()}).catch(function(e){var i=e.result?e.result:"获取单位信息失败";t.$message({message:i,type:"error"}),t.loadingEnd()})},recursionList:function(t){var e=this;t.forEach(function(t){if(void 0!==t.unitClassify)switch(t.unitClassify){case 0:t.unitLevel="-";break;case 1:t.unitLevel="一级单位";break;case 2:t.unitLevel="二级单位"}void 0!==t.unitComplement&&0===t.unitComplement&&(t.unitComplement="-"),t.unittypeName||(t.unittypeName="-"),t.children&&t.children.length>0&&e.recursionList(t.children)})},getUnitTypeList:function(){var t=this;Object(l.k)().then(function(e){t.unitTypeOptions=e,t.getList()}).catch(function(e){var i=e.result?e.result:"单位类型获取失败";t.$message({message:i,type:"error"})})},search:function(){this.currentPage=1,this.getList()},reset:function(){this.currentPage=1,this.name="",this.type="",this.search()},addUnit:function(){this.dialogVisible=!0,this.dialogTitle="新增单位",this.operateType="add_level1",this.Form.unitProfessionalList=[],this.professionalLevelOpts=[];this.Form.unitProfessionalList.push({professionalId:"",professionalNum:"",professionalLevel:"",professionOpts:[]})},tableAdd:function(t){this.operateLevel=t.unitClassify,this.dialogVisible=!0,this.dialogTitle="新增单位",this.operateType="add_level2",this.Form.unit.unitPid=parseInt(t.unitId),this.Form.unitProfessionalList=[],this.professionalLevelOpts=[];this.Form.unitProfessionalList.push({professionalId:"",professionalNum:"",professionalLevel:"",professionOpts:[]})},tableDelete:function(t,e){var i=this;this.$confirm("此操作将永久删除单位"+e+", 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(r.h)(parseInt(t)).then(function(t){i.$message({message:"删除单位信息成功!",type:"success"}),i.currentPage=1,i.getList()}).catch(function(t){var e=t.result?t.result:"删除单位信息失败!";i.$message({message:e,type:"error"})})}).catch(function(){i.$message({type:"info",message:"已取消删除"})})},tableEdit:function(t){var e=this;this.dialogVisible=!0,this.dialogTitle="修改单位",this.operateType="edit",this.operateLevel=t.unitClassify,this.professionalLevelOpts=[{id:3,name:"市级机关"},{id:4,name:"县级机关"},{id:5,name:"乡级机关"}],Object(r.k)(t.unitId).then(function(t){if(a()(t).map(function(i){void 0!==e.Form.unit[i]&&("unitClassify"===i?(e.rules["unit.unitName"]=[],0===t[i]?e.rules["unit.unitName"].push({required:!0,message:"类别名称不能为空",trigger:"blur"}):e.rules["unit.unitName"].push({required:!0,message:"单位名称不能为空",trigger:"blur"}),e.unitClassify=0===t[i]?0:"yes",e.oldUnitClassify=0===t[i]?0:"yes"):e.Form.unit[i]=t[i])}),e.Form.unit.unitWork=0===e.Form.unit.unitWork?"":e.Form.unit.unitWork,e.Form.unit.unitDeputy=0===e.Form.unit.unitDeputy?"":e.Form.unit.unitDeputy,e.Form.unit.workerNumber=0===e.Form.unit.workerNumber?"":e.Form.unit.workerNumber,0!==t.unitClassify)if(e.Form.unitProfessionalList=t.unitProfessionalList?t.unitProfessionalList:[],e.unitGradeOriginalVal=e.Form.unit.unitGrade,e.Form.unitProfessionalList.length>0)e.Form.unitProfessionalList.forEach(function(t){var i=1;5!==t.professionalLevel&&"正县"!==e.Form.unit.unitGrade&&"副县"!==e.Form.unit.unitGrade||(i=0),"正科"!==e.Form.unit.unitGrade&&"副科"!==e.Form.unit.unitGrade||1!==t.isMunicipal||(t.professionalLevel=3),Object(l.b)(t.professionalLevel,i).then(function(i){e.$set(t,"professionOpts",i)}).catch(function(t){var i=t.result?t.result:"职称获取失败";e.$message({message:i,type:"error"})})});else{e.Form.unitProfessionalList.push({professionalId:"",professionalNum:"",professionalLevel:"",professionOpts:[]})}}).catch(function(t){var i=t.result?t.result:"单位信息获取失败";e.$message({message:i,type:"error"})})},submitForm:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return!1;0===e.unitClassify?"edit"===e.operateType?e.msg="修改分类":e.msg="新增分类":"edit"===e.operateType?e.msg="修改单位":e.msg="新增单位",e.Form.unit.unitWork=parseInt(e.Form.unit.unitWork),e.Form.unit.unitDeputy=e.Form.unit.unitDeputy?parseInt(e.Form.unit.unitDeputy):0,0===e.Form.unit.isTempUnit?(e.Form.unit.workerNumber=0,e.Form.unit.remark=""):(e.Form.unit.unitComplement=0,e.Form.unit.unitWork=0,e.Form.unit.unitDeputy=0,e.Form.unit.unitSocialCode="",e.Form.unit.unitGrade="",e.Form.unit.unitType=null,e.Form.unitProfessionalList=[],e.Form.unit.unitCategory="",e.Form.unit.officeLevel=""),"add_level1"===e.operateType&&"yes"===e.unitClassify?(e.Form.unit.unitClassify=1,e.saveOrUpdateUnit()):"add_level2"===e.operateType&&"yes"===e.unitClassify?(0===e.operateLevel?e.Form.unit.unitClassify=1:1===e.operateLevel&&(e.Form.unit.unitClassify=2),e.saveOrUpdateUnit()):"edit"===e.operateType&&"yes"===e.unitClassify?1===e.operateLevel?(e.Form.unit.unitClassify=1,e.saveOrUpdateUnit()):2===e.operateLevel?(e.Form.unit.unitClassify=2,e.saveOrUpdateUnit()):0===e.operateLevel&&(0===e.Form.unit.unitPid?(e.Form.unit.unitClassify=1,e.saveOrUpdateUnit()):Object(r.k)(e.Form.unit.unitPid).then(function(t){1===t.unitClassify?e.Form.unit.unitClassify=2:0===t.unitClassify&&(e.Form.unit.unitClassify=1),e.saveOrUpdateUnit()}).catch(function(t){var i=t.result?t.result:"单位信息获取失败";e.$message({message:i,type:"error"})})):0===e.unitClassify&&(e.Form.unit.unitClassify=0,e.Form.unit.unitComplement=0,e.Form.unit.unitWork=0,e.Form.unit.unitDeputy=0,e.Form.unit.unitSocialCode="",e.Form.unit.unitGrade="",e.Form.unit.unitType=null,e.Form.unitProfessionalList=[],e.Form.unit.unitCategory="",e.Form.unit.officeLevel="",e.saveOrUpdateUnit())})},saveOrUpdateUnit:function(){var t=this;this.Form.unitProfessionalList.length>0&&("正科"===this.Form.unit.unitGrade||"副科"===this.Form.unit.unitGrade)?this.Form.unitProfessionalList.forEach(function(t){3===t.professionalLevel?t.isMunicipal=1:t.isMunicipal=2}):this.Form.unitProfessionalList.length>0&&"正科"!==this.Form.unit.unitGrade&&"副科"!==this.Form.unit.unitGrade&&this.Form.unitProfessionalList.forEach(function(t){t.isMunicipal=2}),Object(r.A)(this.Form).then(function(e){t.$message({message:t.msg+"成功",type:"success"}),t.dialogVisible=!1,t.getList()}).catch(function(e){var i=e.result?e.result:t.msg+"失败";t.$message({message:i,type:"error"})})},dialogOpen:function(){var t=this;this.$nextTick(function(){t.$refs.Form.clearValidate()})},dialogClosed:function(){for(var t in this.Form.unit){var e=this.getDataType(this.Form.unit[t]);this.Form.unit[t]="String"===e?"":"Array"===e?[]:"Object"===e?{}:null}this.Form.unit.unitPid=0,this.Form.unit.unitComplement=0,this.Form.unit.isTempUnit=0,this.Form.unitProfessionalList=[],this.unitClassify="yes",this.unitGradeOriginalVal=""},getDataType:function(t){var e=!0,i=!1,n=void 0;try{for(var o,a=s()(["String","Object","Number","Array","Date"]);!(e=(o=a.next()).done);e=!0){var r=o.value;if(Object.prototype.toString.call(t)==="[object "+r+"]")return r}}catch(t){i=!0,n=t}finally{try{!e&&a.return&&a.return()}finally{if(i)throw n}}},limitInt:function(t){this.Form.unit[t]=this.Form.unit[t].replace(/[^0-9]/g,"")},unitProfessionalLimitInt:function(t,e){this.Form.unitProfessionalList[e][t]=this.Form.unitProfessionalList[e][t].replace(/[^0-9]/g,"")},getAllProfessionList:function(t,e){var i=this,n=1;5!==t&&"正县"!==this.Form.unit.unitGrade&&"副县"!==this.Form.unit.unitGrade||(n=0),Object(l.b)(t,n).then(function(t){i.$set(i.Form.unitProfessionalList[e],"professionOpts",t)}).catch(function(t){var e=t.result?t.result:"职称获取失败";i.$message({message:e,type:"error"})})}},mounted:function(){var e=this;this.getUnitTypeList(),setTimeout(function(){var i=t("#mainDiv").height(),n=t("#queryBox").outerHeight(!0),s=t("#operateBox").height();e.tableHeight=i-n-s},1)}}}).call(e,i("7t+N"))},wqHb:function(t,e){}});
//# sourceMappingURL=13.1090d680a3820db605f1.js.map