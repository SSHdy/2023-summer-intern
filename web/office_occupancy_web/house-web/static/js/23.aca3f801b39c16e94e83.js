webpackJsonp([23],{"1aQz":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("Asac"),n={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"configQuery"}},[a("div",{staticClass:"query-box",attrs:{id:"queryBox"}},[a("div",{staticClass:"clearfix"},[a("div",{staticClass:"query-item"},[a("div",{staticClass:"query-title"},[t._v("配置编号：")]),t._v(" "),a("div",{staticClass:"query-input"},[a("el-input",{attrs:{placeholder:"请输入配置编号"},model:{value:t.configureNo,callback:function(e){t.configureNo="string"==typeof e?e.trim():e},expression:"configureNo"}})],1)]),t._v(" "),a("div",{staticClass:"query-item",staticStyle:{"margin-left":"50px"}},[a("div",{staticClass:"query-title"},[t._v("申请单位：")]),t._v(" "),a("div",{staticClass:"query-input"},[a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请选择"},model:{value:t.unitId,callback:function(e){t.unitId=e},expression:"unitId"}},t._l(t.unitOptions,function(t){return a("el-option",{key:t.unitId,attrs:{label:t.unitName,value:t.unitId}})}))],1)]),t._v(" "),a("div",{staticClass:"query-item",staticStyle:{"margin-left":"50px"}},[a("div",{staticClass:"query-title"},[t._v("申请时间：")]),t._v(" "),a("div",{staticClass:"query-input"},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd HH:mm:ss","picker-options":t.pickerOptions_start},model:{value:t.startTime,callback:function(e){t.startTime=e},expression:"startTime"}})],1)]),t._v(" "),a("div",{staticClass:"query-item"},[a("div",{staticClass:"query-title",staticStyle:{margin:"0 5px"}},[t._v("至")]),t._v(" "),a("div",{staticClass:"query-input"},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd 23:59:59","picker-options":t.pickerOptions_end},model:{value:t.endTime,callback:function(e){t.endTime=e},expression:"endTime"}})],1)]),t._v(" "),a("div",{staticClass:"query-btn"},[a("search-btn",{on:{clickBtn:t.search}}),t._v(" "),a("reset-btn",{on:{clickBtn:t.reset}})],1)])]),t._v(" "),a("div",{staticClass:"table-box"},[a("table-component",{attrs:{tableData:t.tableData,tableHeight:t.tableHeight}},[a("el-table-column",{attrs:{label:"序号",type:"index",width:"50",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"configureNo",label:"配置编号",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"unitName",label:"申请单位",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"configureApplicant",label:"申请人",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"unitComplement",label:"编制人数",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"actualNumber",label:"实有人数",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"totalArea",label:"现有面积(m²)",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"configureDate",label:"申请时间",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"申请状态",width:"140",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{class:{"status-unreviewed":0===e.row.applyStatus,"status-pass":1===e.row.applyStatus,"status-notPass":2===e.row.applyStatus,"status-reviewimg":3===e.row.applyStatus}},[t._v(t._s(e.row.applyStatusText))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"90",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("single-btn-group",{attrs:{isShowDelete:!1,isShowDetail:!0,isShowAlter:!1},on:{detailClick:function(a){t.singleDetail(e.row)}}})]}}])})],1),t._v(" "),a("div",{staticClass:"table-operate-box",attrs:{id:"operateBox"}},[a("div",{staticClass:"operate-btn"},[a("table-btn-group",{attrs:{batchDelBtnShow:!1,addBtnShow:!1}})],1),t._v(" "),a("div",{staticClass:"operate-pager"},[a("table-pagination",{attrs:{currentPage:t.currentPage,pageSize:t.pageSize,total:t.total},on:{"size-change":t.changeSize,"page-change":t.changePage}})],1)])],1),t._v(" "),a("el-dialog",{attrs:{visible:t.dialogVisible,"close-on-click-modal":!1,width:"1100px",center:!0},on:{"update:visible":function(e){t.dialogVisible=e},closed:t.dialogClosed}},[a("div",{staticClass:"dialog-title",attrs:{slot:"title"},slot:"title"},[a("span",[t._v("配置详情")])]),t._v(" "),a("div",{staticClass:"dialog-content"},[a("div",{staticClass:"title-box clearfix"},t._l(t.processStepList,function(e){return a("span",{key:e.step,class:{processActive:t.activeStep===e.value},on:{click:function(a){t.changeProcess(e.value)}}},[t._v(t._s(e.key))])})),t._v(" "),a("div",{staticClass:"common-info"},[a("div",{staticClass:"clearfix"},[a("div",{staticClass:"content-item"},[a("span",[t._v("申请单位：")]),t._v(" "),a("span",[t._v(t._s(t.baseInfoForm.unitName))])]),t._v(" "),a("div",{staticClass:"content-item"},[a("span",[t._v("单位负责人：")]),t._v(" "),a("span",[t._v(t._s(t.baseInfoForm.unitCharger))])]),t._v(" "),a("div",{staticClass:"content-item"},[a("span",[t._v("编制人数：")]),t._v(" "),a("span",[t._v(t._s(t.baseInfoForm.unitComplement)+"人")])]),t._v(" "),a("div",{staticClass:"content-item"},[a("span",[t._v("实有人数：")]),t._v(" "),a("span",[t._v(t._s(t.baseInfoForm.actualNumber)+"人")])]),t._v(" "),a("div",{staticClass:"content-item"},[a("span",[t._v("现有面积：")]),t._v(" "),a("span",[t._v(t._s(t.baseInfoForm.totalArea?t.baseInfoForm.totalArea:"暂无"))])]),t._v(" "),a("div",{staticClass:"content-item"},[a("span",[t._v("人均面积：")]),t._v(" "),a("span",[t._v(t._s(t.baseInfoForm.PerCapitaArea?t.baseInfoForm.PerCapitaArea:"暂无"))])]),t._v(" "),a("div",{staticClass:"content-item"},[a("span",[t._v("联系电话：")]),t._v(" "),a("span",[t._v(t._s(t.baseInfoForm.contactPhone))])]),t._v(" "),a("div",{staticClass:"content-item"},[a("span",[t._v("联系人：")]),t._v(" "),a("span",[t._v(t._s(t.baseInfoForm.contacts))])]),t._v(" "),a("div",{staticClass:"content-item"},[a("span",[t._v("单位性质：")]),t._v(" "),a("span",[t._v(t._s(t.baseInfoForm.unitProperty))])]),t._v(" "),a("div",{staticClass:"content-item"},[a("span",[t._v("单位地址：")]),t._v(" "),a("span",[t._v(t._s(t.baseInfoForm.unitAddress))])]),t._v(" "),a("div",{staticClass:"content-item",staticStyle:{width:"100%"}},[a("span",[t._v("申请原因：")]),t._v(" "),a("span",[t._v(t._s(t.baseInfoForm.applyReason))])]),t._v(" "),t.baseInfoForm.enclosureList.length>0?a("div",{staticClass:"content-item",staticStyle:{width:"100%"}},[a("span",[t._v("下载附件：")]),t._v(" "),a("div",{staticClass:"file-download"},[a("el-checkbox-group",{on:{change:t.handleCheckedFileChange},model:{value:t.fileDownLoadCheckedList,callback:function(e){t.fileDownLoadCheckedList=e},expression:"fileDownLoadCheckedList"}},t._l(t.baseInfoForm.enclosureList,function(e,i){return a("div",{key:i,staticClass:"file-download-item"},[a("el-checkbox",{attrs:{label:e.detail}},[t._v(t._s(e.enclosureName))])],1)})),t._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){t.fileDownLoad(t.downloadCheckedList,1)}}},[t._v("点击下载")])],1)]):t._e()])]),t._v(" "),2===t.activeStep?a("div",{staticClass:"project-info"},[a("div",{staticClass:"clearfix"},[a("div",{staticClass:"content-item"},[a("span",[t._v("操作人：")]),t._v(" "),a("span",[t._v(t._s(t.Form_unit.unitReviewUser))])]),t._v(" "),a("div",{staticClass:"content-item"},[a("span",[t._v("操作时间：")]),t._v(" "),a("span",[t._v(t._s(t.Form_unit.unitReviewTime))])]),t._v(" "),a("div",{staticClass:"content-item"},[a("span",[t._v("审查结果：")]),t._v(" "),a("span",[t._v(t._s(t.Form_unit.unitReviewAuditState))])]),t._v(" "),a("div",{staticClass:"content-item"},[a("span",[t._v("电梯台数：")]),t._v(" "),a("span",[t._v(t._s(t.Form_unit.elevatorsNumber)+"台")])]),t._v(" "),t.Form_unit.newUnitName?a("div",{staticClass:"content-item newUnitName"},[a("span",[t._v("参与统筹调剂单位")]),t._v(" "),a("span",[t._v("：")]),t._v(" "),a("span",[t._v(t._s(t.Form_unit.newUnitName))])]):t._e(),t._v(" "),a("div",{staticClass:"content-item",staticStyle:{width:"100%"}},[a("span",[t._v("区域：")]),t._v(" "),a("span",[t._v(t._s(t.Form_unit.regionName))])])]),t._v(" "),a("div",{staticClass:"house-info"},[a("span",[t._v("房间信息：")]),t._v(" "),a("div",{staticClass:"house-info-table"},[a("table-component",{attrs:{tableData:t.Form_unit.configureRoomList,tableHeight:200}},[a("el-table-column",{attrs:{label:"序号",type:"index",width:"50",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"房间数量",prop:"roomNumber",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"房间面积范围(m²)",prop:"roomAreaRange",align:"center"}})],1)],1)])]):t._e(),t._v(" "),3===t.activeStep?a("div",{staticClass:"project-info"},[a("div",{staticClass:"clearfix"},[a("div",{staticClass:"content-item"},[a("span",[t._v("操作人：")]),t._v(" "),a("span",[t._v(t._s(t.Form_project.drawPlanUser))])]),t._v(" "),a("div",{staticClass:"content-item"},[a("span",[t._v("操作时间：")]),t._v(" "),a("span",[t._v(t._s(t.Form_project.drawPlanTime))])]),t._v(" "),a("div",{staticClass:"content-item"},[a("span",[t._v("分配方案：")]),t._v(" "),a("span",[t._v(t._s(t.Form_project.allocationPlan))])]),t._v(" "),1===this.allocationPlan?a("div",{staticClass:"content-item"},[a("span",[t._v("选择方案：")]),t._v(" "),a("span",[t._v(t._s(t.Form_project.selectionPlanName))])]):t._e(),t._v(" "),2===t.Form_project.selectionPlan&&1===this.allocationPlan?a("div",{staticClass:"content-item"},[a("span",[t._v("方案名称：")]),t._v(" "),a("span",[t._v(t._s(t.Form_project.planName))])]):t._e()]),t._v(" "),1===this.allocationPlan?a("div",{staticClass:"room-distribute-table"},[a("div",{staticClass:"allocation-plan"},[a("div",{staticClass:"allocation-title"},[t._v("方案详情：")]),t._v(" "),a("table-component",{attrs:{tableData:t.distributeTableData,tableHeight:200}},[a("el-table-column",{attrs:{label:"序号",type:"index",width:"50",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"房间位置",prop:"position",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"房间面积(m²)",prop:"houseUseArea",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"原使用单位",prop:"oldUnitName",align:"center"}}),t._v(" "),2===t.Form_project.selectionPlan?a("el-table-column",{attrs:{label:"新使用单位",prop:"newUnitName",align:"center"}}):t._e()],1),t._v(" "),a("div",{staticClass:"distribution-table-pagination-box"},[a("div",{staticClass:"distribution-table-pagination"},[a("el-pagination",{attrs:{small:"",layout:"prev, pager, next","current-page":t.distributeCurrentPage,"page-size":t.distributePageSize,total:t.distributeTotal},on:{"current-change":t.distributeCurrentChange}})],1)])],1),t._v(" "),2===t.Form_project.selectionPlan?a("div",{staticClass:"allocation-statistics"},[a("div",{staticClass:"allocation-title"},[t._v("分配统计：")]),t._v(" "),a("table-component",{attrs:{tableData:t.distributeChangeList,tableHeight:200}},[a("el-table-column",{attrs:{label:"序号",type:"index",width:"50",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"单位名称",prop:"unitNames",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"房间数量",prop:"houseNumber",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"面积(m²)",prop:"useArea",align:"center"}})],1)],1):t._e()]):t._e()]):t._e(),t._v(" "),4===t.activeStep?a("div",{staticClass:"project-info"},[a("div",{staticClass:"clearfix"},[a("div",{staticClass:"content-item"},[a("span",[t._v("审批人：")]),t._v(" "),a("span",[t._v(t._s(t.Form_leader.leaderApprovalUser))])]),t._v(" "),a("div",{staticClass:"content-item"},[a("span",[t._v("审批时间：")]),t._v(" "),a("span",[t._v(t._s(t.Form_leader.leaderApprovalTime))])]),t._v(" "),a("div",{staticClass:"content-item"},[a("span",[t._v("审批结果：")]),t._v(" "),a("span",[t._v(t._s(t.Form_leader.auditState))])]),t._v(" "),a("div",{staticClass:"content-item"},[a("span",[t._v("审批意见：")]),t._v(" "),a("span",[t._v(t._s(t.Form_leader.comment))])])])]):t._e(),t._v(" "),5===t.activeStep?a("div",{staticClass:"project-info"},[a("div",{staticClass:"clearfix"},[a("div",{staticClass:"content-item"},[a("span",[t._v("审批人：")]),t._v(" "),a("span",[t._v(t._s(t.Form_addInfo.improvingDataUser))])]),t._v(" "),a("div",{staticClass:"content-item"},[a("span",[t._v("审批时间：")]),t._v(" "),a("span",[t._v(t._s(t.Form_addInfo.improvingDataTime))])]),t._v(" "),2===this.allocationPlan?a("div",{staticClass:"content-item"},[a("span",[t._v("补钱：")]),t._v(" "),a("span",[t._v(t._s(t.Form_addInfo.makeMoney)+"元")])]):t._e(),t._v(" "),2===this.allocationPlan?a("div",{staticClass:"content-item"},[a("span",[t._v("收益：")]),t._v(" "),a("span",[t._v(t._s(t.Form_addInfo.profit)+"元")])]):t._e(),t._v(" "),3===this.allocationPlan?a("div",{staticClass:"content-item"},[a("span",[t._v("付款周期：")]),t._v(" "),a("span",[t._v(t._s(t.Form_addInfo.rentalMode))])]):t._e(),t._v(" "),3===this.allocationPlan?a("div",{staticClass:"content-item"},[a("span",[t._v("租金：")]),t._v(" "),a("span",[t._v(t._s(t.Form_addInfo.rent)+"元")])]):t._e(),t._v(" "),3===this.allocationPlan?a("div",{staticClass:"content-item"},[a("span",[t._v("期限：")]),t._v(" "),a("span",[t._v(t._s(t.Form_addInfo.term)+"年")])]):t._e(),t._v(" "),4===this.allocationPlan?a("div",{staticClass:"content-item"},[a("span",[t._v("财政支出：")]),t._v(" "),a("span",[t._v(t._s(t.Form_addInfo.expenditure)+"元")])]):t._e(),t._v(" "),4===this.allocationPlan?a("div",{staticClass:"content-item"},[a("span",[t._v("项目名称：")]),t._v(" "),a("span",[t._v(t._s(t.Form_addInfo.projectName))])]):t._e(),t._v(" "),a("div",{staticClass:"content-item"},[a("span",[t._v("面积：")]),t._v(" "),a("span",[t._v(t._s(t.Form_addInfo.area)+"㎡")])])]),t._v(" "),t.Form_addInfo.improvingDataList.length>0?a("div",{staticClass:"download-box clearfix"},[a("div",{staticClass:"download-title"},[t._v("文件下载：")]),t._v(" "),a("div",{staticClass:"download-content"},[a("el-checkbox-group",{on:{change:t.handleCheckedImprovingChange},model:{value:t.improvingDownLoadCheckedList,callback:function(e){t.improvingDownLoadCheckedList=e},expression:"improvingDownLoadCheckedList"}},t._l(t.Form_addInfo.improvingDataList,function(e,i){return a("div",{key:i,staticClass:"file-download-item"},[a("el-checkbox",{attrs:{label:e.detail}},[t._v(t._s(e.improvingDrawingFileName))])],1)})),t._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){t.fileDownLoad(t.improvingCheckedList,2)}}},[t._v("点击下载")])],1)]):t._e(),t._v(" "),t.Form_addInfo.yardInfo.length>0?a("div",{staticClass:"yard-info-box"},[a("span",[t._v("院落信息：")]),t._v(" "),a("div",{staticClass:"yard-info-table"},[a("table-component",{attrs:{tableData:t.Form_addInfo.yardInfo,tableHeight:73}},[a("el-table-column",{attrs:{label:"院落名称",prop:"yardName",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"院落地址",prop:"yardPosition",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"经度(°)",prop:"yardLatitude",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"纬度(°)",prop:"yardLongitude",align:"center"}})],1)],1)]):t._e(),t._v(" "),a("div",{staticClass:"build-info-box"},[a("span",[t._v("楼座信息：")]),t._v(" "),a("div",{staticClass:"build-info-table"},[a("table-component",{attrs:{tableData:t.Form_addInfo.buildDetailDtoList,tableHeight:200}},[a("el-table-column",{attrs:{label:"序号",type:"index",width:"50",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"楼座名称",prop:"buildName",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"建筑面积(m²)",prop:"buildArea",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"建成时间",prop:"buildDate",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"经度(°)",prop:"buildLongitude",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"纬度(°)",prop:"buildLatitude",align:"center"}})],1)],1)])]):t._e()])])],1)},staticRenderFns:[]};var s=function(t){a("cjc2")},o=a("VU/8")(i.a,n,!1,s,null,null);e.default=o.exports},Asac:function(t,e,a){"use strict";(function(t){var i=a("fZjL"),n=a.n(i),s=a("d7EF"),o=a.n(s),r=a("W3Iv"),l=a.n(r),c=a("BO1k"),d=a.n(c),u=a("PVpU"),v=a("Oizb"),m=(a("yzMb"),a("uSev")),p=a("dO4M"),_=a("FAvH"),g=a("GR1E"),b=a("fYBn"),h=a("02tb"),f=a("5kkW"),C=a("3a1n"),D=a("Ya8g");a.n(D);e.a={components:{singleBtnGroup:p.a,tableBtnGroup:_.a,tablePagination:g.a,tableComponent:m.a,cancelBtn:b.a,confirmBtn:h.a,searchBtn:f.a,resetBtn:C.a},data:function(){return{userId:"",unitId:"",configureNo:"",startTime:"",endTime:"",currentPage:1,pageSize:15,total:0,loading:null,tableData:[],tableHeight:0,unitOptions:[],dialogVisible:!1,isShow:{initApplyDb:!1,financeApprovalDb:!1},baseInfoForm:{unitName:"",unitCharger:"",unitComplement:null,actualNumber:null,totalArea:null,PerCapitaArea:null,contactPhone:null,contacts:"",unitProperty:"",unitAddress:"",applyReason:"",enclosureList:[]},Form_unit:{unitReviewAuditState:"",elevatorsNumber:null,regionName:"",newUnitName:"",unitReviewUser:"",unitReviewTime:"",configureRoomList:[]},Form_project:{allocationPlan:null,drawPlanTime:"",drawPlanUser:"",selectionPlan:null,selectionPlanName:"",planId:null,planName:""},Form_leader:{auditState:"",comment:"",leaderApprovalTime:null,leaderApprovalUser:""},Form_addInfo:{improvingDataUser:"",improvingDataTime:null,improvingDataList:[],area:"",makeMoney:"",profit:"",rentalMode:"",rent:"",term:"",expenditure:"",projectName:"",buildDetailDtoList:[],yardInfo:[]},processStepList:[],activeStep:1,activeProcessId:"",distributeTableData:[],distributeCurrentPage:1,distributePageSize:10,distributeTotal:0,allocationPlan:null,fileDownLoadCheckedList:[],improvingDownLoadCheckedList:[],downloadCheckedList:[],improvingCheckedList:[],distributeChangeList:[],pickerOptions_start:{},pickerOptions_end:{}}},methods:{loadingStart:function(t){this.loading||(this.loading=this.$loading({lock:!0,text:"正在加载...",spinner:"el-icon-loading",target:t,customClass:"loading-box"}))},loadingEnd:function(){this.loading&&(this.loading.close(),this.loading=null)},changeSize:function(t){this.pageSize=t,this.getList()},changePage:function(t){this.currentPage=t,this.getList()},getList:function(){var t=this;this.loadingStart(".table-box"),Object(u.l)(this.currentPage,this.pageSize,this.configureNo,this.startTime,this.endTime,null,this.unitId).then(function(e){t.tableData=e.records,t.total=e.total,t.tableData.forEach(function(e){e.applyStatusText=t.getApplyStatus(e.applyStatus),e.totalArea||(e.totalArea="无"),e.actualNumber||(e.actualNumber="无")}),t.loadingEnd()}).catch(function(e){t.loadingEnd();var a=e.result?e.result:"配置查询列表获取失败";t.$message({message:a,type:"error"})})},getApplyStatus:function(t){switch(t){case 0:return"未审核";case 1:return"审核通过";case 2:return"审核未通过";case 3:return"审核中"}},search:function(){this.currentPage=1,this.getList()},reset:function(){this.currentPage=1,this.configureNo="",this.unitId="",this.startTime="",this.endTime="",this.getList()},singleDetail:function(t){var e=this;this.dialogVisible=!0,this.activeProcessId=t.configureId,this.allocationPlan=t.allocationPlan,Object(u.x)(t.configureId,t.step).then(function(a){a.shift(),a.length>0?e.activeStep=2:e.activeStep=1,1!==e.activeStep&&e.leaderReviewDetail(t.configureId,e.activeStep),e.processStepList=a}).catch(function(t){var a=t.result?t.result:"配置步骤获取失败";e.$message({message:a,type:"error"})}),Object(u.h)(t.configureId).then(function(t){var a=!0,i=!1,n=void 0;try{for(var s,r=d()(l()(t));!(a=(s=r.next()).done);a=!0){var c=s.value,u=o()(c,2),v=u[0],m=u[1];void 0!==e.baseInfoForm[v]&&(e.baseInfoForm[v]=m)}}catch(t){i=!0,n=t}finally{try{!a&&r.return&&r.return()}finally{if(i)throw n}}e.baseInfoForm.totalArea&&(0!==e.baseInfoForm.actualNumber&&(e.baseInfoForm.PerCapitaArea=(e.baseInfoForm.totalArea/e.baseInfoForm.actualNumber).toFixed(2),e.baseInfoForm.PerCapitaArea=e.baseInfoForm.PerCapitaArea+"m²"),e.baseInfoForm.totalArea=e.baseInfoForm.totalArea.toFixed(2),e.baseInfoForm.totalArea=e.baseInfoForm.totalArea+"m²")}).catch(function(t){var a=t.result?t.result:"配置申请基础数据获取失败";e.$message({message:a,type:"error"})}),Object(u.k)(t.configureId).then(function(t){var a=!0,i=!1,n=void 0;try{for(var s,r=d()(l()(t.configure));!(a=(s=r.next()).done);a=!0){var c=s.value,u=o()(c,2),v=u[0],m=u[1];void 0!==e.baseInfoForm[v]&&(e.baseInfoForm[v]=m||"暂无")}}catch(t){i=!0,n=t}finally{try{!a&&r.return&&r.return()}finally{if(i)throw n}}t.configureEnclosureList&&t.configureEnclosureList.length>0&&(t.configureEnclosureList.forEach(function(t){t.detail=t.enclosurePhysicsUrl+","+t.enclosureName}),e.baseInfoForm.enclosureList=t.configureEnclosureList)}).catch(function(t){var a=t.result?t.result:"配置详情获取失败";e.$message({message:a,type:"error"})})},distributeCurrentChange:function(t){this.distributeCurrentPage=t,1===this.Form_project.selectionPlan?this.getPlanDataDetail():this.getSchemeDataDetail()},getPlanDataDetail:function(){var t=this;Object(u.q)(this.distributeCurrentPage,this.distributePageSize,this.activeProcessId).then(function(e){t.distributeTotal=e.total,t.distributeTableData=e.records[0].planDataDtoList,t.distributeTableData.forEach(function(t){t.position=t.yardName+"-"+t.buildName+"-"+t.houseNumber,t.oldUnitNameList&&t.oldUnitNameList.length>0?t.oldUnitName=t.oldUnitNameList.join(","):t.oldUnitName="无"})}).catch(function(e){var a=e.result?e.result:"房间分配方案数据获取失败";t.$message({message:a,type:"error"})})},getSchemeName:function(){var t=this;Object(u.s)(this.activeProcessId).then(function(e){t.Form_project.planName=e}).catch(function(e){var a=e.result?e.result:"方案名称获取失败";t.$message({message:a,type:"error"})})},getSchemeDataDetail:function(){var t=this;Object(u.e)(this.distributeCurrentPage,this.distributePageSize,this.Form_project.planId).then(function(e){t.distributeTotal=e.total,t.distributeTableData=e.records,t.distributeTableData.forEach(function(t){var e=[],a=[];t.position=t.yardName+"-"+t.buildName+"-"+t.houseNumber,t.newUnitList.forEach(function(t){0!==t.newUnitId&&a.push(t.newUnitName)}),t.oldUnitList.forEach(function(t){0!==t.oldUnitId&&e.push(t.oldUnitName)}),t.oldUnitName=e.join(","),t.newUnitName=a.join(",")})}).catch(function(e){var a=e.result?e.result:"该方案房间信息获取失败";t.$message({message:a,type:"error"})})},getUserUnitDic:function(){var t=this;Object(v.l)().then(function(e){t.unitOptions=e}).catch(function(e){var a=e.result?e.result:"单位下拉选项获取失败";t.$message({message:a,type:"error"})})},changeProcess:function(t){this.activeStep=t,this.fileDownLoadCheckedList=[],this.improvingDownLoadCheckedList=[],this.leaderReviewDetail(this.activeProcessId,t)},getReviewAuditState:function(t){if(2===this.activeStep)switch(t){case 1:return"同意申请";case 2:return"不同意申请"}else if(3===this.activeStep)switch(t){case 1:return"调剂";case 2:return"置换";case 3:return"租用";case 4:return"建设"}},leaderReviewDetail:function(t,e){var a=this;Object(u.u)(t,e).then(function(t){2===e?(a.Form_unit.unitReviewAuditState=a.getReviewAuditState(t.documentList[0].unitReviewDb.unitReviewAuditState),a.Form_unit.elevatorsNumber=t.elevatorsNumber,a.Form_unit.regionName=t.regionList.join(","),a.Form_unit.newUnitName=t.newUnitName||"",a.Form_unit.unitReviewTime=t.documentList[0].unitReviewDb.unitReviewTime,a.Form_unit.unitReviewUser=t.documentList[0].unitReviewDb.unitReviewUser,t.configureRoomList.forEach(function(t){t.roomAreaRange=t.roomAreaMin+"(m²)-"+t.roomAreaMax+"(m²)"}),a.Form_unit.configureRoomList=t.configureRoomList):3===e?(a.allocationPlan=t.allocationPlan,a.Form_project.allocationPlan=a.getReviewAuditState(t.allocationPlan),a.Form_project.drawPlanTime=t.documentList[0].drawPlanDb.drawPlanTime,a.Form_project.drawPlanUser=t.documentList[0].drawPlanDb.drawPlanUser,a.Form_project.selectionPlan=t.selectionPlan,a.Form_project.selectionPlanName=1===t.selectionPlan?"智能分配":"人工分配",a.Form_project.planId=t.planId,1===t.allocationPlan&&(1===t.selectionPlan?a.getPlanDataDetail():(a.getSchemeDataDetail(),a.getSchemeName(),a.getChangeData(t.planId)))):4===e?(a.Form_leader.leaderApprovalTime=t.documentList[0].leaderApprovalDb.leaderApprovalTime,a.Form_leader.leaderApprovalUser=t.documentList[0].leaderApprovalDb.leaderApprovalUser,a.Form_leader.auditState=1===t.documentList[0].leaderApprovalDb.ldaAuditState?"同意":"不同意",a.Form_leader.comment=t.documentList[0].leaderApprovalDb.ldaComment||"暂无"):5===e&&(t.buildDetailDtoList.forEach(function(t){t.buildDate=a.formatDate(t.buildDate)}),a.Form_addInfo.improvingDataUser=t.documentList[0].improvingDataDb.improvingDataUser,a.Form_addInfo.improvingDataTime=t.documentList[0].improvingDataDb.improvingDataTime,a.Form_addInfo.buildDetailDtoList=t.buildDetailDtoList,a.Form_addInfo.makeMoney=t.documentList[0].improvingDataDb.improvingDataRRC.makeMoney||"",a.Form_addInfo.profit=t.documentList[0].improvingDataDb.improvingDataRRC.profit||"",a.Form_addInfo.rentalMode=t.documentList[0].improvingDataDb.improvingDataRRC.rentalMode||"",a.Form_addInfo.rent=t.documentList[0].improvingDataDb.improvingDataRRC.rent||"",a.Form_addInfo.term=t.documentList[0].improvingDataDb.improvingDataRRC.term||"",a.Form_addInfo.expenditure=t.documentList[0].improvingDataDb.improvingDataRRC.expenditure||"",a.Form_addInfo.improvingDataList=t.documentList[0].improvingDataDb.improvingDataRRC.improvingDataList||[],a.Form_addInfo.projectName=t.documentList[0].improvingDataDb.improvingDataRRC.projectName||"",a.Form_addInfo.area=t.documentList[0].improvingDataDb.improvingDataRRC.area||"",a.Form_addInfo.improvingDataList.length>0&&a.Form_addInfo.improvingDataList.forEach(function(t){t.detail=t.improvingDrawingUrl+","+t.improvingDrawingFileName}),t.yard&&(a.Form_addInfo.yardInfo=[],a.Form_addInfo.yardInfo.push(t.yard)))}).catch(function(t){var e=t.result?t.result:"配置详情获取失败";a.$message({message:e,type:"error"})})},getChangeData:function(t){var e=this;Object(u.i)(t).then(function(t){t&&(e.distributeChangeList=t)}).catch(function(t){var a=t.result?t.result:"分配统计数据获取失败";e.$message({message:a,type:"error"})})},clearForm:function(t){for(var e in t){var a=this.getDataType(t[e]);if("String"===a)t[e]="";else if("Array"===a)t[e]=[];else if("Object"===a){n()(t[e]).length>0?this.clearForm(t[e]):t[e]={}}else t[e]=null}},dialogClosed:function(){this.activeStep=2,this.activeProcessId="",this.processStepList=[],this.distributeTableData=[],this.distributeCurrentPage=1,this.distributeTotal=0,this.allocationPlan=null,this.fileDownLoadCheckedList=[],this.improvingDownLoadCheckedList=[],this.downloadCheckedList=[],this.improvingCheckedList=[],this.distributeChangeList=[],this.clearForm(this.baseInfoForm),this.clearForm(this.Form_unit),this.clearForm(this.Form_leader)},getDataType:function(t){var e=!0,a=!1,i=void 0;try{for(var n,s=d()(["String","Object","Number","Array","Function"]);!(e=(n=s.next()).done);e=!0){var o=n.value;if(Object.prototype.toString.call(t)==="[object "+o+"]")return o}}catch(t){a=!0,i=t}finally{try{!e&&s.return&&s.return()}finally{if(a)throw i}}},fileDownLoad:function(t,e){var i=this;if(t&&0!==t.length){var n={};n.addressList=t,n.configureId=this.activeProcessId,n.downLoadType=e,Object(u.d)(n).then(function(t){a("3UNf")(t,decodeURIComponent(sessionStorage.getItem("CADdownloadFileName")))}).catch(function(t){var e=t.result?t.result:"文件下载失败";i.$message({message:e,type:"error"})})}else this.$message({message:"请先选择一个文件",type:"warning"})},handleCheckedFileChange:function(t){var e=this;this.downloadCheckedList=[],this.fileDownLoadCheckedList.forEach(function(t){var a=t.split(","),i={address:a[0],fileName:a[1]};e.downloadCheckedList.push(i)})},handleCheckedImprovingChange:function(t){var e=this;this.improvingCheckedList=[],this.improvingDownLoadCheckedList.forEach(function(t){var a=t.split(","),i={address:a[0],fileName:a[1]};e.improvingCheckedList.push(i)})},formatDate:function(t,e){var a=new Date(t),i=e||"yyyy-MM-dd",n={"M+":a.getMonth()+1,"d+":a.getDate(),"h+":a.getHours(),"m+":a.getMinutes(),"s+":a.getSeconds(),"q+":Math.floor((a.getMonth()+3)/3),S:a.getMilliseconds()};for(var s in/(y+)/.test(i)&&(i=i.replace(RegExp.$1,(a.getFullYear()+"").substr(4-RegExp.$1.length))),n)new RegExp("("+s+")").test(i)&&(i=i.replace(RegExp.$1,1==RegExp.$1.length?n[s]:("00"+n[s]).substr((""+n[s]).length)));return i}},mounted:function(){var e=this;this.userId=sessionStorage.getItem("userId"),this.getList(),this.getUserUnitDic(),setTimeout(function(){var a=t("#mainDiv").height(),i=t("#queryBox").outerHeight(!0),n=t("#operateBox").height();e.tableHeight=a-i-n},1),this.pickerOptions_start.disabledDate=function(t){if(e.endTime)return new Date(e.endTime).getTime()<t.getTime()},this.pickerOptions_end.disabledDate=function(t){if(e.startTime)return new Date(e.startTime).getTime()>t.getTime()}}}}).call(e,a("7t+N"))},Ya8g:function(t,e){},cjc2:function(t,e){}});
//# sourceMappingURL=23.aca3f801b39c16e94e83.js.map