webpackJsonp([6],{"4z37":function(e,t){},A1Or:function(e,t,i){"use strict";(function(e){var a=i("BO1k"),r=i.n(a),s=i("fZjL"),n=i.n(s),o=i("HI+P"),l=i("zu8U"),d=(i("Oizb"),i("yzMb")),c=i("uSev"),m=i("dO4M"),u=i("FAvH"),p=i("GR1E"),h=i("WHmA"),f=i("nZqf"),v=i("fYBn"),g=i("02tb"),b=i("OMeO"),y=i("AzYH"),_=i("5kkW"),x=i("3a1n"),I=i("d8Sk"),F=i("OMJi");i.n(F);t.a={components:{singleBtnGroup:m.a,tableBtnGroup:u.a,tablePagination:p.a,tableComponent:c.a,cancelBtn:v.a,confirmBtn:g.a,searchBtn:_.a,ignoreBtn:b.a,dealBtn:y.a,resetBtn:x.a,temporaryDealBtn:I.a,TreeSelect:f.a,treeSelect:h.a},data:function(){return{activeInfo:0,radio:1,remaid:"",userUnit:[],unitIdList:"",unitOptions:[],repairPartsId:"",repairPartsOpts:[],currentPage:1,pageSize:15,total:1,loading:null,tableHeight:0,selectData:[],tableData:[],dialogTitle:"",operateType:"add",dialogVisible:!1,dialogVisibles:{add:!1,remind:!1},ignoreDialogVisible:!1,handleOption:[{text:"未提醒",id:1},{text:"忽略",id:2},{text:"处理",id:3}],treeName:"selectTree2",Form:{contactPhone:"",responsiblePerson:"",repairPart:"",remaindTime:"",yardId:0,yardName:"",buildId:0,buildName:"",floorname:"",floorName:0,houseId:"",houseName:"",repairGoods:"",remaindRemark:"",repairAddress:""},form:{yardId:null,buildId:null,floorName:null,houseId:null},RemindTimeForm:{repairRemind:"",remaindTime:"",remaindHandle:2},treeId:{},currentLevel:null,treeShow:!1,uersUnit:"",repairInfoMore:[],repairUnitName:"",repairPhone:"",repairQualityDate:"",lastRepairTime:"",baseInfo:{position:"",unitNameList:"",responsiblePerson:"",contactPhone:"",repairPartName:"",remaindTime:"",remaindHandle:""},remaindTime:"",oldRemaindTime:"",edit:!0,repairPositionTarget:"",completionTime:"",repairModulePosition:"",repairePartName:"",repairPartQuality:"",repairUnitNameList:"",repairRemind:"",remaidOpts:[{id:null,name:"全部"},{id:0,name:"不提醒"},{id:1,name:"提醒"}],state:!0,rules:{remaindTime:[{required:!0,message:"提醒时间不能为空",trigger:"blur"}],responsiblePerson:[{required:!0,message:"负责人不能为空",trigger:"blur"}],repairPart:[{required:!0,message:"维修部位不能为空",trigger:"blur"}],repairAddress:[{required:!0,message:"具体方位不能为空",trigger:"blur"}]}}},watch:{$route:{handler:function(e,t){sessionStorage.removeItem("repairRemind_buildId")},immediate:!1}},created:function(){this.treeShows=!0,this.getUnit(),this.getRepairPartsList(),this.getList()},methods:{loadingStart:function(e){this.loading||(this.loading=this.$loading({lock:!0,text:"正在加载...",spinner:"el-icon-loading",target:e,customClass:"loading-box"}))},loadingEnd:function(){this.loading&&(this.loading.close(),this.loading=null)},getRepairPartsList:function(){var e=this;Object(o.u)().then(function(t){e.repairPartsOpts=t}).catch(function(t){var i=t.result?t.result:"获取维修部位信息列表失败";e.$message({message:i,type:"error"})})},getUnit:function(){var e=this;Object(o.z)().then(function(t){e.unitOptions=t})},changeSize:function(e){this.currentPage=1,this.pageSize=e,this.getList()},changePage:function(e){this.currentPage=e,this.getList()},getList:function(){var e=this;this.loadingStart(".table-box"),Object(o.y)(this.currentPage,this.pageSize,this.form,this.unitIdList,this.remaid).then(function(t){t.records.forEach(function(t){e.repairPartsOpts.forEach(function(e){t.repairPart==e.repairPartsId&&(t.repairParts=e.repairPartName)})}),t.records.forEach(function(e){e.remaindTime&&-1!=e.remaindTime.indexOf(" 00:00:00")&&(e.remaindTime=e.remaindTime.split(" 00:00:00")[0]),e.lastRepairTime&&e.lastRepairTime.indexOf(" 00:00:00")&&(e.lastRepairTime=e.lastRepairTime.split(" 00:00:00")[0])}),e.total=t.total,e.tableData=t.records,e.loadingEnd()}).catch(function(t){var i=t.result?t.result:"获取维修提醒列表失败";e.$message({message:i,type:"error"}),e.loadingEnd()})},getRepaireList:function(){},search:function(){this.currentPage=1,this.getList()},reset:function(){this.clearForm(this.form),this.currentPage=1,this.unitIdList="",this.remaid="",this.search(),this.$nextTick(function(){d.a.$emit("ClearTreeSelectVal")})},add:function(){this.dialogVisibles.add=!0,this.operateType="add",this.treeShow=!0},batchDelete:function(){var e=this,t=[];this.selectData.forEach(function(e){t.push(e.repairRemind)}),t.length>0?this.$confirm("此操作将永久删除该维修提醒信息, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(o.e)(t).then(function(t){e.$message({message:"批量删除维修提醒信息成功!",type:"success"}),e.currentPage=1,e.getList()}).catch(function(t){var i=t.result?t.result:"批量删除维修提醒信息失败";e.$message({message:i,type:"error"})})}).catch(function(){e.$message({type:"info",message:"已取消删除"})}):this.$message({message:"请选择需要删除的维修提醒",type:"info"})},singleDetle:function(e){var t=this;this.$confirm("此操作将永久删除该维修提醒信息, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(o.h)(e.repairRemind).then(function(e){t.$message({message:"删除维修提醒信息成功!",type:"success"}),t.currentPage=1,t.getList(),d.a.$emit("updateRemindTips")}).catch(function(e){var i=e.result?e.result:"删除维修提醒信息失败";t.$message({message:i,type:"error"})})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},getRepairRemindDetail:function(e){var t=this;Object(o.F)(e).then(function(e){if(0!=e.length){t.baseInfo.contactPhone=e.contactPhone,t.baseInfo.position=e.position,t.baseInfo.repairPartName=e.repairPartName,t.baseInfo.responsiblePerson=e.responsiblePerson,t.baseInfo.unitNameList=e.unitNameList.join(","),t.baseInfo.remaindHandle=["未提醒","忽略","处理"][e.remaindHandle-1],t.baseInfo.repairGoods=e.repairGoods,t.baseInfo.remaindRemark=e.remaind_remark,t.remaindTime=e.remaindTime,t.oldRemaindTime=e.remaindTime}}).catch(function(e){var i=e.result?e.result:"获取维修基本信息失败";t.$message({message:i,type:"error"})})},getSelectRepairRemind:function(e){var t=this;Object(o.E)(e).then(function(e){0==e.length&&(t.state=!1),0!=e.length&&(e.forEach(function(e){-1!=e.completionTime.indexOf(" 00:00:00")&&(e.completionTime=e.completionTime.split(" 00:00:00")[0])}),t.repairInfoMore=e,t.repairPositionTarget=e[0].positionStr,t.completionTime=e[0].completionTime,t.repairePartName=e[0].repairPartName,t.repairPartQuality=e[0].repairPartQuality,t.repairUnitNameList=e[0].repairUnitNameList?e[0].repairUnitNameList.join(","):"",t.responsiblePerson=e[0].responsiblePerson)}).catch(function(e){var i=e.result?e.result:"获取相关维修记录失败";t.$message({message:i,type:"error"})})},remindClick:function(e){this.dialogVisibles.remind=!0,this.repairRemind=e.repairRemind,this.getRepairRemindDetail(this.repairRemind),this.getSelectRepairRemind(e)},handleCommand:function(e){var t=this;this.activeInfo=e,this.repairInfoMore.forEach(function(i,a){a==e&&(t.repairPositionTarget=i.positionStr,t.completionTime=i.completionTime,t.repairePartName=i.repairPartName,t.repairPartQuality=i.repairPartQuality,t.repairUnitNameList=i.repairUnitNameList.length>0?i.repairUnitNameList.join(","):"",t.responsiblePerson=i.responsiblePerson)})},submitForm:function(e){var t=this;1===this.currentLevel?(this.Form.buildId=null,this.Form.floorName=null,this.Form.houseId=null):2===this.currentLevel?(this.Form.floorName=null,this.Form.houseId=null):3===this.currentLevel?this.Form.houseId=null:(this.Form.yardId=null,this.Form.buildId=null,this.Form.floorName=null,this.Form.houseId=null),this.$refs[e].validate(function(e){if(!e)return!1;"edit"===t.operateType&&delete t.Form.password,Object(o.C)(t.Form).then(function(e){t.$message({message:"提醒成功",type:"success"}),t.dialogVisible=!1,t.getList(),d.a.$emit("updateRemindTips"),void 0===t.Form.password&&(t.Form.password="")}).catch(function(e){var i=e.result?e.result:"提醒失败";t.$message({message:i,type:"error"})})})},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.Form.clearValidate()})},Open:function(){var e=this;this.$nextTick(function(){e.$refs.Form.clearValidate()})},dialogClosed:function(){for(var e in this.activeInfo=0,this.Form){var t=this.getDataType(this.Form[e]);this.Form[e]="String"===t?"":"Array"===t?[]:"Object"===t?{}:null}this.userUnit=[],this.treeShow=!1,this.edit=!0,this.contactPhone="",this.position="",this.remaindTime="",this.repairPartName="",this.responsiblePerson="",this.unitNameList="",this.remaindTime="",this.oldRemaindTime="",this.repairPositionTarget="",this.completionTime="",this.repairPartName="",this.repairPartQuality="",this.repairUnitNameList="",this.responsiblePerson="",this.repairRemind="",this.repairInfoMore=[],this.state=!0,this.radio=1},Closed:function(){for(var e in this.Form){var t=this.getDataType(this.Form[e]);this.Form[e]="String"===t?"":"Array"===t?[]:"Object"===t?{}:null}this.userUnit=[],this.treeShow=!1,this.edit=!0,d.a.$emit("clearTreeSelectVal"),this.radio=1},radioChange:function(e){this.radio=e,1==e&&(this.edit=!0)},clearForm:function(e){for(var t in e){var i=this.getDataType(e[t]);if("String"===i)e[t]="";else if("Array"===i)e[t]=[];else if("Object"===i){n()(e[t]).length>0?this.clearForm(e[t]):e[t]={}}else e[t]=null}},getDataType:function(e){var t=!0,i=!1,a=void 0;try{for(var s,n=r()(["String","Object","Number","Array","Function"]);!(t=(s=n.next()).done);t=!0){var o=s.value;if(Object.prototype.toString.call(e)==="[object "+o+"]")return o}}catch(e){i=!0,a=e}finally{try{!t&&n.return&&n.return()}finally{if(i)throw a}}},limitFloat:function(e,t){this.Form[e]=this.Form[e].replace(/[^\d.]/g,"").replace(/\.{2,}/g,".").replace(".","$#$").replace(/\./g,"").replace("$#$",".").replace(/^(\-)*(\d+)\.(\d\d).*$/,"$1$2.$3").replace(/^\./g,""),t&&(this.Form[e]=(this.Form[e]-0).toFixed(2))},limitInt:function(e,t){this.Form[e]=this.Form[e].replace(/[^0-9]/g,"")},formatDate:function(e){var t=new Date(e),i="yyyy-MM-dd hh:mm:ss",a={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()};for(var r in/(y+)/.test(i)&&(i=i.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length))),a)new RegExp("("+r+")").test(i)&&(i=i.replace(RegExp.$1,1==RegExp.$1.length?a[r]:("00"+a[r]).substr((""+a[r]).length)));return i},submitIgnoreForm:function(e){var t=this;this.$refs[e].validate(function(e){if(t.submitFlag=!0,!e)return!1;t.repairPartsOpts.forEach(function(e){t.Form.repairPart==e.repairPartsId&&(t.Form.repairParts=e.repairPartName)}),Object(o.d)(t.Form,t.userUnit).then(function(e){t.$message({message:"添加成功",type:"success"}),t.dialogVisibles.add=!1,t.tableData.unshift(t.Form),t.getList(),d.a.$emit("updateRemindTips")}).catch(function(e){var i=e.result?e.result:"添加失败";t.$message({message:i,type:"error"})})})},submit:function(){1==this.radio?this.submitRemind():this.temporaryDeal()},submitRemind:function(){var e=this;this.remaindTime?new Date(this.remaindTime).valueOf()>=new Date(this.oldRemaindTime).valueOf()?Object(o.I)(this.remaindTime,this.repairRemind).then(function(t){e.dialogVisibles.remind=!1,e.getList(),d.a.$emit("updateRemindTips")}).catch(function(t){var i=t.result?t.result:"修改提醒时间失败";e.$message({message:i,type:"error"})}):this.$message({message:"修改提醒的时间不能提前与当前的提醒时间",type:"info"}):this.$message({message:"请填写大于当前的提醒时间",type:"info"})},handleSelectionChange:function(e){this.selectData=e},deal:function(){this.dialogVisibles.remind=!1,this.selectData.length>0?(this.$store.commit("getRepaireList",this.selectData),this.$router.push({path:"repairApply"})):this.$message({type:"info",message:"请选择需处理的维修提醒"})},temporaryDeal:function(){var e=this;Object(o.B)(this.repairRemind).then(function(t){e.getList(),d.a.$emit("updateRemindTips"),e.dialogVisibles.remind=!1}).catch(function(t){var i=t.result?t.result:"暂不提醒失败失败";e.$message({message:i,type:"error"})})},loadNode:function(e,t){var i=this;if(0===e.level)Object(l.g)(null,0,null).then(function(e){return e.forEach(function(e){e.expand&&void 0!==e.expand||(e.leaf=!0)}),t(e)}).catch(function(e){var t=e.result?e.result:"树获取失败";i.$message({message:t,type:"error"})}),setTimeout(function(){if(!i.Form.yardId||i.Form.buildId||i.Form.floorName||i.Form.houseId){if(i.Form.yardId&&i.Form.buildId&&!i.Form.floorName&&!i.Form.houseId){var e={level:2};e.id_yard=i.Form.yardId,e.id_build=i.Form.yardId+":"+i.Form.buildId,d.a.$emit("setTreeDefaultVal",e)}else if(i.Form.yardId&&i.Form.buildId&&i.Form.floorName&&!i.Form.houseId){var t={level:3};t.id_yard=i.Form.yardId,t.id_build=i.Form.yardId+":"+i.Form.buildId,t.buildId=i.Form.buildId,t.id_floor=i.Form.yardId+":"+i.Form.buildId+":"+i.Form.floorName,d.a.$emit("setTreeDefaultVal",t)}else if(i.Form.yardId&&i.Form.buildId&&i.Form.floorName&&i.Form.houseId){var a={level:4};a.id_yard=i.Form.yardId,a.id_build=i.Form.yardId+":"+i.Form.buildId,a.id_floor=i.Form.yardId+":"+i.Form.buildId+":"+i.Form.floorName,a.floorName=i.Form.floorName,a.id_house=i.Form.houseId,d.a.$emit("setTreeDefaultVal",a)}}else{var r={level:1};r.id_yard=i.Form.yardId,d.a.$emit("setTreeDefaultVal",r)}},1e3);else if(3===e.level){var a=sessionStorage.getItem("repairRemind_buildId")-0;Object(l.g)(e.data.value,3,null,a).then(function(e){return e.forEach(function(e){e.expand&&void 0!==e.expand||(e.leaf=!0)}),t(e)}).catch(function(e){var t=e.result?e.result:"树获取失败";i.$message({message:t,type:"error"})})}else Object(l.g)(e.data.value,e.data.type,null).then(function(e){return e.forEach(function(e){e.expand&&void 0!==e.expand||(e.leaf=!0)}),t(e)}).catch(function(e){var t=e.result?e.result:"树获取失败";i.$message({message:t,type:"error"})})},loadNodes:function(e,t){var i=this;if(0===e.level)Object(l.g)(null,0,null).then(function(e){return e.forEach(function(e){e.expand&&void 0!==e.expand||(e.leaf=!0)}),t(e)}).catch(function(e){var t=e.result?e.result:"树获取失败";i.$message({message:t,type:"error"})}),setTimeout(function(){if(!i.form.yardId||i.form.buildId||i.form.floorName||i.form.houseId){if(i.form.yardId&&i.form.buildId&&!i.form.floorName&&!i.form.houseId){var e={level:2};e.id_yard=i.form.yardId,e.id_build=i.form.yardId+":"+i.form.buildId,d.a.$emit("setTreeDefaultVal",e)}else if(i.form.yardId&&i.form.buildId&&i.form.floorName&&!i.form.houseId){var t={level:3};t.id_yard=i.form.yardId,t.id_build=i.form.yardId+":"+i.form.buildId,t.buildId=i.form.buildId,t.id_floor=i.form.yardId+":"+i.form.buildId+":"+i.form.floorName,d.a.$emit("setTreeDefaultVal",t)}else if(i.form.yardId&&i.form.buildId&&i.form.floorName&&i.form.houseId){var a={level:4};a.id_yard=i.form.yardId,a.id_build=i.form.yardId+":"+i.form.buildId,a.id_floor=i.form.yardId+":"+i.form.buildId+":"+i.form.floorName,a.floorName=i.form.floorName,a.id_house=i.form.houseId,d.a.$emit("setTreeDefaultVal",a)}}else{var r={level:1};r.id_yard=i.form.yardId,d.a.$emit("setTreeDefaultVal",r)}},1e3);else if(3===e.level){var a=sessionStorage.getItem("repairRemind_buildId")-0;Object(l.g)(e.data.value,3,null,a).then(function(e){return e.forEach(function(e){e.expand&&void 0!==e.expand||(e.leaf=!0)}),t(e)}).catch(function(e){var t=e.result?e.result:"树获取失败";i.$message({message:t,type:"error"})})}else Object(l.g)(e.data.value,e.data.type,null).then(function(e){return e.forEach(function(e){e.expand&&void 0!==e.expand||(e.leaf=!0)}),t(e)}).catch(function(e){var t=e.result?e.result:"树获取失败";i.$message({message:t,type:"error"})})},handleCheckChange:function(e){e.address&&(this.Form.repairAddress="true",this.$refs.Form.clearValidate(["repairAddress"])),this.currentLevel=e.type,1===e.type?(this.Form.yardId=e.value,this.Form.yardName=e.text):2===e.type?(this.Form.yardName=e.address.split("-")[0],this.Form.yardId=e.id.split(":")[0],this.Form.buildId=e.value,this.Form.buildName=e.text):3===e.type?(this.Form.yardName=e.address.split("-")[0],this.Form.buildName=e.address.split("-")[1],this.Form.yardId=e.id.split(":")[0],this.Form.buildId=e.id.split(":")[1],this.Form.floorName=e.value,this.Form.floorname=e.text):(this.Form.yardName=e.address.split("-")[0],this.Form.buildName=e.address.split("-")[1],this.Form.floorname=e.address.split("-")[2],this.Form.yardId=e._id.split(":")[0],this.Form.buildId=e._id.split(":")[1],this.Form.floorName=e._id.split(":")[2],this.Form.houseId=e.value,this.Form.houseName=e.text),this.Form.position=e.address},handleCheckChanges:function(e){this.currentLevel=e.type,1===e.type?this.form.yardId=e.value:2===e.type?this.form.buildId=e.value:3===e.type?this.form.floorName=e.value:this.form.houseId=e.value},handleNodeExpand:function(e,t){1===t.level?this.Form.yardId=e.value:2===t.level?(this.Form.buildId=e.value,sessionStorage.setItem("repairRemind_buildId",e.value)):3===t.level&&(this.Form.floorName=e.value)},handleNodeExpands:function(e,t){1===t.level?this.form.yardId=e.value:2===t.level?this.form.buildId=e.value:3===t.level&&(this.form.floorName=e.value)},Edit:function(){this.edit=!1}},mounted:function(){var t=this;setTimeout(function(){var i=e("#mainDiv").height(),a=e("#queryBox").outerHeight(!0),r=e("#operateBox").height();t.tableHeight=i-a-r},1)}}}).call(t,i("7t+N"))},AzYH:function(e,t,i){"use strict";var a={props:{text:{type:String,default:"处理"},padding:{type:String,default:"7px 22px"},fontSize:{type:Number,default:16},marginLeft:{type:Number,default:120}},data:function(){return{style:{padding:this.padding,"font-size":this.fontSize+"px","margin-left":this.marginLeft+"px"}}},directives:{debounce:{inserted:function(e,t){var i=void 0;e.addEventListener("click",function(){i&&clearTimeout(i),i=setTimeout(function(){t.value()},300)})}}},methods:{clickBtn:function(){this.$emit("clickBtn")}}},r={render:function(){var e=this.$createElement;return(this._self._c||e)("el-button",{directives:[{name:"debounce",rawName:"v-debounce",value:this.clickBtn,expression:"clickBtn"}],staticClass:"deal-btn",style:this.style,attrs:{type:"primary",size:"medium"}},[this._v(this._s(this.text))])},staticRenderFns:[]},s=i("VU/8")(a,r,!1,null,null,null);t.a=s.exports},OMeO:function(e,t,i){"use strict";var a={props:{text:{type:String,default:"忽略"},padding:{type:String,default:"7px 22px"},fontSize:{type:Number,default:16},marginLeft:{type:Number,default:120}},data:function(){return{style:{padding:this.padding,"font-size":this.fontSize+"px","margin-left":this.marginLeft+"px"}}},directives:{debounce:{inserted:function(e,t){var i=void 0;e.addEventListener("click",function(){i&&clearTimeout(i),i=setTimeout(function(){t.value()},300)})}}},methods:{clickBtn:function(){this.$emit("clickBtn")}}},r={render:function(){var e=this.$createElement;return(this._self._c||e)("el-button",{directives:[{name:"debounce",rawName:"v-debounce",value:this.clickBtn,expression:"clickBtn"}],staticClass:"ignore-btn",style:this.style,attrs:{type:"primary",size:"medium"}},[this._v(this._s(this.text))])},staticRenderFns:[]},s=i("VU/8")(a,r,!1,null,null,null);t.a=s.exports},Yhp0:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("A1Or"),r={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"serviceRemind"}},[i("div",{staticClass:"query-box",attrs:{id:"queryBox"}},[i("div",{staticClass:"clearfix"},[i("div",{staticClass:"query-item"},[i("div",{staticClass:"query-title"},[e._v("使用单位：")]),e._v(" "),i("div",{staticClass:"query-input"},[i("el-select",{attrs:{placeholder:"请选择使用单位"},model:{value:e.unitIdList,callback:function(t){e.unitIdList=t},expression:"unitIdList"}},e._l(e.unitOptions,function(e){return i("el-option",{key:e.unitId,attrs:{label:e.unitName,value:e.unitId}})}))],1)]),e._v(" "),i("div",{staticClass:"query-item"},[i("div",{staticClass:"query-title"},[e._v("具体方位：")]),e._v(" "),i("div",{staticClass:"query-input"},[i("Tree-select",{staticStyle:{"font-size":"14px"},attrs:{treeShow:e.treeShows,inputHeight:"34px"},on:{loadNodes:e.loadNodes,handleCheckChanges:e.handleCheckChanges,handleNodeExpands:e.handleNodeExpands}})],1)]),e._v(" "),i("div",{staticClass:"query-item"},[i("div",{staticClass:"query-title"},[e._v("提醒状态：")]),e._v(" "),i("div",{staticClass:"query-input"},[i("el-select",{attrs:{placeholder:"请选择提醒状态"},model:{value:e.remaid,callback:function(t){e.remaid=t},expression:"remaid"}},e._l(e.remaidOpts,function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)]),e._v(" "),i("div",{staticClass:"query-btn"},[i("search-btn",{on:{clickBtn:e.search}}),e._v(" "),i("reset-btn",{on:{clickBtn:e.reset}})],1)])]),e._v(" "),i("div",{staticClass:"table-box"},[i("table-component",{attrs:{tableData:e.tableData,tableHeight:e.tableHeight},on:{select:e.handleSelectionChange}},[i("el-table-column",{attrs:{type:"selection",width:"50",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{label:"具体方位",align:"center",prop:"position","show-overflow-tooltip":!0}}),e._v(" "),i("el-table-column",{attrs:{prop:"responsiblePerson",label:"负责人",align:"center","show-overflow-tooltip":!0}}),e._v(" "),i("el-table-column",{attrs:{prop:"repairParts",label:"维修部位",align:"center","show-overflow-tooltip":!0}}),e._v(" "),i("el-table-column",{attrs:{prop:"contactPhone",label:"联系方式",align:"center","show-overflow-tooltip":!0}}),e._v(" "),i("el-table-column",{attrs:{prop:"lastRepairTime",label:"上次维修时间",align:"center","show-overflow-tooltip":!0}}),e._v(" "),i("el-table-column",{attrs:{label:"提醒时间",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",{class:{warning:1==t.row.remindState}},[i("span",[e._v(e._s(t.row.remaindTime))])])]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"操作",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("single-btn-group",{attrs:{isShowAlter:!1,isShowRemind:!0},on:{remindClick:function(i){e.remindClick(t.row)},deleteClick:function(i){e.singleDetle(t.row)}}})]}}])})],1),e._v(" "),i("div",{staticClass:"table-operate-box",attrs:{id:"operateBox"}},[i("div",{staticClass:"operate-btn"},[i("table-btn-group",{attrs:{dealBtnShow:!0},on:{batchDeleteClick:e.batchDelete,addClick:e.add,dealClick:e.deal}})],1),e._v(" "),i("div",{staticClass:"operate-pager"},[i("table-pagination",{attrs:{currentPage:e.currentPage,pageSize:e.pageSize,total:e.total},on:{"size-change":e.changeSize,"page-change":e.changePage}})],1)])],1),e._v(" "),i("el-dialog",{staticClass:"add",attrs:{visible:e.dialogVisibles.add,"close-on-click-modal":!1,width:"1100px",center:!0},on:{"update:visible":function(t){e.$set(e.dialogVisibles,"add",t)},open:e.Open,closed:e.Closed}},[i("div",{staticClass:"dialog-title",attrs:{slot:"title"},slot:"title"},[i("span",[e._v("新增")])]),e._v(" "),i("div",{staticClass:"repair-info-box"},[i("div",{staticClass:"repair-info-base clearfix"},[i("div",{staticClass:"query-box",attrs:{id:"queryBox"}},[i("div",{staticClass:"clearfix"},[i("div",{staticClass:"query-item"},[i("div",{staticClass:"query-title",staticStyle:{"margin-right":"7px"}},[e._v("使用单位")]),e._v(" "),i("div",{staticClass:"query-input"},[i("el-select",{attrs:{multiple:"",placeholder:"请选择使用单位"},model:{value:e.userUnit,callback:function(t){e.userUnit=t},expression:"userUnit"}},e._l(e.unitOptions,function(e){return i("el-option",{key:e.unitId,attrs:{label:e.unitName,value:e.unitId}})}))],1)])])])])]),e._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-form",{ref:"Form",staticStyle:{"text-align":"left"},attrs:{inline:!0,model:e.Form,rules:e.rules}},[i("el-form-item",{attrs:{label:"具体方位","label-width":"100px",prop:"repairAddress"}},[i("tree-select",{attrs:{treeShow:e.treeShow,inputWidth:"200px",inputHeight:"34px"},on:{loadNode:e.loadNode,handleCheckChange:e.handleCheckChange,handleNodeExpand:e.handleNodeExpand}})],1),e._v(" "),i("el-form-item",{attrs:{label:"维修部位","label-width":"100px",prop:"repairPart"}},[i("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择维修部位",size:"small"},model:{value:e.Form.repairPart,callback:function(t){e.$set(e.Form,"repairPart",t)},expression:"Form.repairPart"}},e._l(e.repairPartsOpts,function(e){return i("el-option",{key:e.repairPartsId,attrs:{label:e.repairPartName,value:e.repairPartsId}})}))],1),e._v(" "),i("el-form-item",{attrs:{label:"提醒时间","label-width":"100px",prop:"remaindTime"}},[i("el-date-picker",{staticStyle:{width:"200px"},attrs:{type:"date",placeholder:"选择提醒时间",size:"small","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.Form.remaindTime,callback:function(t){e.$set(e.Form,"remaindTime",t)},expression:"Form.remaindTime"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"负责人","label-width":"100px",prop:"responsiblePerson"}},[i("el-input",{attrs:{placeholder:"请输入负责人",size:"small"},model:{value:e.Form.responsiblePerson,callback:function(t){e.$set(e.Form,"responsiblePerson",t)},expression:"Form.responsiblePerson"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"联系电话","label-width":"100px",prop:"contactPhone"}},[i("el-input",{attrs:{placeholder:"请输入联系电话",size:"small"},on:{blur:function(t){e.limitInt("contactPhone")}},nativeOn:{keyup:function(t){e.limitInt("contactPhone")}},model:{value:e.Form.contactPhone,callback:function(t){e.$set(e.Form,"contactPhone",t)},expression:"Form.contactPhone"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"维修内容","label-width":"100px",prop:"repairGoods"}},[i("el-input",{attrs:{placeholder:"请输入维修内容",size:"small"},model:{value:e.Form.repairGoods,callback:function(t){e.$set(e.Form,"repairGoods",t)},expression:"Form.repairGoods"}})],1),e._v(" "),i("el-form-item",{staticClass:"remaindRemark",attrs:{label:"备注","label-width":"100px",prop:"remaindRemark"}},[i("el-input",{attrs:{type:"textarea",placeholder:"请输入备注",size:"small"},model:{value:e.Form.remaindRemark,callback:function(t){e.$set(e.Form,"remaindRemark",t)},expression:"Form.remaindRemark"}})],1)],1),e._v(" "),i("cancel-btn",{attrs:{fontSize:14},on:{clickBtn:function(t){e.dialogVisibles.add=!1}}}),e._v(" "),i("confirm-btn",{attrs:{fontSize:14},on:{clickBtn:function(t){e.submitIgnoreForm("Form")}}})],1)]),e._v(" "),i("el-dialog",{attrs:{visible:e.dialogVisibles.remind,"close-on-click-modal":!1,width:"1100px",center:!0},on:{"update:visible":function(t){e.$set(e.dialogVisibles,"remind",t)},open:e.dialogOpen,closed:e.dialogClosed}},[i("div",{staticClass:"dialog-title",attrs:{slot:"title"},slot:"title"},[i("span",[e._v("维修提醒")])]),e._v(" "),i("div",{staticClass:"repair-info-box"},[i("div",{staticClass:"repair-info-base clearfix"},[i("div",[i("span",[e._v("具体方位：")]),e._v(" "),i("span",{attrs:{title:e.baseInfo.position}},[e._v(e._s(e.baseInfo.position))])]),e._v(" "),i("div",{staticStyle:{"padding-right":"33px"}},[i("span",[e._v("使用单位：")]),e._v(" "),i("span",{attrs:{title:e.baseInfo.unitNameList}},[e._v(e._s(e.baseInfo.unitNameList))])]),e._v(" "),i("div",[i("span",{staticStyle:{display:"inline-block",width:"84px","text-align":"right"}},[e._v("负责人：")]),e._v(" "),i("span",[e._v(e._s(e.baseInfo.responsiblePerson))])]),e._v(" "),i("div",[i("span",[e._v("联系电话：")]),e._v(" "),i("span",[e._v(e._s(e.baseInfo.contactPhone))])]),e._v(" "),i("div",{staticStyle:{"padding-right":"33px"}},[i("span",[e._v("维修部位：")]),e._v(" "),i("span",[e._v(e._s(e.baseInfo.repairPartName))])]),e._v(" "),i("div",[i("span",[e._v("是否已处理：")]),e._v(" "),i("span",[e._v(e._s(e.baseInfo.remaindHandle))])]),e._v(" "),i("div",[i("span",[e._v("维修内容：")]),e._v(" "),i("span",[e._v(e._s(e.baseInfo.repairGoods))])]),e._v(" "),i("div",{staticStyle:{width:"900px"}},[i("span",[e._v("备注：")]),e._v(" "),i("span",[e._v(e._s(e.baseInfo.remaindRemark))])])]),e._v(" "),i("div",{staticClass:"repair-info-detail",staticStyle:{"margin-top":"20px"}},[i("div",{staticClass:"info-detail-title clearfix"},[i("span",[e._v("维修记录：")]),e._v(" "),e.repairInfoMore.length>0?i("div",{staticClass:"info-detail-btn"},[i("el-popover",{staticClass:"detail",attrs:{placement:"bottom-end",width:"300",trigger:"click","popper-class":"more-infos","visible-arrow":!1}},[i("ul",{staticClass:"repairRemaind-info-more"},e._l(e.repairInfoMore,function(t,a){return i("li",{key:a,class:{"info-active":e.activeInfo===a},on:{click:function(t){e.handleCommand(a)}}},[e._v(e._s(t.positionStr))])})),e._v(" "),i("span",{directives:[{name:"show",rawName:"v-show",value:e.repairInfoMore.length>0,expression:"repairInfoMore.length > 0"}],staticClass:"more-btn",attrs:{slot:"reference"},slot:"reference"},[e._v("\n              更多\n              "),i("i",{staticClass:"el-icon-arrow-down"})])])],1):e._e()]),e._v(" "),e.state?i("div",{staticClass:"section2-content"},[i("div",[i("span",[e._v("地址：")]),e._v(" "),i("span",[e._v(e._s(e.repairPositionTarget))])]),e._v(" "),i("div",[i("span",[e._v("维修部位：")]),e._v(" "),i("span",[e._v(e._s(e.repairePartName))])]),e._v(" "),i("div",[i("span",[e._v("维修单位：")]),e._v(" "),i("span",[e._v(e._s(e.repairUnitNameList))])]),e._v(" "),i("div",[i("span",[e._v("竣工时间：")]),e._v(" "),i("span",[e._v(e._s(e.completionTime))])]),e._v(" "),i("div",[i("span",[e._v("质保期(年)：")]),e._v(" "),i("span",[e._v(e._s(e.repairPartQuality))])])]):i("div",{staticClass:"section2-content"},[i("div",{staticStyle:{"text-align":"center","margin-top":"30px"}},[e._v("暂无维修记录")])])])]),e._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[[i("div",{staticClass:"clearfix",staticStyle:{"padding-left":"27px","padding-bottom":"10px"}},[i("div",{staticClass:"remaindDeal"},[e._v("提醒处理：")]),e._v(" "),i("el-radio-group",{model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[i("el-radio",{attrs:{label:1,name:"approve"},nativeOn:{click:function(t){t.preventDefault(),e.radioChange(1)}}},[e._v("忽略")]),e._v(" "),i("el-radio",{attrs:{label:3,name:"approve"},nativeOn:{click:function(t){t.preventDefault(),e.radioChange(3)}}},[e._v("暂不处理")])],1)],1)],e._v(" "),i("div",{staticClass:"query-box",attrs:{id:"queryBox"}},[i("div",{staticClass:"clearfix"},[i("div",{staticClass:"query-item",staticStyle:{width:"30%","font-size":"14px"}},[i("div",{staticClass:"query-title"},[e._v("提醒时间：")]),e._v(" "),i("div",{staticClass:"query-input",class:{edit:e.edit}},[i("el-date-picker",{staticStyle:{width:"200px","margin-left":"-40px"},attrs:{readonly:e.edit,type:"date",placeholder:"选择提醒时间",size:"small","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.remaindTime,callback:function(t){e.remaindTime=t},expression:"remaindTime"}})],1)]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:1==e.radio,expression:"radio == 1"}],staticClass:"query-item edit-btn",staticStyle:{width:"20%","font-size":"14px"},on:{click:e.Edit}},[i("i",{staticClass:"iconfont",staticStyle:{"vertical-align":"middle"}},[e._v("")]),e._v("修改下次提醒时间\n          ")])])]),e._v(" "),i("cancel-btn",{attrs:{fontSize:14},on:{clickBtn:function(t){e.dialogVisibles.remind=!1}}}),e._v(" "),i("confirm-btn",{attrs:{fontSize:14},on:{clickBtn:e.submit}})],2)])],1)},staticRenderFns:[]};var s=function(e){i("4z37")},n=i("VU/8")(a.a,r,!1,s,null,null);t.default=n.exports},d8Sk:function(e,t,i){"use strict";var a={props:{text:{type:String,default:"暂不处理"},padding:{type:String,default:"7px 22px"},fontSize:{type:Number,default:16},marginLeft:{type:Number,default:120}},data:function(){return{style:{padding:this.padding,"font-size":this.fontSize+"px","margin-left":this.marginLeft+"px"}}},directives:{debounce:{inserted:function(e,t){var i=void 0;e.addEventListener("click",function(){i&&clearTimeout(i),i=setTimeout(function(){t.value()},300)})}}},methods:{clickBtn:function(){this.$emit("clickBtn")}}},r={render:function(){var e=this.$createElement;return(this._self._c||e)("el-button",{directives:[{name:"debounce",rawName:"v-debounce",value:this.clickBtn,expression:"clickBtn"}],staticClass:"temporaryDeal-btn",style:this.style,attrs:{type:"primary",size:"medium"}},[this._v(this._s(this.text))])},staticRenderFns:[]},s=i("VU/8")(a,r,!1,null,null,null);t.a=s.exports},itsK:function(e,t,i){"use strict";(function(e){var a=i("yzMb"),r=i("gApy");i.n(r);t.a={props:{treeName:{type:String,default:"selectTree2"},inputHeight:{type:String,default:"40px"},inputWidth:{type:String,default:"300px"},contentHeight:{type:String,default:"200px"},placeholderText:{type:String,default:"请选择"},treeShow:{type:Boolean,default:!1}},data:function(){return{showContent:!1,defaultProps:{children:"children",label:"text",isLeaf:"leaf"},inputText:"",treeId:this.treeName+"_select_tree",defaultExpandedkeys:[]}},methods:{selectInputClick:function(t){t.stopPropagation(),this.showContent?e("#"+this.treeId).find(".el-icon-arrow-up").removeClass("is-reverse"):e("#"+this.treeId).find(".el-icon-arrow-up").addClass("is-reverse"),this.showContent=!this.showContent},loadNodes:function(e,t){this.$emit("loadNodes",e,t)},handleCheckChanges:function(e,t){t.checkedKeys.length>0?(this.$refs[this.treeName].setCheckedKeys([e.id]),this.inputText=e.text,this.$emit("handleCheckChanges",e)):(this.$refs[this.treeName].setCheckedKeys([]),this.$emit("handleCheckChanges",{}),this.inputText="")},handleNodeExpands:function(e,t){this.$emit("handleNodeExpands",e,t)}},mounted:function(){var t=this;document.onclick=function(i){t.showContent=!1,e("#"+t.treeId).find(".el-icon-arrow-up").removeClass("is-reverse")},a.a.$off("ClearTreeSelectVal"),a.a.$off("setTreeSelectVal"),a.a.$on("ClearTreeSelectVal",function(){t.inputText="",t.defaultExpandedkeys=[],t.$refs[t.treeName].setCheckedKeys([])}),a.a.$on("setTreeSelectVal",function(e,i,a){t.inputText=e[0],t.defaultExpandedkeys=a,t.$refs[t.treeName].setCheckedKeys(i)})}}}).call(t,i("7t+N"))},lepC:function(e,t){},nZqf:function(e,t,i){"use strict";var a=i("itsK"),r={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"tree-select-components",style:{width:e.inputWidth},attrs:{id:e.treeId}},[i("div",{staticClass:"selectInput-box",style:{width:e.inputWidth}},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.inputText,expression:"inputText"}],staticClass:"el-input__inner",style:{height:e.inputHeight,width:e.inputWidth},attrs:{type:"text",readonly:"readonly",autocomplete:"off",placeholder:e.placeholderText},domProps:{value:e.inputText},on:{click:function(t){e.selectInputClick(t)},input:function(t){t.target.composing||(e.inputText=t.target.value)}}}),e._v(" "),e._m(0)]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.showContent,expression:"showContent"}],staticClass:"content-box-dropdown",style:{height:e.contentHeight,width:e.inputWidth,top:e.inputHeight}},[e.treeShow?i("el-tree",{ref:e.treeName,style:{overflowY:"scroll",height:e.contentHeight},attrs:{"node-key":"id",load:e.loadNodes,lazy:"",props:e.defaultProps,accordion:"","check-strictly":"","show-checkbox":"","default-expanded-keys":e.defaultExpandedkeys},on:{check:e.handleCheckChanges,"node-expand":e.handleNodeExpands}}):e._e()],1)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("span",{staticClass:"el-input__suffix"},[t("span",{staticClass:"el-input__suffix-inner"},[t("i",{staticClass:"el-select__caret el-input__icon el-icon-arrow-up"})])])}]};var s=function(e){i("lepC")},n=i("VU/8")(a.a,r,!1,s,"data-v-39531d00",null);t.a=n.exports}});
//# sourceMappingURL=6.dcfbad63c1e7ee4c0470.js.map