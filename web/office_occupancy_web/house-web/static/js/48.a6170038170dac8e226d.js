webpackJsonp([48],{"+5Lj":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("KjRq"),i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"expireRemind"}},[a("div",{staticClass:"query-box",attrs:{id:"queryBox"}},[a("div",{staticClass:"clearfix"},[a("div",{staticClass:"query-item"},[a("div",{staticClass:"query-title"},[e._v("单位：")]),e._v(" "),a("div",{staticClass:"query-input"},[a("el-input",{directives:[{name:"enter-trim",rawName:"v-enter-trim"}],attrs:{placeholder:"请输入单位"},model:{value:e.renter,callback:function(t){e.renter=t},expression:"renter"}})],1)]),e._v(" "),a("div",{staticClass:"query-item",staticStyle:{"margin-left":"50px"}},[a("div",{staticClass:"query-title"},[e._v("类型：")]),e._v(" "),a("div",{staticClass:"query-input"},[a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请选择类型"},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},e._l(e.typeOptions,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)]),e._v(" "),a("div",{staticClass:"query-btn"},[a("search-btn",{on:{clickBtn:e.search}}),e._v(" "),a("reset-btn",{on:{clickBtn:e.reset}})],1)])]),e._v(" "),a("div",{staticClass:"table-box"},[a("table-component",{attrs:{tableData:e.tableData,tableHeight:e.tableHeight},on:{select:e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"50",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"renter",label:"租/借用单位",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"lesseeYears",label:"年限(年)",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"rentMoney",label:"租金(元)",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"deposit",label:"押金(元)",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"rentStateText",label:"状态",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"typeName",label:"类型",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"rentBegin",label:"起始时间",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"rentEnd",label:"截止时间",align:"center","class-name":"paymentTime-col"}}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"paymentTime",label:"付款时间",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"90",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("single-btn-group",{attrs:{isShowDetail:!1,isShowDelete:!1,isShowAlter:!1,isShowHaveRead:!0},on:{haveReadClick:function(a){e.singleHaveRead(t.row)}}})]}}])})],1),e._v(" "),a("div",{staticClass:"table-operate-box",attrs:{id:"operateBox"}},[a("div",{staticClass:"operate-btn"},[a("table-btn-group",{attrs:{batchDelBtnShow:!1,addBtnShow:!1,haveReadBtnShow:!0},on:{haveReadClick:e.haveReadClick}})],1),e._v(" "),a("div",{staticClass:"operate-pager"},[a("table-pagination",{attrs:{currentPage:e.currentPage,pageSize:e.pageSize,total:e.total},on:{"size-change":e.changeSize,"page-change":e.changePage}})],1)])],1)])},staticRenderFns:[]};var s=function(e){a("RdG6")},o=a("VU/8")(n.a,i,!1,s,null,null);t.default=o.exports},KjRq:function(e,t,a){"use strict";(function(e){var n=a("m5LG"),i=(a("Oizb"),a("yzMb")),s=a("uSev"),o=a("dO4M"),l=a("FAvH"),r=a("GR1E"),c=a("fYBn"),g=a("02tb"),u=a("5kkW"),p=a("3a1n"),d=a("gAs1");a.n(d);t.a={components:{singleBtnGroup:o.a,tableBtnGroup:l.a,tablePagination:r.a,tableComponent:s.a,cancelBtn:c.a,confirmBtn:g.a,searchBtn:u.a,resetBtn:p.a},data:function(){return{renter:"",type:"",currentPage:1,pageSize:15,total:0,loading:null,tableHeight:0,selectData:[],tableData:[],dialogTitle:"",operateType:"add",dialogVisible:!1,typeOptions:[{id:"",name:"全部"},{id:1,name:"出租"},{id:2,name:"出借"}],rentStateOptions:[{id:"",name:"全部"},{id:1,name:"出租中"},{id:0,name:"已退租"}]}},methods:{loadingStart:function(e){this.loading||(this.loading=this.$loading({lock:!0,text:"正在加载...",spinner:"el-icon-loading",target:e,customClass:"loading-box"}))},loadingEnd:function(){this.loading&&(this.loading.close(),this.loading=null)},changeSize:function(e){this.pageSize=e,this.getList()},changePage:function(e){this.currentPage=e,this.getList()},getList:function(){var e=this;this.loadingStart(".table-box"),Object(n.k)(this.currentPage,this.pageSize,this.renter,this.type).then(function(t){e.tableData=t.records,e.total=t.total,e.tableData.forEach(function(t){t.typeName=1===t.type?"出租":"出借",void 0!==t.rentState&&e.rentStateOptions.forEach(function(e){e.id===t.rentState&&(t.rentStateText=e.name,1===t.rentState&&2===t.type&&(t.rentStateText="出借中"))}),void 0!==t.rentMoney&&(t.rentMoney=String(t.rentMoney.toFixed(2))),void 0!==t.deposit&&(t.deposit=String(t.deposit.toFixed(2))),t.rentBegin&&(t.rentBegin=e.formatDate(t.rentBegin)),t.rentEnd&&(t.rentEnd=e.formatDate(t.rentEnd)),t.paymentTime&&(t.paymentTime=e.formatDate(t.paymentTime))}),e.loadingEnd()}).catch(function(t){e.loadingEnd();var a=t.result?t.result:"租借到期提醒列表获取失败";e.$message({message:a,type:"error"})})},search:function(){this.currentPage=1,this.getList()},reset:function(){this.currentPage=1,this.renter="",this.type="",this.search()},haveReadClick:function(){var e=this;if(0===this.selectData.length)return this.$message({message:"请先选择一条提醒",type:"warning"}),!1;this.$confirm("批量关闭, 是否继续?","提示",{cancelButtonText:"取消",type:"warning"}).then(function(){var t=[];e.selectData.forEach(function(e){t.push(e.rentId)}),Object(n.x)(t,2).then(function(t){e.$message({message:"关闭成功",type:"success"}),i.a.$emit("updateRemindTips")}).catch(function(t){var a=t.result?t.result:"关闭失败";e.$message({message:a,type:"error"})}),e.getList()}).catch(function(){e.$message({type:"info",message:"已取消关闭"})})},singleHaveRead:function(e){var t=this;this.$confirm("关闭, 是否继续?","提示",{cancelButtonText:"取消",type:"warning"}).then(function(){Object(n.x)([e.rentId],2).then(function(e){t.$message({message:"关闭成功",type:"success"}),t.getList(),i.a.$emit("updateRemindTips")}).catch(function(e){var a=e.result?e.result:"关闭失败";t.$message({message:a,type:"error"})})}).catch(function(){t.$message({type:"info",message:"已取消关闭"})})},handleSelectionChange:function(e){this.selectData=e},formatDate:function(e){var t=new Date(e),a="yyyy-MM-dd",n={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()};for(var i in/(y+)/.test(a)&&(a=a.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length))),n)new RegExp("("+i+")").test(a)&&(a=a.replace(RegExp.$1,1==RegExp.$1.length?n[i]:("00"+n[i]).substr((""+n[i]).length)));return a}},mounted:function(){var t=this;this.getList(),setTimeout(function(){var a=e("#mainDiv").height(),n=e("#queryBox").outerHeight(!0),i=e("#operateBox").height();t.tableHeight=a-n-i},1)}}}).call(t,a("7t+N"))},RdG6:function(e,t){}});
//# sourceMappingURL=48.a6170038170dac8e226d.js.map