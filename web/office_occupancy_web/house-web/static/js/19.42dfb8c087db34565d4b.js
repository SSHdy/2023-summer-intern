webpackJsonp([19],{"I/3G":function(e,t,i){"use strict";var o=i("u3Mf"),a=i("yzMb"),l=i("YFyo"),r=i("97S/"),n=i("zG9E"),s=i("HcVH"),u=i("Qimm"),d=(i("OMJi"),{components:{BaiduMap:l.a,bmNavigation:r.a,bmMapType:n.a,bmMarker:s.a,bmLabel:u.a},data:function(){return{center:{lng:o.c,lat:o.b},zoom:15,markerPosition:{lng:0,lat:0},yardPosition:{lng:0,lat:0},buildPosition:{lng:0,lat:0},currentYardName:"",currentBuildName:"",yardImageUrl:""+o.a+o.f+"/images/yard.png",buildImageUrl:""+o.a+o.f+"/images/build.png"}},methods:{handler:function(e){e.BMap,e.map;this.zoom=this.zoom},mapClick:function(e){var t=e.point.lng,i=e.point.lat;this.markerPosition.lng=t,this.markerPosition.lat=i,this.$emit("mapClick",t,i)},setYardPosition:function(e,t,i){this.yardPosition.lng=e,this.yardPosition.lat=t,this.center.lng=e,this.center.lat=t,this.currentYardName=i},setBuildPosition:function(e,t,i){this.buildPosition.lng=e,this.buildPosition.lat=t,this.currentBuildName=i}},mounted:function(){var e=this;a.a.$off("mapBindCoord"),a.a.$on("mapBindCoord",function(t,i){e.markerPosition.lng=t,e.markerPosition.lat=i})}}),m={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("baidu-map",{ref:"baiduMap",attrs:{id:"baidu_map",ak:"2IMiGQlksUfRyo9UiGGq6EY6EsZAtFAl",center:e.center,zoom:e.zoom,"scroll-wheel-zoom":!0},on:{ready:e.handler,click:e.mapClick}},[i("bm-navigation",{attrs:{anchor:"BMAP_ANCHOR_TOP_RIGHT"}}),e._v(" "),i("bm-map-type",{attrs:{"map-types":["BMAP_NORMAL_MAP","BMAP_HYBRID_MAP"],anchor:"BMAP_ANCHOR_TOP_LEFT"}}),e._v(" "),i("bm-marker",{attrs:{position:e.markerPosition,icon:{url:e.buildImageUrl,size:{width:39,height:39}}}},[i("bm-label",{attrs:{content:"所选位置",labelStyle:{color:"red",fontSize:"14px"},offset:{width:-25,height:30}}})],1),e._v(" "),i("bm-marker",{attrs:{position:e.yardPosition,icon:{url:e.yardImageUrl,size:{width:39,height:39}}}},[i("bm-label",{attrs:{content:e.currentYardName,labelStyle:{color:"red",fontSize:"14px"},offset:{width:-10,height:30}}})],1),e._v(" "),i("bm-marker",{attrs:{position:e.buildPosition,icon:{url:e.buildImageUrl,size:{width:9,height:25}}}},[i("bm-label",{attrs:{content:e.currentBuildName,labelStyle:{color:"red",fontSize:"14px"},offset:{width:-10,height:30}}})],1)],1)},staticRenderFns:[]};var c=i("VU/8")(d,m,!1,function(e){i("o3fu")},null,null);t.a=c.exports},TnIb:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=i("y618"),a={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"baseInfoBuild"}},[i("div",{staticClass:"query-box",attrs:{id:"queryBox"}},[i("div",{staticClass:"clearfix"},[i("div",{staticClass:"query-item"},[i("div",{staticClass:"query-title"},[e._v("院落名称：")]),e._v(" "),i("div",{staticClass:"query-input"},[i("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请选择院落名称"},model:{value:e.yard_id,callback:function(t){e.yard_id=t},expression:"yard_id"}},e._l(e.yardOptions,function(e){return i("el-option",{key:e.yardId,attrs:{label:e.yardName,value:e.yardId}})}))],1)]),e._v(" "),i("div",{staticClass:"query-item",staticStyle:{"margin-left":"50px"}},[i("div",{staticClass:"query-title"},[e._v("楼座名称：")]),e._v(" "),i("div",{staticClass:"query-input"},[i("el-input",{attrs:{placeholder:"请输入楼座名称"},model:{value:e.build_name,callback:function(t){e.build_name="string"==typeof t?t.trim():t},expression:"build_name"}})],1)]),e._v(" "),i("div",{staticClass:"query-btn"},[i("search-btn",{on:{clickBtn:e.search}}),e._v(" "),i("reset-btn",{on:{clickBtn:e.reset}})],1)])]),e._v(" "),i("div",{staticClass:"table-box"},[i("table-component",{attrs:{tableData:e.tableData,tableHeight:e.tableHeight},on:{select:e.handleSelectionChange}},[i("el-table-column",{attrs:{type:"selection",width:"50",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"yardName",label:"院落名称",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"buildName",label:"楼座名称",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"buildArea",label:"建筑面积(m²)",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"structureType",label:"结构类型",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"overgroundFloor",label:"地上楼层",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"undergroundFloor",label:"地下楼层",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"buildDate",label:"建成时间",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{label:"操作",width:"140",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("single-btn-group",{attrs:{isShowDetail:!1},on:{deleteClick:function(i){e.singleDetle(t.row)},updateClick:function(i){e.singleUpdate(t.row)}}})]}}])})],1),e._v(" "),i("div",{staticClass:"table-operate-box",attrs:{id:"operateBox"}},[i("div",{staticClass:"operate-btn"},[i("table-btn-group",{attrs:{batchDelBtnShow:!1},on:{addClick:e.add}})],1),e._v(" "),i("div",{staticClass:"operate-pager"},[i("table-pagination",{attrs:{currentPage:e.currentPage,pageSize:e.pageSize,total:e.total},on:{"size-change":e.changeSize,"page-change":e.changePage}})],1)])],1),e._v(" "),i("el-dialog",{attrs:{visible:e.dialogVisible,"close-on-click-modal":!1,width:"1100px",center:!0},on:{"update:visible":function(t){e.dialogVisible=t},open:e.dialogOpen,closed:e.dialogClosed}},[i("div",{staticClass:"dialog-title",attrs:{slot:"title"},slot:"title"},[i("span",[e._v(e._s(e.dialogTitle))])]),e._v(" "),i("el-form",{ref:"Form",staticClass:"build-info-Form",attrs:{inline:!0,model:e.Form,rules:e.rules}},[i("el-form-item",{attrs:{label:"院落名称","label-width":"130px",prop:"yardId"}},[i("el-select",{staticStyle:{width:"200px"},attrs:{filterable:"",placeholder:"请选择",size:"small",disabled:"edit"===e.operateType},on:{change:e.selectYardHandle},model:{value:e.Form.yardId,callback:function(t){e.$set(e.Form,"yardId",t)},expression:"Form.yardId"}},e._l(e.yardOptionsModal,function(e){return i("el-option",{key:e.yardId,attrs:{label:e.yardName,value:e.yardId}})}))],1),e._v(" "),i("el-form-item",{attrs:{label:"楼座名称","label-width":"130px",prop:"buildName"}},[i("el-input",{attrs:{size:"small",placeholder:"请输入楼座名称"},model:{value:e.Form.buildName,callback:function(t){e.$set(e.Form,"buildName","string"==typeof t?t.trim():t)},expression:"Form.buildName"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"建筑面积(m²)","label-width":"130px",prop:"buildArea"}},[i("el-input",{attrs:{size:"small",placeholder:"请输入建筑面积"},on:{blur:function(t){e.limitFloat("buildArea",!0)}},nativeOn:{keyup:function(t){e.limitFloat("buildArea")}},model:{value:e.Form.buildArea,callback:function(t){e.$set(e.Form,"buildArea","string"==typeof t?t.trim():t)},expression:"Form.buildArea"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"建成时间","label-width":"130px",prop:"buildDate"}},[i("el-date-picker",{staticStyle:{width:"200px"},attrs:{type:"date",placeholder:"选择日期",size:"small","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.Form.buildDate,callback:function(t){e.$set(e.Form,"buildDate",t)},expression:"Form.buildDate"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"施工单位","label-width":"130px",prop:"builder"}},[i("el-input",{attrs:{size:"small",placeholder:"请输入施工单位"},model:{value:e.Form.builder,callback:function(t){e.$set(e.Form,"builder","string"==typeof t?t.trim():t)},expression:"Form.builder"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"地上楼层","label-width":"130px",prop:"overgroundFloor"}},[i("el-input",{attrs:{size:"small",placeholder:"请输入地上楼层",disabled:e.floorNotUpdate},on:{blur:function(t){e.limitInt("overgroundFloor")}},nativeOn:{keyup:function(t){e.limitInt("overgroundFloor")}},model:{value:e.Form.overgroundFloor,callback:function(t){e.$set(e.Form,"overgroundFloor","string"==typeof t?t.trim():t)},expression:"Form.overgroundFloor"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"地下楼层","label-width":"130px",prop:"undergroundFloor"}},[i("el-input",{attrs:{size:"small",placeholder:"请输入地下楼层",disabled:e.floorNotUpdate},on:{blur:function(t){e.limitInt("undergroundFloor")}},nativeOn:{keyup:function(t){e.limitInt("undergroundFloor")}},model:{value:e.Form.undergroundFloor,callback:function(t){e.$set(e.Form,"undergroundFloor","string"==typeof t?t.trim():t)},expression:"Form.undergroundFloor"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"取得方式","label-width":"130px"}},[i("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择取得方式",size:"small"},model:{value:e.Form.obtainWay,callback:function(t){e.$set(e.Form,"obtainWay",t)},expression:"Form.obtainWay"}},e._l(e.obtainWayOpts,function(e,t){return i("el-option",{key:t,attrs:{label:e.name,value:e.value}})}))],1),e._v(" "),i("el-form-item",{attrs:{label:"房产证号","label-width":"130px",prop:"housePropertyNumber"}},[i("el-input",{attrs:{size:"small",placeholder:"请输入房产证号"},model:{value:e.Form.housePropertyNumber,callback:function(t){e.$set(e.Form,"housePropertyNumber","string"==typeof t?t.trim():t)},expression:"Form.housePropertyNumber"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"土地证号","label-width":"130px"}},[i("el-input",{attrs:{size:"small",placeholder:"请输入土地证号"},model:{value:e.Form.buildCertificate,callback:function(t){e.$set(e.Form,"buildCertificate","string"==typeof t?t.trim():t)},expression:"Form.buildCertificate"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"占地面积(m²)","label-width":"130px",prop:"coveredArea"}},[i("el-input",{attrs:{size:"small",placeholder:"请输入占地面积"},on:{blur:function(t){e.limitFloat("coveredArea",!0)}},nativeOn:{keyup:function(t){e.limitFloat("coveredArea")}},model:{value:e.Form.coveredArea,callback:function(t){e.$set(e.Form,"coveredArea","string"==typeof t?t.trim():t)},expression:"Form.coveredArea"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"完损等级","label-width":"130px"}},[i("el-input",{attrs:{size:"small",placeholder:"请输入完损等级"},model:{value:e.Form.lossGrade,callback:function(t){e.$set(e.Form,"lossGrade","string"==typeof t?t.trim():t)},expression:"Form.lossGrade"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"结构类型","label-width":"130px",prop:"structureType"}},[i("el-select",{staticStyle:{width:"200px"},attrs:{filterable:"",placeholder:"请选择结构类型",size:"small"},model:{value:e.Form.structureType,callback:function(t){e.$set(e.Form,"structureType",t)},expression:"Form.structureType"}},e._l(e.structureType,function(e,t){return i("el-option",{key:t,attrs:{label:e,value:e}})}))],1),e._v(" "),i("el-form-item",{attrs:{label:"权证编号","label-width":"130px"}},[i("el-input",{attrs:{size:"small",placeholder:"请输入权证编号"},model:{value:e.Form.warrantNum,callback:function(t){e.$set(e.Form,"warrantNum","string"==typeof t?t.trim():t)},expression:"Form.warrantNum"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"所有权人","label-width":"130px"}},[i("el-input",{attrs:{size:"small",placeholder:"请输入所有权人"},model:{value:e.Form.warrantPerson,callback:function(t){e.$set(e.Form,"warrantPerson","string"==typeof t?t.trim():t)},expression:"Form.warrantPerson"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"权属说明","label-width":"130px"}},[i("el-select",{staticStyle:{width:"200px"},attrs:{filterable:"",placeholder:"请选择权属说明",size:"small"},model:{value:e.Form.warrantRemark,callback:function(t){e.$set(e.Form,"warrantRemark",t)},expression:"Form.warrantRemark"}},e._l(e.warrantRemarkOpt,function(e,t){return i("el-option",{key:t,attrs:{label:e,value:e}})}))],1),e._v(" "),i("el-form-item",{attrs:{label:"资产原值(万)","label-width":"130px"}},[i("el-input",{attrs:{size:"small",placeholder:"请输入资产原值(万)"},on:{blur:function(t){e.limitFloat("assetsValue",!0)}},nativeOn:{keyup:function(t){e.limitFloat("assetsValue")}},model:{value:e.Form.assetsValue,callback:function(t){e.$set(e.Form,"assetsValue","string"==typeof t?t.trim():t)},expression:"Form.assetsValue"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"人防面积(m²)","label-width":"130px"}},[i("el-input",{attrs:{size:"small",placeholder:"请输入人防面积"},on:{blur:function(t){e.limitFloat("civilDefenceArea",!0)}},nativeOn:{keyup:function(t){e.limitFloat("civilDefenceArea")}},model:{value:e.Form.civilDefenceArea,callback:function(t){e.$set(e.Form,"civilDefenceArea","string"==typeof t?t.trim():t)},expression:"Form.civilDefenceArea"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"产权所属单位","label-width":"130px",prop:"propertyUnitId"}},[i("el-select",{staticStyle:{width:"200px"},attrs:{filterable:"",placeholder:"请选择",size:"small"},model:{value:e.Form.propertyUnitId,callback:function(t){e.$set(e.Form,"propertyUnitId",t)},expression:"Form.propertyUnitId"}},e._l(e.unitOptions,function(e){return i("el-option",{key:e.unitId,attrs:{label:e.unitName,value:e.unitId}})}))],1),e._v(" "),i("el-form-item",{staticClass:"form-item-radio",attrs:{label:"电梯数量","label-width":"130px",prop:"elevatorNum"}},[i("el-input",{attrs:{size:"small",placeholder:"请输入电梯数量"},nativeOn:{keyup:function(t){e.limitInt("elevatorNum")}},model:{value:e.Form.elevatorNum,callback:function(t){e.$set(e.Form,"elevatorNum","string"==typeof t?t.trim():t)},expression:"Form.elevatorNum"}})],1),e._v(" "),i("el-form-item",{staticClass:"form-item-radio",attrs:{label:"是否租赁","label-width":"130px",prop:"isRent"}},[i("el-radio",{attrs:{label:1},on:{change:e.rentStatusChange},model:{value:e.Form.outRent.isRent,callback:function(t){e.$set(e.Form.outRent,"isRent",t)},expression:"Form.outRent.isRent"}},[e._v("租赁")]),e._v(" "),i("el-radio",{attrs:{label:0},on:{change:e.rentStatusChange},model:{value:e.Form.outRent.isRent,callback:function(t){e.$set(e.Form.outRent,"isRent",t)},expression:"Form.outRent.isRent"}},[e._v("不租赁")])],1),e._v(" "),1===e.Form.outRent.isRent?i("el-form-item",{attrs:{label:"租用单位","label-width":"130px",prop:"outRent.rentUnit"}},["detail"!==e.operateType?i("el-select",{staticStyle:{width:"200px"},attrs:{filterable:"",placeholder:"请选择租用单位",size:"small"},model:{value:e.Form.outRent.rentUnit,callback:function(t){e.$set(e.Form.outRent,"rentUnit",t)},expression:"Form.outRent.rentUnit"}},e._l(e.unitAuthorityOptions,function(e){return i("el-option",{key:e.unitId,attrs:{label:e.unitName,value:e.unitId}})})):e._e()],1):e._e(),e._v(" "),1===e.Form.outRent.isRent?i("el-form-item",{attrs:{label:"租赁开始时间","label-width":"130px",prop:"startTime"}},[i("el-date-picker",{staticStyle:{width:"200px"},attrs:{type:"date",placeholder:"选择租赁开始时间",size:"small","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.Form.outRent.startTime,callback:function(t){e.$set(e.Form.outRent,"startTime",t)},expression:"Form.outRent.startTime"}})],1):e._e(),e._v(" "),1===e.Form.outRent.isRent?i("el-form-item",{attrs:{label:"租赁截止时间","label-width":"130px",prop:"endTime"}},[i("el-date-picker",{staticStyle:{width:"200px"},attrs:{type:"date",placeholder:"选择租赁截止时间",size:"small","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.Form.outRent.endTime,callback:function(t){e.$set(e.Form.outRent,"endTime",t)},expression:"Form.outRent.endTime"}})],1):e._e(),e._v(" "),1===e.Form.outRent.isRent?i("el-form-item",{attrs:{label:"租金标准(元)","label-width":"130px",prop:"outRent.rentMoney"}},[i("el-input",{attrs:{size:"small",placeholder:"请输入租金标准"},on:{blur:function(t){e.limitFloat("rentMoney",!0,"outRent")}},nativeOn:{keyup:function(t){e.limitFloat("rentMoney",null,"outRent")}},model:{value:e.Form.outRent.rentMoney,callback:function(t){e.$set(e.Form.outRent,"rentMoney","string"==typeof t?t.trim():t)},expression:"Form.outRent.rentMoney"}})],1):e._e(),e._v(" "),1===e.Form.outRent.isRent?i("el-form-item",{attrs:{label:"财政备案","label-width":"130px",prop:"outRent.financeRemark"}},[i("el-input",{attrs:{size:"small",placeholder:"请输入财政备案"},model:{value:e.Form.outRent.financeRemark,callback:function(t){e.$set(e.Form.outRent,"financeRemark","string"==typeof t?t.trim():t)},expression:"Form.outRent.financeRemark"}})],1):e._e(),e._v(" "),i("el-form-item",{staticStyle:{display:"block"},attrs:{label:"楼座备注","label-width":"130px",prop:"buildRemark"}},[i("el-input",{staticStyle:{width:"888px"},attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"请输入楼座备注"},model:{value:e.Form.buildRemark,callback:function(t){e.$set(e.Form,"buildRemark","string"==typeof t?t.trim():t)},expression:"Form.buildRemark"}})],1),e._v(" "),i("el-form-item",{staticStyle:{display:"block"},attrs:{label:"上传图片","label-width":"130px"}},[i("div",{staticClass:"upload_box_img"},[i("el-upload",{ref:"uploadImg",attrs:{headers:e.postHeaders,action:e.uploadImgUrl,"list-type":"picture-card","file-list":e.fileListImg,"on-remove":e.handleImgRemove,"auto-upload":!1,"on-success":e.handleImgSuccess,"on-change":e.handleImgChange,"on-error":e.handleError,accept:e.acceptImgType,limit:e.limitImgNum,"on-exceed":e.handleImgExceed,"before-upload":e.beforeAvatarUpload,multiple:""}},[i("i",{staticClass:"el-icon-plus"})])],1)]),e._v(" "),i("el-form-item",{staticStyle:{display:"block"},attrs:{label:"上传附件","label-width":"130px"}},[i("div",{staticClass:"upload_box_file"},["edit"===e.operateType?i("ul",{staticClass:"accessory-checkbox"},e._l(e.downloadList,function(t,o){return i("li",{key:o},[i("el-checkbox",{on:{change:function(i){e.checkboxChange(i,t.url)}}})],1)})):e._e(),e._v(" "),i("el-upload",{ref:"upload",attrs:{headers:e.postHeaders,action:e.uploadImgUrl,"file-list":e.fileList,"on-remove":e.handleRemove,"auto-upload":!1,"on-success":e.handleSuccess,"on-change":e.handleChange,"on-error":e.handleError,accept:e.acceptType,limit:e.limitNum,"on-exceed":e.handleExceed,"before-upload":e.beforeAvatarUpload,multiple:""}},[i("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("点击上传")]),e._v(" "),e.downloadList.length>0?i("el-button",{staticStyle:{"margin-left":"10px"},attrs:{slot:"tip",size:"small",type:"primary"},on:{click:e.downloadCAD},slot:"tip"},[e._v("勾选下载")]):e._e()],1)],1)]),e._v(" "),i("el-form-item",{attrs:{label:"经度(°)","label-width":"130px",prop:"buildLongitude"}},[i("el-input",{attrs:{size:"small",placeholder:"请输入经度"},on:{blur:function(t){e.mapBindCoord("buildLongitude")}},nativeOn:{keyup:function(t){e.limitFloat("buildLongitude")}},model:{value:e.Form.buildLongitude,callback:function(t){e.$set(e.Form,"buildLongitude","string"==typeof t?t.trim():t)},expression:"Form.buildLongitude"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"纬度(°)","label-width":"130px",prop:"buildLatitude"}},[i("el-input",{attrs:{size:"small",placeholder:"请输入纬度"},on:{blur:function(t){e.mapBindCoord("buildLatitude")}},nativeOn:{keyup:function(t){e.limitFloat("buildLatitude")}},model:{value:e.Form.buildLatitude,callback:function(t){e.$set(e.Form,"buildLatitude","string"==typeof t?t.trim():t)},expression:"Form.buildLatitude"}})],1)],1),e._v(" "),i("div",{staticClass:"my-map"},[i("div",{staticClass:"map-tips"},[e._v("提示：可手动输入经纬度,也可以点击下方地图自动生成经纬度。")]),e._v(" "),e.showMap?i("my-map",{ref:"map",attrs:{labelContent:"所选位置",position:e.position},on:{mapClick:e.setPostion}}):e._e()],1),e._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("cancel-btn",{attrs:{fontSize:14},on:{clickBtn:function(t){e.dialogVisible=!1}}}),e._v(" "),i("confirm-btn",{attrs:{fontSize:14},on:{clickBtn:e.submitFormBefore}})],1)],1)],1)},staticRenderFns:[]};var l=function(e){i("dWoR")},r=i("VU/8")(o.a,a,!1,l,null,null);t.default=r.exports},dWoR:function(e,t){},o3fu:function(e,t){},y618:function(e,t,i){"use strict";(function(e){var o=i("fZjL"),a=i.n(o),l=i("d7EF"),r=i.n(l),n=i("W3Iv"),s=i.n(n),u=i("BO1k"),d=i.n(u),m=i("u3Mf"),c=i("d6pC"),p=i("os9D"),g=i("Oizb"),h=i("yzMb"),b=i("uSev"),f=i("dO4M"),v=i("FAvH"),F=i("GR1E"),y=i("fYBn"),w=i("02tb"),I=i("5kkW"),_=i("3a1n"),x=i("I/3G"),k=i("OMJi"),N=(i.n(k),i("PJh5")),R=i.n(N);t.a={components:{singleBtnGroup:f.a,tableBtnGroup:v.a,tablePagination:F.a,tableComponent:b.a,cancelBtn:y.a,confirmBtn:w.a,searchBtn:I.a,resetBtn:_.a,myMap:x.a},data:function(){var e=this;return{build_name:"",yard_id:"",currentPage:1,pageSize:15,total:0,loading:null,tableHeight:0,selectData:[],tableData:[],dialogTitle:"",operateType:"add",mapOperateType:"add",dialogVisible:!1,obtainWayOpts:[{value:1,name:"调剂"},{value:2,name:"租用"},{value:3,name:"置换"},{value:4,name:"自建"},{value:5,name:"购置"}],Form:{yardId:"",buildId:"",buildName:"",buildArea:"",buildDate:"",builder:"",overgroundFloor:"",undergroundFloor:"",obtainWay:"",buildCertificate:"",coveredArea:"",lossGrade:"",structureType:"",warrantNum:"",warrantPerson:"",warrantRemark:"",assetsValue:"",civilDefenceArea:"",buildRemark:"",buildLongitude:"",buildLatitude:"",propertyUnitId:"",elevatorNum:"",housePropertyNumber:"",outRent:{outRentId:"",buildId:"",coveredArea:"",rentUnit:"",startTime:"",endTime:"",rentMoney:"",financeRemark:"",isRent:0},newFloorImgUrlList:[],floorDrawingList:[],oldFloorImgIdList:[],oldCadIdList:[],configureIds:[]},elevatorsOpts:[{elevatorId:0,elevatorName:"0台"},{elevatorId:1,elevatorName:"1台"},{elevatorId:2,elevatorName:"2台"},{elevatorId:3,elevatorName:"3台"},{elevatorId:4,elevatorName:"4台"},{elevatorId:5,elevatorName:"5台"},{elevatorId:6,elevatorName:"6台"}],structureType:["砖木结构","砖混结构","钢筋混泥土结构","钢结构","型钢混泥土结构"],warrantRemarkOpt:["已统一登记到机关事务管理部门名下","登记在各部门或其他单位名下、已移交权属资料","登记在各部门或其他单位名下、未移交权属资料","未登记、已移交权属资料","未登记、未移交权属资料","其他情况"],yardOptions:[],yardOptionsModal:[],uploadImgUrl:g.n+"?uploadType=build",acceptType:"image/jpeg,image/gif,image/png,image/bmp,.doc,.docx,.xlsx,.ppt,.pdf,.rar,.zip",acceptImgType:"image/jpeg,image/gif,image/png,image/bmp",limitImgNum:1,limitNum:5,fileList:[],fileListImg:[],uploadNum:0,uploadImgNum:0,uploadedNum:0,uploadedImgNum:0,uploadSuccessNum:0,uploadSuccessImgNum:0,submitFlag:!1,submitImgFlag:!1,uploadChangeFlag:!1,uploadImgChangeFlag:!1,token:"",postHeaders:{Authorization:""},showMap:!1,position:{lng:0,lat:0},yardPosition:{yardLatitude:"",yardLongitude:""},buildPosition:[],unitOptions:[],unitAuthorityOptions:[],CADDownload:[],downloadList:[],oldUndergroundFloor:null,oldOvergroundFloor:null,deleteFloorName:[],activeBuildId:null,floorNotUpdate:!1,rules:{yardId:[{required:!0,message:"院落名称不能为空",trigger:"change"}],buildName:[{required:!0,message:"楼座名称不能为空",trigger:"blur"}],buildArea:[{required:!0,message:"建筑面积不能为空",trigger:"blur"}],structureType:[{required:!0,message:"结构类型不能为空",trigger:"change"}],overgroundFloor:[{required:!0,message:"地上楼层不能为空",trigger:"blur"}],undergroundFloor:[{required:!0,message:"地下楼层不能为空",trigger:"blur"}],buildDate:[{required:!0,message:"建成时间不能为空",trigger:"blur"}],housePropertyNumber:[{required:!0,message:"房产证号不能为空",trigger:"blur"}],buildLongitude:[{required:!0,message:"经度不能为空",trigger:"blur"}],buildLatitude:[{required:!0,message:"纬度不能为空",trigger:"blur"}],propertyUnitId:[{required:!0,message:"请选择产权所属单位",trigger:"change"}],startTime:[{required:!0,validator:function(t,i,o){var a=new Date(e.Form.outRent.startTime).getTime(),l=new Date(e.Form.outRent.endTime).getTime();a||o(new Error("租赁开始时间不能为空")),a&&l&&a>l&&o(new Error("租赁开始时间不能大于租赁截止时间")),o()},trigger:"blur"}],endTime:[{required:!0,validator:function(t,i,o){var a=new Date(e.Form.outRent.startTime).getTime(),l=new Date(e.Form.outRent.endTime).getTime();l||o(new Error("租赁截止时间不能为空")),a&&l&&a>l&&o(new Error("租赁截止时间不能小于租赁开始时间")),o()},trigger:"blur"}],elevatorNum:[{required:!0,message:"请选择电梯数量",trigger:"change"}],"outRent.rentUnit":[{required:!0,message:"租用单位不能为空",trigger:"change"}],"outRent.rentMoney":[{required:!0,message:"租金标准不能为空",trigger:"blur"}],"outRent.financeRemark":[{required:!0,message:"财政备案不能为空",trigger:"blur"}]}}},watch:{fileListImg:function(t){var i=e(".upload_box_img").find(".el-upload");t.length===this.limitImgNum?i.css("display","none"):i.css("display","inline-block")}},methods:{loadingStart:function(e){this.loading||(this.loading=this.$loading({lock:!0,text:"正在加载...",spinner:"el-icon-loading",target:e,customClass:"loading-box"}))},loadingEnd:function(){this.loading&&(this.loading.close(),this.loading=null)},changeSize:function(e){this.pageSize=e,this.getList()},changePage:function(e){this.currentPage=e,this.getList()},getList:function(){var e=this;this.loadingStart(".table-box"),Object(c.m)(this.currentPage,this.pageSize,this.yard_id,this.build_name).then(function(t){e.tableData=t.records,e.total=t.total,e.loadingEnd()}).catch(function(t){e.loadingEnd();var i=t.result?t.result:"楼座信息列表获取失败";e.$message({message:i,type:"error"})})},getYardDic:function(){var e=this;Object(g.d)(1).then(function(t){e.yardOptionsModal=t,e.yardOptions=t}).catch(function(t){var i=t.result?t.result:"院落名称下拉菜单获取失败";e.$message({message:i,type:"error"})})},getUnitDic:function(){var e=this;Object(g.c)().then(function(t){e.unitOptions=t}).catch(function(t){var i=t.result?t.result:"单位名称下拉菜单获取失败";e.$message({message:i,type:"error"})})},getUserUnitDic:function(){var e=this;Object(g.l)().then(function(t){e.unitAuthorityOptions=t}).catch(function(t){var i=t.result?t.result:"单位下拉选项获取失败";e.$message({message:i,type:"error"})})},search:function(){this.currentPage=1,this.getList()},reset:function(){this.build_name="",this.yard_id="",this.currentPage=1,this.getList()},add:function(){this.dialogVisible=!0,this.showMap=!0,this.dialogTitle="新增楼座信息",this.operateType="add"},singleDetle:function(e){var t=this;this.$confirm("此操作将永久删除楼座"+e.buildName+", 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.operateType="delete",t.activeBuildId=e.buildId,t.deleteFloorName=[];for(var i=e.undergroundFloor-2*e.undergroundFloor;i<0;++i)t.deleteFloorName.push(i);for(var o=1;o<=e.overgroundFloor;o++)t.deleteFloorName.push(o);Object(c.y)(e.buildId,t.deleteFloorName).then(function(e){e&&t.deleteBuild()}).catch(function(e){t.$message({message:"该楼座包含的楼层里含有房间信息，如要删除楼座，请先删除楼座楼层包含的房间信息！",type:"error"})})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},deleteBuild:function(){var e=this;Object(c.f)(this.activeBuildId).then(function(t){e.$message({message:"删除楼座信息成功!",type:"success"}),e.currentPage=1,e.getList()}).catch(function(t){var i=t.result?t.result:"删除楼座信息失败";e.$message({message:i,type:"error"})})},singleUpdate:function(e){var t=this;this.dialogVisible=!0,this.dialogTitle="修改楼座信息",this.operateType="edit",this.showMap=!0,this.activeBuildId=e.buildId,Object(c.l)(e.buildId).then(function(e){var i=!0,o=!1,a=void 0;try{for(var l,n=d()(s()(e));!(i=(l=n.next()).done);i=!0){var u=l.value,c=r()(u,2),p=c[0],g=c[1];void 0!==t.Form[p]&&(t.Form[p]=g)}}catch(e){o=!0,a=e}finally{try{!i&&n.return&&n.return()}finally{if(o)throw a}}var h=!0,b=!1,f=void 0;try{for(var v,F=d()(s()(e));!(h=(v=F.next()).done);h=!0){var y=v.value,w=r()(y,2);p=w[0],g=w[1];void 0!==t.Form.outRent[p]&&(t.Form.outRent[p]=g)}}catch(e){b=!0,f=e}finally{try{!h&&F.return&&F.return()}finally{if(b)throw f}}e.floorImg.length>0&&(t.uploadedImgNum=e.floorImg.length,e.floorImg.forEach(function(e,i){var o={name:e.floorimgId,url:""+m.a+m.f+e.floorVirtualUrl+"?access_token="+t.token};t.fileListImg.push(o)})),e.floorDrawingDtoList.length>0&&(t.uploadedNum=e.floorDrawingDtoList.length,e.floorDrawingDtoList.forEach(function(e,i){var o={name:e.floordrawingFileName,url:e.floordrawingId};t.fileList.push(o),t.downloadList.push(o)})),t.selectYardHandle(e.yardId),t.$refs.map.setBuildPosition(e.buildLongitude,e.buildLatitude,e.buildName),t.oldUndergroundFloor=t.Form.undergroundFloor-2*t.Form.undergroundFloor,t.oldOvergroundFloor=t.Form.overgroundFloor})},handleSelectionChange:function(e){this.selectData=e},rentStatusChange:function(e){0===e&&(this.Form.outRent.isRent=0)},submitFormBefore:function(){var e=this,t=this.Form.undergroundFloor-2*this.Form.undergroundFloor,i=this.Form.overgroundFloor-0;if(this.deleteFloorName=[],t>this.oldUndergroundFloor)for(var o=this.oldUndergroundFloor;o<t;o++)this.deleteFloorName.push(o);if(i<this.oldOvergroundFloor)for(var a=i+1;a<=this.oldOvergroundFloor;a++)this.deleteFloorName.push(a);this.deleteFloorName.length>0?Object(c.y)(this.activeBuildId,this.deleteFloorName).then(function(t){t&&e.submitForm()}).catch(function(t){e.$message({message:"删除的楼层里有房间，如要删除楼层，请先删除楼层里的房间！",type:"error"})}):this.submitForm()},submitForm:function(){var e=this;this.$refs.Form.validate(function(t){if(!t)return!1;0===e.uploadNum&&0===e.uploadImgNum?e.saveForm():e.submitUpload()})},saveForm:function(){var e=this;"add"===this.operateType?(this.Form.outRent.coveredArea=this.Form.buildArea,this.Form.outRent.endTime&&(this.Form.outRent.endTime=R()(this.Form.outRent.endTime).format("YYYY-MM-DD 23:59:59")),Object(c.a)(this.Form).then(function(t){e.$message({message:"新增楼座信息成功",type:"success"}),e.dialogVisible=!1,e.getList()}).catch(function(t){var i=t.result?t.result:"新增楼座信息失败";e.$message({message:i,type:"error"})})):"edit"===this.operateType&&(this.Form.outRent.coveredArea=this.Form.buildArea,this.Form.outRent.endTime&&(this.Form.outRent.endTime=R()(this.Form.outRent.endTime).format("YYYY-MM-DD 23:59:59")),Object(c.B)(this.Form).then(function(t){e.$message({message:"修改楼座信息成功",type:"success"}),e.dialogVisible=!1,e.getList()}).catch(function(t){var i=t.result?t.result:"修改楼座信息失败";e.$message({message:i,type:"error"})}))},submitUpload:function(){this.$refs.upload.submit(),this.$refs.uploadImg.submit()},beforeAvatarUpload:function(e){var t=e.size/1024/1024<200;return t||this.$message.error("上传文件大小不能超过200MB!"),t},handleRemove:function(e,t){var i=this;"success"===e.status&&(this.uploadedNum--,this.Form.oldCadIdList.push(e.url),this.downloadList=[],t.forEach(function(e){"success"===e.status&&i.downloadList.push(e)})),this.uploadNum=t.length-this.uploadedNum},handleImgRemove:function(e,t){"success"===e.status&&(this.uploadedImgNum--,this.Form.oldFloorImgIdList.push(e.name)),this.uploadImgNum=t.length-this.uploadedImgNum,this.fileListImg=t},handleSuccess:function(e,t,i){this.uploadSuccessNum++,this.Form.floorDrawingList.push({floordrawingUrl:e.imgList[0].imgPath,floordrawingVirtualUrl:e.imgList[0].imgUrl,floordrawingFileName:t.name,buildId:this.Form.buildId}),this.uploadSuccessNum===this.uploadNum&&(this.submitFlag=!0),(this.submitFlag&&this.uploadChangeFlag&&this.submitImgFlag&&this.uploadImgChangeFlag||this.submitFlag&&this.uploadChangeFlag&&!this.uploadImgChangeFlag)&&this.saveForm()},handleImgSuccess:function(e,t,i){this.uploadSuccessImgNum++,this.Form.newFloorImgUrlList.push({floorimgUrl:e.imgList[0].imgPath,floorVirtualUrl:e.imgList[0].imgUrl}),this.uploadSuccessImgNum===this.uploadImgNum&&(this.submitImgFlag=!0),(this.submitFlag&&this.uploadChangeFlag&&this.submitImgFlag&&this.uploadImgChangeFlag||!this.uploadChangeFlag&&this.submitImgFlag&&this.uploadImgChangeFlag)&&this.saveForm()},handleChange:function(e,t){this.uploadChangeFlag=!0,this.uploadNum=t.length-this.uploadedNum},handleImgChange:function(e,t){this.uploadImgChangeFlag=!0,this.uploadImgNum=t.length-this.uploadedImgNum,this.fileListImg=t},handleExceed:function(e,t){this.$message.warning("最多只能上传五个文件！")},handleImgExceed:function(e,t){this.$message.warning("最多只能上传一张图片！")},handleError:function(e,t,i){401===e.status&&(this.$store.dispatch("Logout",this.token),this.$router.push({path:"/login"}));var o=e.result?e.result:"上传失败";this.$message({message:o,type:"error"})},checkboxChange:function(e,t){if(!0===e)-1===this.CADDownload.indexOf(t)&&this.CADDownload.push(t);else{var i=this.CADDownload.indexOf(t);i>-1&&this.CADDownload.splice(i,1)}},downloadCAD:function(){var e=this,t={};t.buildId=this.Form.buildId,t.floorDrawingIdList=this.CADDownload,this.CADDownload.length>0?Object(p.k)(t).then(function(e){i("3UNf")(e,decodeURIComponent(sessionStorage.getItem("CADdownloadFileName")))}).catch(function(t){var i=t.result?t.result:"CAD下载失败";e.$message({message:i,type:"error"})}):this.$message({message:"请先选中一个CAD文件",type:"warning"})},selectYear:function(e,t){this.Form[e]=t},setPostion:function(e,t){this.Form.buildLongitude=e,this.Form.buildLatitude=t},mapBindCoord:function(e){this.limitFloat(e),null!==this.Form.buildLongitude&&null!==this.Form.buildLatitude&&""!==this.Form.buildLongitude&&""!==this.Form.buildLatitude&&h.a.$emit("mapBindCoord",this.Form.buildLongitude,this.Form.buildLatitude)},selectYardHandle:function(e){var t=this;Object(c.u)(e).then(function(e){t.$refs.map.setYardPosition(e.yardLongitude,e.yardLatitude,e.yardName)}).catch(function(e){var i=e.result?e.result:"坐标信息获取失败";t.$message({message:i,type:"error"})})},clearForm:function(e){for(var t in e){var i=this.getDataType(e[t]);if("String"===i)e[t]="";else if("Array"===i)e[t]=[];else if("Object"===i){a()(e[t]).length>0?this.clearForm(e[t]):e[t]={}}else e[t]=null}},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.Form.clearValidate()})},dialogClosed:function(){this.fileList=[],this.fileListImg=[],this.uploadNum=0,this.uploadImgNum=0,this.uploadedNum=0,this.uploadedImgNum=0,this.uploadSuccessNum=0,this.uploadSuccessImgNum=0,this.submitFlag=!1,this.submitImgFlag=!1,this.uploadChangeFlag=!1,this.uploadImgChangeFlag=!1,this.showMap=!1,this.clearForm(this.Form),this.Form.outRent.isRent=0,this.Form.elevatorNum="",this.CADDownload=[],this.downloadList=[],this.oldUndergroundFloor=null,this.oldOvergroundFloor=null,this.activeBuildId=null,this.floorNotUpdate=!1},limitFloat:function(e,t,i){void 0===i?this.Form[e]=this.Form[e].replace(/[^\d.]/g,"").replace(/\.{2,}/g,".").replace(".","$#$").replace(/\./g,"").replace("$#$",".").replace(/^(\-)*(\d+)\.(\d\d).*$/,"$1$2.$3").replace(/^\./g,""):this.Form[i][e]=this.Form[i][e].replace(/[^\d.]/g,"").replace(/\.{2,}/g,".").replace(".","$#$").replace(/\./g,"").replace("$#$",".").replace(/^(\-)*(\d+)\.(\d\d).*$/,"$1$2.$3").replace(/^\./g,""),t&&void 0===i&&""!==this.Form[e]&&(this.Form[e]=(this.Form[e]-0).toFixed(2)),t&&i&&""!==this.Form[i][e]&&(this.Form[i][e]=(this.Form[i][e]-0).toFixed(2))},limitInt:function(e){this.Form[e]=this.Form[e].replace(/[^0-9]/g,"")},getDataType:function(e){var t=!0,i=!1,o=void 0;try{for(var a,l=d()(["String","Object","Number","Array","Date"]);!(t=(a=l.next()).done);t=!0){var r=a.value;if(Object.prototype.toString.call(e)==="[object "+r+"]")return r}}catch(e){i=!0,o=e}finally{try{!t&&l.return&&l.return()}finally{if(i)throw o}}}},mounted:function(){var t=this;this.getList(),this.getYardDic(),this.getUnitDic(),this.getUserUnitDic(),setTimeout(function(){var i=e("#mainDiv").height(),o=e("#queryBox").outerHeight(!0),a=e("#operateBox").height();t.tableHeight=i-o-a},1),this.token=sessionStorage.getItem("TOKEN"),this.token&&(this.postHeaders.Authorization="Bearer "+this.token)}}}).call(t,i("7t+N"))}});
//# sourceMappingURL=19.42dfb8c087db34565d4b.js.map