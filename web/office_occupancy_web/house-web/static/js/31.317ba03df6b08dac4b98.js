webpackJsonp([31],{"4ZaO":function(e,t){},BKpK:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("zIJu"),l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"unitOverproof"}},[a("div",{staticClass:"query-box",attrs:{id:"queryBox"}},[a("div",{staticClass:"clearfix"},[a("div",{staticClass:"query-item"},[a("div",{staticClass:"query-title"},[e._v("使用单位：")]),e._v(" "),a("div",{staticClass:"query-input"},[a("el-select",{attrs:{filterable:"",multiple:"",placeholder:"请选择使用单位"},model:{value:e.unitIdList,callback:function(t){e.unitIdList=t},expression:"unitIdList"}},e._l(e.unitOptions,function(e){return a("el-option",{key:e.unitId,attrs:{label:e.unitName,value:e.unitId}})}))],1)]),e._v(" "),a("div",{staticClass:"query-item",staticStyle:{"margin-left":"50px"}},[a("div",{staticClass:"query-title"},[e._v("坐落地址：")]),e._v(" "),a("div",{staticClass:"query-input"},[a("el-input",{directives:[{name:"enter-trim",rawName:"v-enter-trim"}],attrs:{placeholder:"请输入坐落地址"},model:{value:e.yardPosition,callback:function(t){e.yardPosition=t},expression:"yardPosition"}})],1)]),e._v(" "),a("div",{staticClass:"query-item",staticStyle:{"margin-left":"50px"}},[a("div",{staticClass:"query-title"},[e._v("楼座：")]),e._v(" "),a("div",{staticClass:"query-input"},[a("el-select",{attrs:{filterable:"",placeholder:"请选择楼座"},model:{value:e.buildId,callback:function(t){e.buildId=t},expression:"buildId"}},e._l(e.buildOpts,function(e){return a("el-option",{key:e.buildId,attrs:{label:e.buildName,value:e.buildId}})}))],1)]),e._v(" "),a("div",{staticClass:"query-btn"},[a("search-btn",{on:{clickBtn:e.search}}),e._v(" "),a("reset-btn",{on:{clickBtn:e.reset}})],1)])]),e._v(" "),a("div",{staticClass:"table-box"},[a("table-component",{attrs:{tableData:e.tableData,tableHeight:e.tableHeight},on:{select:e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"index",width:"50",label:"编号",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"position",label:"位置",align:"center"}},e._l(e.address,function(e){return a("el-table-column",{key:e.id,attrs:{label:e.label,align:"center",prop:e.prop,width:e.width,"show-overflow-tooltip":!0}})})),e._v(" "),a("el-table-column",{attrs:{prop:"houseUseArea",label:"使用面积(m²)",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"specifiedArea",label:"标准面积(m²)",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"overproofArea",label:"超标面积(m²)",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"yardPosition",label:"坐落地址",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"housetypeName",label:"房屋类型",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"units",label:"单位名称",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"leadingOfficeName",label:"使用者姓名",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"professionalName",label:"级别",align:"center"}})],1),e._v(" "),a("div",{staticClass:"table-operate-box",attrs:{id:"operateBox"}},[a("div",{staticClass:"operate-pager"},[a("table-pagination",{attrs:{currentPage:e.currentPage,pageSize:e.pageSize,total:e.total},on:{"size-change":e.changeSize,"page-change":e.changePage}})],1)])],1)])},staticRenderFns:[]};var r=function(e){a("4ZaO")},o=a("VU/8")(i.a,l,!1,r,null,null);t.default=o.exports},zIJu:function(e,t,a){"use strict";(function(e){var i=a("hmyF"),l=a("zu8U"),r=a("Oizb"),o=a("yzMb"),n=a("5kkW"),s=a("3a1n"),d=a("WHmA"),u=a("uSev"),c=a("FAvH"),f=a("GR1E"),m=a("OMJi");a.n(m);t.a={components:{searchBtn:n.a,resetBtn:s.a,treeSelect:d.a,tableBtnGroup:c.a,tablePagination:f.a,tableComponent:u.a},data:function(){return{buildId:"",buildName:"",housetypeId:"",unitOptions:[],treeShow:!0,form:{yardId:"",buildId:"",floorName:"",houseId:""},loading:null,tableData:[],tableHeight:0,currentPage:1,pageSize:15,total:1,address:[{id:1,label:"院落",prop:"yardName",width:200},{id:2,label:"楼座",prop:"buildName",width:100},{id:3,label:"楼层",prop:"floorName",width:100},{id:4,label:"房间",prop:"houseNumber",width:100}],yardPosition:"",unitIdList:[],buildOpts:[]}},created:function(){this.getUnit(),this.getList()},methods:{loadingStart:function(e){this.loading||(this.loading=this.$loading({lock:!0,text:"正在加载...",spinner:"el-icon-loading",target:e,customClass:"loading-box"}))},loadingEnd:function(){this.loading&&(this.loading.close(),this.loading=null)},handleSelectionChange:function(e){this.selectData=e},changeSize:function(e){this.currentPage=1,this.pageSize=e,this.getList()},changePage:function(e){this.currentPage=e,this.getList()},search:function(){this.currentPage=1,this.getList()},reset:function(){this.currentPage=1,this.unitIdList=[],this.yardPosition="",this.buildId="",this.getList()},getUnit:function(){var e=this;Object(i.g)().then(function(t){e.unitOptions=t})},getList:function(){var e=this;this.loadingStart(".table-box"),Object(i.d)(this.currentPage,this.pageSize,this.unitIdList,this.yardPosition,this.buildId).then(function(t){e.loadingEnd(),t.records.length>0?(e.tableData=t.records,e.total=t.total,t.records.forEach(function(e){e.unit=[],e.units="",e.unitNames.forEach(function(t){e.unit.push(t.unitName)}),e.units=e.unit.join(","),e.houseUseArea=e.houseUseArea.toFixed(2),e.specifiedArea=e.specifiedArea.toFixed(2),e.overproofArea=(e.houseUseArea-e.specifiedArea).toFixed(2)})):(e.tableData=[],e.total=0)}).catch(function(t){e.loadingEnd();var a=t.result?t.result:"获取超标房间信息列表失败";e.$message({message:a,type:"error"})})},loadNodes:function(e,t){var a=this;if(0===e.level)Object(l.g)(null,0,null).then(function(e){return e.forEach(function(e){e.expand&&void 0!==e.expand||(e.leaf=!0)}),t(e)}).catch(function(e){var t=e.result?e.result:"树获取失败";a.$message({message:t,type:"error"})}),setTimeout(function(){if(!a.form.yardId||a.form.buildId||a.form.floorName||a.form.houseId){if(a.form.yardId&&a.form.buildId&&!a.form.floorName&&!a.form.houseId){var e={level:2};e.id_yard=a.form.yardId,e.id_build=a.form.yardId+":"+a.form.buildId,o.a.$emit("setTreeDefaultVal",e)}else if(a.form.yardId&&a.form.buildId&&a.form.floorName&&!a.form.houseId){var t={level:3};t.id_yard=a.form.yardId,t.id_build=a.form.yardId+":"+a.form.buildId,t.buildId=a.form.buildId,t.id_floor=a.form.yardId+":"+a.form.buildId+":"+a.form.floorName,o.a.$emit("setTreeDefaultVal",t)}else if(a.form.yardId&&a.form.buildId&&a.form.floorName&&a.form.houseId){var i={level:4};i.id_yard=a.form.yardId,i.id_build=a.form.yardId+":"+a.form.buildId,i.id_floor=a.form.yardId+":"+a.form.buildId+":"+a.form.floorName,i.floorName=a.form.floorName,i.id_house=a.form.houseId,o.a.$emit("setTreeDefaultVal",i)}}else{var l={level:1};l.id_yard=a.form.yardId,o.a.$emit("setTreeDefaultVal",l)}},1e3);else if(3===e.level){var i=sessionStorage.getItem("repairRemind_buildId")-0;Object(l.g)(e.data.value,3,null,i).then(function(e){return e.forEach(function(e){e.expand&&void 0!==e.expand||(e.leaf=!0)}),t(e)}).catch(function(e){var t=e.result?e.result:"树获取失败";a.$message({message:t,type:"error"})})}else Object(l.g)(e.data.value,e.data.type,null).then(function(e){return e.forEach(function(e){e.expand&&void 0!==e.expand||(e.leaf=!0)}),t(e)}).catch(function(e){var t=e.result?e.result:"树获取失败";a.$message({message:t,type:"error"})})},handleCheckChange:function(e){this.currentLevel=e.type,1===e.type?this.form.yardId=e.value:2===e.type?this.form.buildId=e.value:3===e.type?this.form.floorName=e.value:this.form.houseId=e.value},handleNodeExpand:function(e,t){1===t.level?this.form.yardId=e.value:2===t.level?(this.form.buildId=e.value,sessionStorage.setItem("repairRemind_buildId",e.value)):3===t.level&&(this.form.floorName=e.value)},getBuildPositon:function(){var e=this;Object(r.e)().then(function(t){e.buildOpts=[],t.forEach(function(t){1===t.type&&e.buildOpts.push(t)})}).catch(function(t){var a=t.result?t.result:"楼座名称获取失败";e.$message({message:a,type:"error"})})}},mounted:function(){var t=this;this.getBuildPositon(),setTimeout(function(){var a=e("#mainDiv").height(),i=e("#queryBox").outerHeight(!0),l=e("#operateBox").height();t.tableHeight=a-i-l},1)}}}).call(t,a("7t+N"))}});
//# sourceMappingURL=31.317ba03df6b08dac4b98.js.map