webpackJsonp([21],{"+NZw":function(e,t){},"3VR9":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i("6vFv"),a={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"repairProjectManage"}},[i("div",{staticClass:"query-box",attrs:{id:"queryBox"}},[i("div",{staticClass:"clearfix"},[i("div",{staticClass:"query-item"},[i("div",{staticClass:"query-title"},[e._v("申请时间：")]),e._v(" "),i("div",{staticClass:"query-input"},[i("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择日期","picker-options":e.pickerOptions_start},model:{value:e.beginDate,callback:function(t){e.beginDate=t},expression:"beginDate"}})],1)]),e._v(" "),i("div",{staticClass:"query-item"},[i("div",{staticClass:"query-title",staticStyle:{margin:"0 5px"}},[e._v("至")]),e._v(" "),i("div",{staticClass:"query-input"},[i("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd 23:59:59",placeholder:"选择日期","picker-options":e.pickerOptions_end},model:{value:e.endDate,callback:function(t){e.endDate=t},expression:"endDate"}})],1)]),e._v(" "),i("div",{staticClass:"query-item",staticStyle:{"margin-right":"50px"}},[i("div",{staticClass:"query-title"},[e._v("工程名称：")]),e._v(" "),i("div",{staticClass:"query-input"},[i("el-select",{attrs:{placeholder:"请选择工程名称"},model:{value:e.repairApplyId,callback:function(t){e.repairApplyId=t},expression:"repairApplyId"}},e._l(e.engineOpts,function(e,t){return i("el-option",{key:t,attrs:{label:e.repairProject,value:e.repairApplyId}})}))],1)]),e._v(" "),i("div",{staticClass:"query-item"},[i("div",{staticClass:"query-title"},[e._v("院落：")]),e._v(" "),i("div",{staticClass:"query-input"},[i("el-select",{attrs:{placeholder:"请选择院落"},model:{value:e.yardId,callback:function(t){e.yardId=t},expression:"yardId"}},e._l(e.yardOpts,function(e){return i("el-option",{key:e.yardId,attrs:{label:e.yardName,value:e.yardId}})}))],1)]),e._v(" "),i("div",{staticClass:"query-btn"},[i("search-btn",{on:{clickBtn:e.search}}),e._v(" "),i("reset-btn",{on:{clickBtn:e.reset}})],1)])]),e._v(" "),i("div",{staticClass:"table-box"},[i("table-component",{attrs:{tableData:e.tableData,tableHeight:e.tableHeight},on:{select:e.handleSelectionChange}},[i("el-table-column",{attrs:{type:"index",label:"序号",align:"center",width:"50"}}),e._v(" "),i("el-table-column",{attrs:{prop:"repairProject",label:"工程名称",align:"center","show-overflow-tooltip":!0}}),e._v(" "),i("el-table-column",{attrs:{label:"使用单位",align:"center",prop:"unitName","show-overflow-tooltip":!0}}),e._v(" "),i("el-table-column",{attrs:{prop:"finalSum",label:"财政评审金额",align:"center","show-overflow-tooltip":!0}}),e._v(" "),i("el-table-column",{attrs:{prop:"designUnit",label:"施工单位",align:"center","show-overflow-tooltip":!0}}),e._v(" "),i("el-table-column",{attrs:{prop:"repairApplyDate",width:"240",label:"申请时间",align:"center","show-overflow-tooltip":!0}}),e._v(" "),i("el-table-column",{attrs:{label:"管理",align:"center",width:"120",prop:"repairProgress"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("single-btn-group",{attrs:{isShowDetail:!1,isShowAlter:!1,isShowDelete:!1,isShowConstruction:100!=t.row.repairProgress&&2==t.row.repairType,isShowCompleted:100==t.row.repairProgress||0==t.row.repairType},on:{constructionClick:function(i){e.constructionClick(t.row)},completedClick:function(i){e.completedClick(t.row)}}})]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"付款",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("single-btn-group",{attrs:{isShowAlter:!1,isShowDelete:!1,isShowProcess:2==t.row.repairType},on:{processClick:function(i){e.processClick(t.row)}}})]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"项目状态",align:"center",prop:"repairProgress"},scopedSlots:e._u([{key:"default",fn:function(e){return[i("el-progress",{attrs:{percentage:e.row.repairProgress,"text-inside":!0,"stroke-width":12}})]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"负责人",align:"center",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("single-btn-group",{attrs:{isShowAlter:!1,isShowDelete:!1,isShowMove:2==t.row.repairType},on:{moveClick:function(i){e.moveClick(t.row)}}})]}}])})],1),e._v(" "),i("div",{staticClass:"table-operate-box",attrs:{id:"operateBox"}},[i("div",{staticClass:"operate-pager"},[i("table-pagination",{attrs:{currentPage:e.currentPage,pageSize:e.pageSize,total:e.total},on:{"size-change":e.changeSize,"page-change":e.changePage}})],1)])],1),e._v(" "),i("el-dialog",{attrs:{visible:e.dialogVisible.ConstructionManagement,"close-on-click-modal":!1,width:"1100px",center:!0},on:{"update:visible":function(t){e.$set(e.dialogVisible,"ConstructionManagement",t)},open:e.dialogOpen,closed:e.dialogClosed}},[i("div",{staticClass:"dialog-title",attrs:{slot:"title"},slot:"title"},[i("span",[e._v(e._s(e.title))])]),e._v(" "),i("div",{staticClass:"repair-info-box",staticStyle:{"margin-bottom":"20px",height:"500px","border-bottom":"1px solid #d8d8d8"}},[i("div",{staticClass:"repair-info-base clearfix"},e._l(e.baseInfo,function(t){return i("div",{key:t.id},[""!=t.text?i("span",[e._v(e._s(t.name)+"：")]):e._e(),e._v(" "),i("span",[e._v(e._s(t.text))])])})),e._v(" "),i("div",{staticClass:"repair-info-detail",staticStyle:{"margin-top":"20px"}},[i("div",{staticClass:"info-detail-title clearfix"},[i("span",[e._v("维修信息：")]),e._v(" "),i("div",{staticClass:"info-detail-btn"},[i("el-popover",{staticClass:"detail",attrs:{placement:"bottom-end",width:"300",trigger:"click","popper-class":"More-Info","visible-arrow":!1}},[i("ul",{staticClass:"repairProject-info-more"},e._l(e.repairProjectInfoMore,function(t,r){return i("li",{key:r,class:{"info-active":e.activeInfo===r},on:{click:function(i){e.showInfoDetail(t.repairModuleId,r)}}},[e._v(e._s(t.text))])})),e._v(" "),i("span",{directives:[{name:"show",rawName:"v-show",value:e.repairProjectInfoMore.length>0,expression:"repairProjectInfoMore.length > 0"}],staticClass:"more-btn",attrs:{slot:"reference"},slot:"reference"},[e._v("\n                更多\n                "),i("i",{staticClass:"el-icon-arrow-down"})])])],1)]),e._v(" "),i("div",{staticClass:"section2-content"},[e.infoState?i("div",[i("span",[e._v("维修地点：")]),e._v(" "),i("span",[e._v(e._s(e.repaireModuleAddress))])]):e._e(),e._v(" "),e.infoState?i("div",[i("span",[e._v("维修部位：")]),e._v(" "),i("span",[e._v(e._s(e.repairPartName))])]):e._e(),e._v(" "),e.infoState?i("div",[i("span",[e._v("维修内容：")]),e._v(" "),i("span",[e._v(e._s(e.repairModuleTarget))])]):e._e(),e._v(" "),e.infoState?i("div",[i("span",[e._v("维修面积(m²)：")]),e._v(" "),i("span",[e._v(e._s(e.repairModuleArea))])]):e._e(),e._v(" "),e.completionQuality&&e.infoState?i("div",[i("span",[e._v("质保日期：")]),e._v(" "),i("span",[e._v(e._s(e.completionQuality))])]):e._e(),e._v(" "),e.infoState&&e.detailFileListImg.length>0?i("div",{staticStyle:{height:"70px"}},[i("span",{staticStyle:{display:"inline-block"}},[e._v("照片：")]),e._v(" "),i("div",{staticClass:"img-preview-box clearfix",staticStyle:{display:"inline-block","vertical-align":"top","padding-top":"12px"}},e._l(e.detailFileListImg,function(t,r){return i("div",{key:r,staticClass:"img-preview-item"},[i("img",{attrs:{src:e.getImgUrl(t.virtualAddress),alt:"已上传图片"}})])}))]):e._e(),e._v(" "),e.infoState?e._e():i("div",{staticClass:"noInfo"},[e._v("暂无维修记录")])])])]),e._v(" "),i("el-collapse",{directives:[{name:"show",rawName:"v-show",value:"complete"==e.operateType,expression:"operateType == 'complete'"}],attrs:{accordion:""}},[e._l(e.logInfo,function(t,r){return i("el-collapse-item",{directives:[{name:"show",rawName:"v-show",value:0!=e.logInfo.length,expression:"logInfo.length !=0"}],key:r,attrs:{name:r}},[i("template",{slot:"title"},[i("div",{staticClass:"info-detail-title workDaily clearfix"},[i("span",[e._v("工作日志：")]),e._v(" "),i("span",[e._v(e._s(t.repairProjectUsername))]),e._v(" "),i("span",[e._v(e._s(t.repairProjectDate))])])]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:!e.state,expression:"!state"}],staticClass:"edit-btn",staticStyle:{"font-size":"14px",float:"right","line-height":"45px"}},[i("el-popover",{staticClass:"detail",attrs:{placement:"bottom-end",width:"300",trigger:"click","popper-class":"More-Info","visible-arrow":!1}},[i("ul",{staticClass:"repairProject-info-more"},e._l(t.partsIdAndImgVoList,function(t,r){return i("li",{key:r,class:{"info-active":e.activeInfo===r},on:{click:function(t){e.showPartDetail(r)}}},[e._v(e._s(t.repairPartName))])})),e._v(" "),i("span",{directives:[{name:"show",rawName:"v-show",value:t.partsIdAndImgVoList.length>0,expression:"item['partsIdAndImgVoList'].length > 0"}],staticClass:"more-btn",attrs:{slot:"reference"},slot:"reference"},[e._v("\n              更多\n              "),i("i",{staticClass:"el-icon-arrow-down"})])])],1),e._v(" "),i("div",{staticClass:"section2-content",staticStyle:{"padding-top":"10px"}},[i("el-form",{ref:"Forms",refInFor:!0,attrs:{inline:!0,rules:e.rules}},[i("el-form-item",{staticClass:"detail-form-item",attrs:{label:"施工部位：",prop:"repairePart","label-width":"92px"}},[i("el-input",{staticClass:"detail-form-item",attrs:{size:"small",readonly:"readonly"},model:{value:t.partsIdAndImgVoList[e.indexs].repairPartName,callback:function(i){e.$set(t.partsIdAndImgVoList[e.indexs],"repairPartName",i)},expression:"item['partsIdAndImgVoList'][indexs]['repairPartName']"}})],1),e._v(" "),i("el-form-item",{staticStyle:{display:"block"},attrs:{"label-width":"92px",label:"照片("+t.partsIdAndImgVoList[e.indexs].repairPartName+")："}},[i("span",[e._v(e._s(t.partsIdAndImgVoList[e.indexs].repairPartName))]),e._v(" "),i("div",{staticClass:"img-preview-box clearfix"},e._l(t.partsIdAndImgVoList[e.indexs].repairPmImgList,function(t){return i("div",{key:t.repairPmImgId,staticClass:"img-preview-item",on:{click:function(i){e.preview(t.repairPmImgVirtualUrl)}}},[i("img",{attrs:{src:e.getImgUrl(t.repairPmImgVirtualUrl),alt:"已上传证件"}}),e._v(" "),i("div",{staticClass:"bigger-view-warpper"},[i("i",{staticClass:"bigger-view-icon"})])])}))]),e._v(" "),i("el-form-item",{staticClass:"detail-form-item",attrs:{label:"施工天气：","label-width":"92px",prop:"repairProjectWeather"}},[i("el-input",{attrs:{size:"small",readonly:"readonly"},model:{value:t.repairProjectWeather,callback:function(i){e.$set(t,"repairProjectWeather",i)},expression:"item.repairProjectWeather"}})],1),e._v(" "),i("el-form-item",{staticClass:"detail-form-item",staticStyle:{width:"100%"},attrs:{label:"施工人数：","label-width":"92px",prop:"repairProjectNum"}},[i("el-input",{attrs:{size:"small",readonly:"readonly"},model:{value:t.repairProjectNum,callback:function(i){e.$set(t,"repairProjectNum",i)},expression:"item.repairProjectNum"}})],1),e._v(" "),i("el-form-item",{staticClass:"detail-form-item",attrs:{label:"存在问题：","label-width":"92px",prop:"repairProjectProblems"}},[i("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},size:"small",readonly:"readonly"},model:{value:t.repairProjectProblems,callback:function(i){e.$set(t,"repairProjectProblems",i)},expression:"item.repairProjectProblems"}})],1),e._v(" "),i("el-form-item",{staticClass:"detail-form-item",attrs:{label:"质量安全：","label-width":"92px",prop:"repairProjectSecurity"}},[i("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},size:"small",readonly:"readonly"},model:{value:t.repairProjectSecurity,callback:function(i){e.$set(t,"repairProjectSecurity",i)},expression:"item.repairProjectSecurity"}})],1),e._v(" "),i("el-form-item",{staticClass:"detail-form-item",attrs:{label:"文明施工：","label-width":"92px",prop:"repairProjectConstruction"}},[i("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},size:"small",readonly:"readonly"},model:{value:t.repairProjectConstruction,callback:function(i){e.$set(t,"repairProjectConstruction",i)},expression:"item.repairProjectConstruction"}})],1),e._v(" "),i("el-form-item",{staticClass:"detail-form-item",attrs:{label:"项目进度：","label-width":"92px",prop:"repairProjectProgress"}},[i("el-slider",{attrs:{disabled:"disabled"},model:{value:t.repairProjectProgress,callback:function(i){e.$set(t,"repairProjectProgress",i)},expression:"item.repairProjectProgress"}})],1)],1)],1)],2)}),e._v(" "),i("el-collapse-item",{directives:[{name:"show",rawName:"v-show",value:e.editLogInfo.repairProjectUsername,expression:"editLogInfo.repairProjectUsername"}],attrs:{name:e.logInfo.length}},[i("template",{slot:"title"},[i("div",{staticClass:"info-detail-title workDaily clearfix"},[i("span",[e._v("工作日志：")]),e._v(" "),i("span",[e._v(e._s(e.editLogInfo.repairProjectUsername))]),e._v(" "),i("span",[e._v(e._s(e.editLogInfo.repairProjectDate))])])]),e._v(" "),i("div",{staticClass:"edit-btn",staticStyle:{"font-size":"14px",float:"right","line-height":"45px"}},[i("el-popover",{staticClass:"detail",attrs:{placement:"bottom-end",width:"300",trigger:"click","popper-class":"More-Info","visible-arrow":!1}},[i("ul",{staticClass:"repairProject-info-more"},e._l(e.editLogInfo.partsIdAndImgVoList,function(t,r){return i("li",{key:r,class:{"info-active":e.activeInfo===r},on:{click:function(t){e.showPartDetails(r)}}},[e._v(e._s(t.repairPartName))])})),e._v(" "),i("span",{staticClass:"more-btn",attrs:{slot:"reference"},slot:"reference"},[e._v("\n              更多\n              "),i("i",{staticClass:"el-icon-arrow-down"})])])],1),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:!e.state,expression:"!state"}],staticClass:"edit-btn",staticStyle:{"font-size":"14px",float:"right","margin-right":"10px","line-height":"45px"},on:{click:e.editBtn}},[i("i",{staticClass:"iconfont"},[e._v("")]),e._v("编辑\n        ")]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:!e.state&&e.edit,expression:"!state && edit"}],staticClass:"edit-btn",staticStyle:{"font-size":"14px",float:"right","margin-right":"10px","line-height":"45px"},on:{click:e.saveBtn}},[i("i",{staticClass:"iconfont"},[e._v("")]),e._v("保存\n        ")]),e._v(" "),i("div",{staticClass:"section2-content",staticStyle:{"padding-top":"10px"}},[i("el-form",{ref:"Forms",attrs:{inline:!0,rules:e.rules}},[i("el-form-item",{class:{"detail-form-item":!e.edit},attrs:{label:"施工部位：",prop:"repairePart","label-width":"92px"}},[e.edit?i("el-select",{staticStyle:{width:"100%",height:"32px"},attrs:{placeholder:"请选择施工部位",size:"small"},model:{value:e.Forms.repairPartName,callback:function(t){e.$set(e.Forms,"repairPartName",t)},expression:"Forms.repairPartName"}},e._l(e.repairProjectInfoMore,function(e){return i("el-option",{key:e.repairPartId,attrs:{label:e.repairPartName,value:e.repairPartName}})})):e._e(),e._v(" "),e.edit?e._e():i("span",[e._v(e._s(e.Forms.repairPartName))])],1),e._v(" "),i("el-form-item",{staticStyle:{display:"block"},attrs:{"label-width":"92px",label:"照片("+e.Forms.repairPartName+")："}},[e.edit?i("div",{staticClass:"upload_box"},[i("el-upload",{ref:"uploads",attrs:{headers:e.postHeaders,action:e.uploadImgUrl,"list-type":"picture-card","file-list":e.showFileList,"on-remove":e.handleShowRemove,"auto-upload":!1,"on-success":e.handleShowSuccess,"on-change":e.handleShowChange,"on-error":e.handleError,accept:e.acceptImgType,limit:e.limitImgNum,"on-exceed":e.handleExceed,"before-upload":e.beforeAvatarUpload,multiple:""}},[i("i",{staticClass:"el-icon-plus"})])],1):i("div",{staticClass:"img-preview-box clearfix"},e._l(e.Forms.repairPmImgList,function(t){return i("div",{key:t.repairPmImgId,staticClass:"img-preview-item",on:{click:function(i){e.preview(t.repairPmImgVirtualUrl)}}},[i("img",{attrs:{src:e.getImgUrl(t.repairPmImgVirtualUrl),alt:"已上传证件"}}),e._v(" "),i("div",{staticClass:"bigger-view-warpper"},[i("i",{staticClass:"bigger-view-icon"})])])}))]),e._v(" "),i("el-form-item",{class:{"detail-form-item":!e.edit},attrs:{label:"施工天气：","label-width":"92px",prop:"repairProjectWeather"}},[i("el-input",{attrs:{size:"small",placeholder:"请输入施工天气",readonly:!e.edit},model:{value:e.editLogInfo.repairProjectWeather,callback:function(t){e.$set(e.editLogInfo,"repairProjectWeather",t)},expression:"editLogInfo.repairProjectWeather"}})],1),e._v(" "),i("el-form-item",{class:{"detail-form-item":!e.edit},staticStyle:{width:"100%"},attrs:{label:"施工人数：","label-width":"92px",prop:"repairProjectNum"}},[i("el-input",{attrs:{size:"small",readonly:!e.edit},model:{value:e.editLogInfo.repairProjectNum,callback:function(t){e.$set(e.editLogInfo,"repairProjectNum",t)},expression:"editLogInfo.repairProjectNum"}})],1),e._v(" "),i("el-form-item",{class:{"detail-form-item":!e.edit},attrs:{label:"存在问题：","label-width":"92px",prop:"repairProjectProblems"}},[i("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},size:"small",readonly:!e.edit},model:{value:e.editLogInfo.repairProjectProblems,callback:function(t){e.$set(e.editLogInfo,"repairProjectProblems",t)},expression:"editLogInfo.repairProjectProblems"}})],1),e._v(" "),i("el-form-item",{class:{"detail-form-item":!e.edit},attrs:{label:"质量安全：","label-width":"92px",prop:"repairProjectSecurity"}},[i("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},size:"small",readonly:!e.edit},model:{value:e.editLogInfo.repairProjectSecurity,callback:function(t){e.$set(e.editLogInfo,"repairProjectSecurity",t)},expression:"editLogInfo.repairProjectSecurity"}})],1),e._v(" "),i("el-form-item",{class:{"detail-form-item":!e.edit},attrs:{label:"文明施工：","label-width":"92px",prop:"repairProjectConstruction"}},[i("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},size:"small",readonly:!e.edit},model:{value:e.editLogInfo.repairProjectConstruction,callback:function(t){e.$set(e.editLogInfo,"repairProjectConstruction",t)},expression:"editLogInfo.repairProjectConstruction"}})],1),e._v(" "),i("el-form-item",{class:{"detail-form-item":!e.edit},attrs:{label:"项目进度：","label-width":"92px",prop:"repairProjectProgress"}},[i("el-slider",{attrs:{disabled:!e.edit},model:{value:e.Forms.repairProjectProgress,callback:function(t){e.$set(e.Forms,"repairProjectProgress",t)},expression:"Forms.repairProjectProgress"}})],1)],1)],1)],2)],2),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:"complete"==e.operateType&&e.state,expression:"operateType == 'complete' && state "}],staticStyle:{"margin-top":"10px"}},[i("div",{staticClass:"constructLog"},[i("div",[e._v("施工日志：")])]),e._v(" "),i("div",{staticClass:"section2-content add",staticStyle:{padding:"20px 0 20px 80px","padding-left":"80px"}},[i("div",{staticClass:"addRepairPart"},[i("span",{on:{click:e.addrepairPart}},[i("i",{staticClass:"el-icon-circle-plus-outline"}),e._v("新增施工部位\n          ")])]),e._v(" "),i("el-form",{ref:"forms",attrs:{inline:!0,model:e.forms,rules:e.rule}},[i("el-form-item",{staticClass:"repairePart",attrs:{label:"施工部位","label-width":"80px",prop:"repairePart"}},[i("el-select",{staticStyle:{width:"100%",height:"32px"},attrs:{placeholder:"请选择施工部位","popper-class":"repairPart",size:"small"},model:{value:e.forms.repairPartName,callback:function(t){e.$set(e.forms,"repairPartName",t)},expression:"forms.repairPartName"}},e._l(e.repairProjectInfoMore,function(e){return i("el-option",{key:e.repairPartId,attrs:{label:e.repairPartName,value:e.repairPartName}})}))],1),e._v(" "),i("el-form-item",{staticStyle:{display:"block"},attrs:{"label-width":"80px",label:e.forms.repairPartName?"照片("+e.forms.repairPartName+")":"照片"}},[i("div",{staticClass:"upload_box"},[i("el-upload",{ref:"uploadRegImg",attrs:{headers:e.postHeaders,action:e.uploadImgUrl,"list-type":"picture-card","file-list":e.fileLists,"on-remove":e.handleRegRemove,"auto-upload":!1,"on-success":e.handleRegSuccess,"on-change":e.handleRegChange,"on-error":e.handleError,accept:e.acceptImgType,limit:e.limitImgNum,"on-exceed":e.handleExceed,"before-upload":e.beforeAvatarUpload,multiple:""}},[i("i",{staticClass:"el-icon-plus"})])],1),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:"detail"===e.operateType,expression:"operateType==='detail'"}],staticClass:"img-preview-box clearfix"},e._l(e.partsIdImgList,function(t){return i("div",{key:t.id,staticClass:"img-preview-item",on:{click:function(i){e.preview(t.text)}}},[i("img",{attrs:{src:e.getImgUrl(t.text),alt:"已上传证件"}}),e._v(" "),i("div",{staticClass:"bigger-view-warpper"},[i("i",{staticClass:"bigger-view-icon"})]),e._v(" "),i("el-checkbox",{on:{change:function(t){e.imgCheckboxChange(t,e.item.text)}}})],1)}))]),e._v(" "),i("el-form-item",{attrs:{"label-width":"80px",label:"天气",prop:"repairProjectWeather"}},[i("el-input",{attrs:{size:"small",placeholder:"请输入施工天气"},model:{value:e.forms.repairProjectWeather,callback:function(t){e.$set(e.forms,"repairProjectWeather",t)},expression:"forms.repairProjectWeather"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"施工人数","label-width":"80px",prop:"repairProjectNum"}},[i("el-input",{attrs:{size:"small",placeholder:"请输入施工人数"},on:{blur:function(t){e.limitFloat("repairProjectNum",!0)}},nativeOn:{keyup:function(t){e.limitFloat("repairProjectNum")}},model:{value:e.forms.repairProjectNum,callback:function(t){e.$set(e.forms,"repairProjectNum",t)},expression:"forms.repairProjectNum"}})],1),e._v(" "),i("el-form-item",{attrs:{"label-width":"80px",label:"存在问题",prop:"repairProjectProblems"}},[i("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},size:"small",placeholder:"请输入存在问题"},model:{value:e.forms.repairProjectProblems,callback:function(t){e.$set(e.forms,"repairProjectProblems",t)},expression:"forms.repairProjectProblems"}})],1),e._v(" "),i("el-form-item",{attrs:{"label-width":"80px",label:"质量安全",prop:"repairProjectSecurity"}},[i("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},size:"small",placeholder:"请输入质量安全"},model:{value:e.forms.repairProjectSecurity,callback:function(t){e.$set(e.forms,"repairProjectSecurity",t)},expression:"forms.repairProjectSecurity"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"文明施工","label-width":"80px",prop:"repairProjectConstruction"}},[i("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},size:"small",placeholder:"请输入文明施工"},model:{value:e.forms.repairProjectConstruction,callback:function(t){e.$set(e.forms,"repairProjectConstruction",t)},expression:"forms.repairProjectConstruction"}})],1),e._v(" "),i("el-form-item",{attrs:{"label-width":"80px",label:"施工进度",prop:"repairProjectProgress"}},[i("el-slider",{model:{value:e.forms.repairProjectProgress,callback:function(t){e.$set(e.forms,"repairProjectProgress",t)},expression:"forms.repairProjectProgress"}})],1),e._v(" "),i("el-form-item",{attrs:{"label-width":"80px",label:"增项内容",prop:"repairItemsAddExplain"}},[i("el-input",{attrs:{autosize:{minRows:2,maxRows:4},size:"small",placeholder:"请输入增项"},model:{value:e.forms.repairItemsAddExplain,callback:function(t){e.$set(e.forms,"repairItemsAddExplain",t)},expression:"forms.repairItemsAddExplain"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"减项内容","label-width":"80px",prop:"repairItemsReduceExplain"}},[i("el-input",{attrs:{autosize:{minRows:2,maxRows:4},size:"small",placeholder:"请输入减项"},model:{value:e.forms.repairItemsReduceExplain,callback:function(t){e.$set(e.forms,"repairItemsReduceExplain",t)},expression:"forms.repairItemsReduceExplain"}})],1),e._v(" "),i("el-form-item",{staticStyle:{display:"block"},attrs:{"label-width":"80px",label:"增减文件",prop:"uploadFile"}},[i("div",{staticClass:"upload_box"},[i("el-upload",{ref:"uploadRegCerts",attrs:{headers:e.postHeaders,action:e.uploadReguCertUrl,"file-list":e.fileListRegCert,"auto-upload":!1,accept:e.acceptCertType,limit:e.limitNums,"on-success":e.handleRegCertSuccess,"on-change":e.handleRegCertChange,"on-remove":e.handleRegCertRemove,"on-error":e.handleRegError,"on-exceed":e.handleRegCertExceed,"before-upload":e.beforeAvatarUpload,multiple:""}},[i("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")])],1),e._v(" "),i("div",{staticClass:"cert-preview-box"},[e._l(e.detailFileListRegCert,function(t,r){return i("div",{key:r,staticClass:"cert-preview-item"},[i("el-checkbox",{on:{change:function(i){e.certCheckboxChange(i,t.enclosureId)}}}),e._v(" "),i("span",{staticClass:"cert-preview-name"},[e._v(e._s(t.enclosureName))])],1)}),e._v(" "),i("el-button",{directives:[{name:"show",rawName:"v-show",value:e.detailFileListRegCert.length>0,expression:"detailFileListRegCert.length > 0"}],staticClass:"download-btn",attrs:{type:"primary",icon:"el-icon-download"},on:{click:function(t){e.downloadImg("cert")}}},[e._v("下载文件")])],2)],1)])],1),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:"complete"===e.operateType,expression:"operateType==='complete'"}],staticClass:"query-box",attrs:{id:"queryBox"}})],1)]),e._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("div",{directives:[{name:"show",rawName:"v-show",value:"constructManage"===e.operateType,expression:"operateType==='constructManage'"}]},[i("div",{staticClass:"Title"},[i("div",[e._v("维修验收：")])]),e._v(" "),i("el-form",{ref:"Form",staticClass:"completeForm",attrs:{inline:!0,model:e.Form,rules:e.Rules}},[i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:0==e.repairType,expression:"repairType == 0"}],class:{"detail-form-item":e.status},attrs:{label:e.status?"施工单位：":"施工单位",prop:"constructionUnit","label-width":"100px"}},[i("el-input",{attrs:{size:"small",placeholder:e.status?"":"请输入施工单位",readonly:e.status},model:{value:e.Form.constructionUnit,callback:function(t){e.$set(e.Form,"constructionUnit",t)},expression:"Form.constructionUnit"}})],1),e._v(" "),i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:0==e.repairType,expression:"repairType == 0"}],class:{"detail-form-item":e.status},attrs:{label:e.status?"联系方式：":"联系方式",prop:"constructionUnit","label-width":"100px"}},[i("el-input",{attrs:{type:"phone",size:"small",placeholder:e.status?"":"请输入联系方式",readonly:e.status},model:{value:e.Form.phone,callback:function(t){e.$set(e.Form,"phone",t)},expression:"Form.phone"}})],1),e._v(" "),i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:0==e.repairType,expression:"repairType == 0"}],class:{"detail-form-item":e.status},attrs:{label:e.status?"负责人：":"负责人",prop:"constructionUnit","label-width":"100px"}},[i("el-input",{attrs:{size:"small",placeholder:e.status?"":"请输入负责人",readonly:e.status},model:{value:e.Form.applicantUserName,callback:function(t){e.$set(e.Form,"applicantUserName",t)},expression:"Form.applicantUserName"}})],1),e._v(" "),i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:0==e.repairType,expression:"repairType == 0"}],class:{"detail-form-item":e.status},attrs:{label:e.status?"开工时间：":"开工时间",prop:"startTime","label-width":"100px"}},[e.status?i("span",[e._v(e._s(e.Form.startTime))]):i("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:e.Form.startTime,callback:function(t){e.$set(e.Form,"startTime",t)},expression:"Form.startTime"}})],1),e._v(" "),i("el-form-item",{staticStyle:{display:"block","margin-bottom":"5px"},attrs:{label:e.status?"竣工报告：":"竣工报告","label-width":"100px",prop:"auditing"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:!e.status,expression:"!status"}],staticClass:"upload_box"},[i("el-upload",{ref:"uploadCert",attrs:{headers:e.postHeaders,action:e.uploadCertUrl,"file-list":e.fileListCert,"auto-upload":!1,accept:e.acceptCertType,limit:e.limitNum,"on-success":e.handleCertSuccess,"on-change":e.handleCertChange,"on-remove":e.handleCertRemove,"on-error":e.handleError,"on-exceed":e.handleCertExceed,"before-upload":e.beforeAvatarUpload,multiple:""}},[i("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")])],1)],1),e._v(" "),i("el-form-item",{attrs:{"label-width":"90px"}},[e.cerList&&e.cerList.length>0?i("div",{staticClass:"repaire-file-download clearfix"},[i("el-checkbox-group",{on:{change:e.handleCheckedFileChange},model:{value:e.fileDownLoadCheckedList,callback:function(t){e.fileDownLoadCheckedList=t},expression:"fileDownLoadCheckedList"}},[e._l(e.cerList,function(t,r){return i("div",{key:r,staticClass:"repaire-file-download-item"},[i("el-checkbox",{attrs:{label:t.detail}},[e._v(e._s(t.repairFileName))])],1)}),e._v(" "),i("el-button",{attrs:{size:"small",type:"primary"},nativeOn:{click:function(t){e.fileDownLoad(e.downloadCheckedList)}}},[e._v("点击下载")])],2)],1):e._e()])],1),e._v(" "),i("el-form-item",{staticStyle:{display:"block"},attrs:{label:e.status?"竣工图纸：":"竣工图纸","label-width":"100px",prop:"drawing"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:!e.status,expression:"!status"}],staticClass:"upload_box",staticStyle:{"padding-top":"10px"}},[i("el-upload",{ref:"upload",attrs:{"list-type":"picture-card",headers:e.postHeaders,action:e.uploadImgUrl,"file-list":e.fileListImg,"auto-upload":!1,accept:e.completeAcceptImgType,limit:e.limitNum,"on-success":e.handleSuccess,"on-change":e.handleChange,"on-error":e.handleError,"on-remove":e.handleRemove,"on-exceed":e.handleExceed,"before-upload":e.beforeAvatarUpload,multiple:""}},[i("i",{staticClass:"el-icon-plus"})])],1),e._v(" "),i("el-form-item",{attrs:{"label-width":"105px"}},[e.imgList&&e.imgList.length>0?i("div",{staticClass:"repaire-file-download clearfix",staticStyle:{"padding-top":"12px"}},[i("el-checkbox-group",{on:{change:e.handleCheckedImageChange},model:{value:e.imageDownLoadCheckedList,callback:function(t){e.imageDownLoadCheckedList=t},expression:"imageDownLoadCheckedList"}},e._l(e.imgList,function(t,r){return i("div",{key:r,staticClass:"img-view-item"},[i("img",{attrs:{src:e.getImgUrl(t.virtualAddress),alt:"竣工图纸"}}),e._v(" "),i("div",{staticClass:"bigger-view-warpper"},[i("div",{staticClass:"bigger-view-warpper-inner"}),e._v(" "),i("i",{staticClass:"el-icon-search",on:{click:function(i){e.preview(t.virtualAddress)}}})]),e._v(" "),i("el-checkbox",{attrs:{label:t.detail}},[e._v(e._s(null))])],1)})),e._v(" "),i("div",{staticClass:"img-download-btn"},[i("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){e.fileDownLoads(e.downloadCheckedList_img)}}},[e._v("点击下载")])],1)],1):e._e()])],1),e._v(" "),i("el-form-item",{class:{"detail-form-item":e.status},staticStyle:{margin:"10px 0"},attrs:{label:e.status?"备注信息：":"备注信息","label-width":"90px",prop:"comment"}},[i("el-input",{attrs:{type:"textarea",size:"small",readonly:e.status,placeholder:e.status?"":"请输入备注信息"},model:{value:e.Form.comment,callback:function(t){e.$set(e.Form,"comment",t)},expression:"Form.comment"}})],1)],1)],1),e._v(" "),i("cancel-btn",{attrs:{fontSize:14},on:{clickBtn:function(t){e.dialogVisible.ConstructionManagement=!1}}}),e._v(" "),i("confirm-btn",{directives:[{name:"show",rawName:"v-show",value:"constructManage"===e.operateType,expression:"operateType==='constructManage'"}],attrs:{fontSize:14},on:{clickBtn:function(t){e.submitForm("Form")}}}),e._v(" "),i("confirm-btn",{directives:[{name:"show",rawName:"v-show",value:"complete"===e.operateType&&e.state,expression:"operateType==='complete' && state"}],attrs:{fontSize:14},on:{clickBtn:function(t){e.submitForms("forms")}}}),e._v(" "),i("confirm-btn",{directives:[{name:"show",rawName:"v-show",value:"complete"===e.operateType&&!e.state,expression:"operateType==='complete' && !state"}],attrs:{fontSize:14},on:{clickBtn:function(t){e.submitforms("Forms")}}})],1)],1),e._v(" "),i("el-dialog",{staticClass:"move",attrs:{visible:e.dialogVisible.move,"close-on-click-modal":!1,width:"1100px",center:!0},on:{"update:visible":function(t){e.$set(e.dialogVisible,"move",t)},open:e.dialogOpen,closed:e.dialogClosed}},[i("div",{staticClass:"dialog-title",attrs:{slot:"title"},slot:"title"},[i("span",[e._v("项目转移")])]),e._v(" "),i("el-form",{ref:"form",attrs:{inline:!0,model:e.form,rules:e.rules}},[i("el-form-item",{attrs:{label:"选择转移人员：","label-width":"130px",prop:"movePerson"}},[i("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择转移人员",size:"small"},model:{value:e.form.movePerson,callback:function(t){e.$set(e.form,"movePerson",t)},expression:"form.movePerson"}},e._l(e.personOpts,function(e){return i("el-option",{key:e.user_id,attrs:{label:e.username,value:e.user_id}})}))],1),e._v(" "),i("el-form-item",{attrs:{label:"项目转移原因：","label-width":"130px",prop:"moveReason"}},[i("el-input",{staticStyle:{"margin-top":"2px",width:"534px"},attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"请输入项目转移原因"},model:{value:e.form.moveReason,callback:function(t){e.$set(e.form,"moveReason",t)},expression:"form.moveReason"}})],1)],1),e._v(" "),i("span",{directives:[{name:"show",rawName:"v-show",value:"detail"!==e.operateType,expression:"operateType!=='detail'"}],staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("cancel-btn",{attrs:{fontSize:14},on:{clickBtn:function(t){e.dialogVisible.move=!1}}}),e._v(" "),i("confirm-btn",{attrs:{fontSize:14},on:{clickBtn:e.submitMove}})],1)],1),e._v(" "),i("el-dialog",{staticClass:"payProcess",attrs:{visible:e.dialogVisible.payProcess,"close-on-click-modal":!1,width:"1100px",center:!0},on:{"update:visible":function(t){e.$set(e.dialogVisible,"payProcess",t)},open:e.dialogOpen,closed:e.dialogClosed}},[i("div",{staticClass:"dialog-title",attrs:{slot:"title"},slot:"title"},[i("span",[e._v("付款流程")])]),e._v(" "),i("el-steps",{attrs:{active:e.active,"align-center":"","finish-status":"success"}},e._l(e.RepairPaymentDetail,function(t,r){return i("el-step",{key:r,attrs:{title:t.stepLabel?t.stepLabel:""},nativeOn:{click:function(i){e.step(t.repairPaymentId,t.repairPaymentState,r)}}},[i("div",{attrs:{slot:"description"},slot:"description"},[i("div",{class:{hidden:!t.repairPaymentUsername}},[i("span",[e._v("付款人：")]),e._v("\n            "+e._s(t.repairPaymentUsername)+"\n          ")]),e._v(" "),i("div",{class:{hidden:typeof t.repairPaymentMoney==Number}},[i("span",[e._v("付款金额(万)：")]),e._v("\n            "+e._s(t.repairPaymentMoney)+"\n          ")]),e._v(" "),i("div",{class:{hidden:!t.repairPaymentTime}},[i("span",[e._v("付款时间：")]),e._v("\n            "+e._s(t.repairPaymentTime)+"\n          ")])])])}))],1)],1)},staticRenderFns:[]};var s=function(e){i("+NZw")},o=i("VU/8")(r.a,a,!1,s,null,null);t.default=o.exports},"6BhX":function(e,t,i){"use strict";var r={props:{text:{type:String,default:"新增"},fontSize:{type:Number,default:16},padding:{type:String,default:"7px 22px"},marginLeft:{type:Number,default:180}},data:function(){return{style:{padding:this.padding,"font-size":this.fontSize+"px","margin-left":this.marginLeft+"px"}}},directives:{debounce:{inserted:function(e,t){var i=void 0;e.addEventListener("click",function(){i&&clearTimeout(i),i=setTimeout(function(){t.value()},300)})}}},methods:{clickBtn:function(){this.$emit("clickBtn")}}},a={render:function(){var e=this.$createElement;return(this._self._c||e)("el-button",{directives:[{name:"debounce",rawName:"v-debounce",value:this.clickBtn,expression:"clickBtn"}],staticClass:"add-btn",style:this.style,attrs:{type:"primary",size:"medium"}},[this._v(this._s(this.text))])},staticRenderFns:[]};i("VU/8")(r,a,!1,null,null,null).exports},"6vFv":function(e,t,i){"use strict";(function(e){var r=i("BO1k"),a=i.n(r),s=i("fZjL"),o=i.n(s),l=i("mvHQ"),n=i.n(l),p=i("u3Mf"),c=i("Oizb"),m=i("HI+P"),d=i("UzlU"),u=i("uSev"),g=i("dO4M"),h=i("5kkW"),f=i("3a1n"),v=i("fYBn"),I=i("02tb"),b=(i("6BhX"),i("FAvH")),y=i("GR1E"),P=i("N+Om"),w=(i.n(P),i("OMJi"));i.n(w);t.a={components:{confirmBtn:I.a,cancelBtn:v.a,tableComponent:u.a,singleBtnGroup:g.a,tableBtnGroup:b.a,tablePagination:y.a,searchBtn:h.a,resetBtn:f.a},data:function(){var e=this;return{indexs:0,submitFlag:!1,ImgList:[],activeInfo:0,title:"",beginDate:"",endDate:"",repairApplyId:"",yardId:"",yardOpts:[],engineOpts:[],loading:null,tableHeight:0,tableData:[],currentPage:1,pageSize:15,total:1,dialogVisible:{ConstructionManagement:!1,move:!1,payProcess:!1},baseInfo:[{id:1,text:"",data:"repairProject",name:"维修项目名称"},{id:2,text:"",data:"finalSum",name:"财政评审金额"},{id:3,text:"",data:"repairModuleArea",name:"维修面积(m²)"},{id:4,text:"",data:"repairApplicant",name:"申请人"},{id:5,text:"",data:"repairApplyDate",name:"申请时间"},{id:6,text:"",data:"unitName",name:"使用单位"},{id:7,text:"",data:"designUnit",name:"设计单位"},{id:8,text:"",data:"accreditationUnit",name:"监理单位"},{id:9,text:"",data:"auditUnit",name:"审计单位"},{id:10,text:"",data:"planningPermit",name:"规划许可证"}],repairInfoMore:[],repairProjectInfoMore:[],popoverShow:!1,operateType:"constructManage",edit:!1,Form:{comment:"",addressList:[],deleteEnclosureIdList:[],constructionUnit:"",applicantUserName:"",phone:"",startTime:"",auditing:"",drawing:""},Forms:{lesseeUse:"",repairPartName:"",repairPmImgList:[],addressList:[],deleteEnclosureIdList:[]},rules:{},rule:{uploadFile:[{required:!0,validator:function(t,i,r){e.forms.uploadFile?r():r(new Error("请先上传文件"))},trigger:"blur"}]},Rules:{auditing:[{required:!0,validator:function(t,i,r){e.Form.auditing?r():r(new Error("请先上传报告"))},trigger:"blur"}],drawing:[{required:!0,validator:function(t,i,r){e.Form.drawing?r():r(new Error("请先上传图纸"))},trigger:"blur"}]},token:"",postHeaders:{Authorization:""},limitImgNum:5,limitNum:5,limitNums:1,acceptCertType:".doc,.docx",acceptImgType:"image/jpeg,image/gif,image/png,image/bmp",completeAcceptImgType:".dwg,.dwt,.dws,.dxt",uploadImgUrl:c.n+"?uploadType=constructFile",uploadCertUrl:c.n+"?uploadType=constructFile",uploadReguCertUrl:c.n+"?uploadType=constructFile",uploadSuccessImgNum:0,uploadSuccessRegImgNum:0,uploadSuccessCertNum:0,uploadSuccessRegCertNum:0,fileListCert:[],fileListRegCert:[],oldFileListRegCert:[],oldFileListCert:[],fileList:[],showFileList:[],oldShowFileList:[],fileLists:[],oldFileList:[],oldFileLists:[],fileListImg:[],detailFileListImg:[],detailFileListImgs:[],detailFileListCert:[],detailFileListCerts:[],detailFileListRegCert:[],detailFileList:[],pictureOpts:[],repaireModuleAddress:"",repairModuleArea:"",completionQuality:"",repairModuleTarget:"",repairPartName:"",comment:"",uploadImgNum:0,uploadRegImgNum:0,uploadedImgNum:0,uploadedRegImgNum:0,uploadCertNum:0,uploadRegCertNum:0,uploadedCertNum:0,uploadedRegCertNum:0,listShow:!0,logInfo:[],editLogInfo:{},form:{movePerson:"",moveReason:""},personOpts:[],RepairPaymentDetail:[],active:0,repairType:"",repairePart:"",partsIdImgList:[],repairPartsOpts:[],forms:{repairPartsId:"",repairPartName:"",repairProjectWeather:"",repairProjectNum:null,repairProjectId:null,repairProjectDate:"",repairProjectProblems:"",repairProjectSecurity:"",repairProjectConstruction:"",repairItemsAddExplain:"",repairItemsReduceExplain:"",repairProjectProgress:0,addressList:[],deleteEnclosureIdList:[],uploadFile:""},uploadImgChangeFlag:!1,uploadRegImgChangeFlag:!1,uploadCertChangeFlag:!1,uploadRegCertChangeFlag:!1,submitCertFlag:!1,submitRegCertFlag:!1,submitImgFlag:!1,submitRegImgFlag:!1,state:!0,status:!1,downloadCertList:[],downloadImgList:[],downLoadList:[],fileDownLoadCheckedList:[],downloadCheckedList:[],imageDownLoadCheckedList:[],downloadCheckedList_img:[],imgList:[],FileList:[],cerList:[],infoState:!0,pickerOptions_start:{},pickerOptions_end:{}}},created:function(){this.getEngineList(),this.getYardList(),this.getRepairProjectList()},methods:{loadingStart:function(e){this.loading||(this.loading=this.$loading({lock:!0,text:"正在加载...",spinner:"el-icon-loading",target:e,customClass:"loading-box"}))},loadingEnd:function(){this.loading&&(this.loading.close(),this.loading=null)},search:function(){this.currentPage=1,this.getRepairProjectList()},reset:function(){this.currentPage=1,this.beginDate="",this.endDate="",this.repairApplyId="",this.yardId="",this.getRepairProjectList()},handleSelectionChange:function(e){this.selectData=e},getBaseInfo:function(e){var t=this;Object(m.l)(e).then(function(e){var i=e[0];t.baseInfo.forEach(function(e){for(var t in i)e.data==t&&(e.text=i[t],"unitName"==t&&(i[t].length>1?e.text=i[t][0]:e.text=i[t].join(","))),"unitName"==t&&i[t]})}).catch(function(e){var i=e.result?e.result:"获取维修项目详情失败";t.$message({message:i,type:"error"})})},getRepairApprovalDetailList:function(e){var t=this;Object(m.o)(e).then(function(e){e.repairModuleDetailDtoList.length>0?(e.repairModuleDetailDtoList.forEach(function(e){var i={};e.positionStr&&(i.text=e.positionStr,i.repairModuleId=e.repairModuleId,i.repairPartId=e.repairPartId,i.repairPartName=e.repairPartName,t.repairProjectInfoMore.push(i))}),t.repairProjectInfoMore.length>0&&t.getRepairMessageDetailList(t.repairProjectInfoMore[0].repairModuleId)):t.infoState=!1}).catch(function(e){var i=e.result?e.result:"获取维修详情集合失败";t.$message({message:i,type:"error"})})},getRepairMessageDetailList:function(e){var t=this;Object(m.q)(e).then(function(e){t.repaireModuleAddress=e.positionStr,t.repairModuleTarget=e.repairModuleTarget,t.repairPartName=e.repairPartName,t.repairModuleArea=e.repairModuleArea,t.completionQuality=e.completionQuality,e.repairImgList.forEach(function(e){t.detailFileListImg.push(e)})}).catch(function(e){var i=e.result?e.result:"维修信息详情失败";t.$message({message:i,type:"error"})})},getRepairPartAll:function(){var e=this;Object(m.t)().then(function(t){e.repairPartsOpts=t})},constructionClick:function(e){var t=this;this.repairApplyId=e.repairApplyId,this.dialogVisible.ConstructionManagement=!0,this.title="施工管理",this.operateType="complete",this.getBaseInfo(e.repairApplyId),this.getRepairApprovalDetailList(e.repairApplyId),this.getRepairPartAll(),Object(m.p)(e.repairApplyId).then(function(e){e?(1==e.dateState&&(t.state=!1),"{}"!=n()(e)&&(e.repairLogDtoList.forEach(function(e){e.part=[],e.part.push(e.partsIdAndImgVoList[0].repairPartName),e.repairePart=e.part.length>0?e.part.join(","):""}),t.logInfo=e.repairLogDtoList,t.logInfo.length>1?(t.editLogInfo=t.logInfo[t.logInfo.length-1],t.logInfo.pop(),t.Forms.repairPartName=t.editLogInfo.partsIdAndImgVoList[t.indexs].repairPartName,t.Forms.repairPmImgList=t.editLogInfo.partsIdAndImgVoList[t.indexs].repairPmImgList,t.Forms.repairProjectId=t.editLogInfo.repairProjectId,t.Forms.repairProjectDate=t.editLogInfo.repairProjectDate,t.Forms.repairProjectProgress=t.editLogInfo.repairProjectProgress):1==t.logInfo.length&&(t.editLogInfo=JSON.parse(n()(t.logInfo[0])),t.logInfo.pop(),t.Forms.repairPartName=t.editLogInfo.partsIdAndImgVoList[t.indexs].repairPartName,t.Forms.repairPmImgList=JSON.parse(n()(t.editLogInfo.partsIdAndImgVoList[t.indexs].repairPmImgList)),t.Forms.repairProjectProgress=t.editLogInfo.repairProjectProgress))):t.logInfo=[]}).catch(function(e){var i=e.result?e.result:"查询施工管理信息失败";t.$message({message:i,type:"error"})})},completedClick:function(e){this.repairApplyId=e.repairApplyId,this.repairType=e.repairType,this.dialogVisible.ConstructionManagement=!0,this.title="竣工验收",sessionStorage.setItem("id",e.repairApplyId),this.operateType="constructManage",this.getBaseInfo(e.repairApplyId),this.getRepairApprovalDetailList(e.repairApplyId),this.getCompletedProject(e.repairApplyId)},getCompletedProject:function(e){var t=this;Object(m.g)(e).then(function(e){"{}"!=n()(e.documentList[0])&&e.documentList.length>0&&(t.status=!0,t.Form.comment=e.documentList[0].constructManageDb.comment,t.Form.applicantUserName=e.documentList[0].constructManageDb.applicantUserName,t.Form.startTime=e.documentList[0].constructManageDb.startTime,t.Form.constructionUnit=e.documentList[0].constructManageDb.constructionUnit,t.Form.phone=e.documentList[0].constructManageDb.phone,t.cerList=e.documentList[0].constructManageDb.auditReport,t.imgList=e.documentList[0].constructManageDb.buildDrawings,t.imgList.forEach(function(e){var t=e.virtualAddress.split(".")[1];"rar"!==t&&"zip"!==t&&"dwg"!=t&&"dwt"!=t&&"dws"!=t&&"dxt"!=t||(e.virtualAddress="/images/compress.png")}),t.cerList.forEach(function(e){e.detail=e.physicalAddress+","+e.repairFileName}),t.imgList.forEach(function(e){e.detail=e.physicalAddress+","+e.repairFileName}))}).catch(function(e){var i=e.result?e.result:"查询竣工信息失败";t.$message({message:i,type:"error"})})},fileDownLoad:function(e){var t=this;e&&0!==e.length?Object(d.b)(e,15,this.repairApplyId).then(function(e){i("3UNf")(e,decodeURIComponent(sessionStorage.getItem("CADdownloadFileName")))}).catch(function(e){var i=e.result?e.result:"文件下载失败";t.$message({message:i,type:"error"})}):this.$message({message:"请先选择一个文件",type:"warning"})},fileDownLoads:function(e){var t=this;e&&0!==e.length?Object(d.b)(e,16,this.repairApplyId).then(function(e){i("3UNf")(e,decodeURIComponent(sessionStorage.getItem("CADdownloadFileName")))}).catch(function(e){var i=e.result?e.result:"文件下载失败";t.$message({message:i,type:"error"})}):this.$message({message:"请先选择一个文件",type:"warning"})},handleCheckedFileChange:function(e){var t=this;this.downloadCheckedList=[],this.fileDownLoadCheckedList.forEach(function(e){var i=e.split(","),r={address:i[0],fileName:i[1]};t.downloadCheckedList.push(r)})},handleCheckedImageChange:function(e){var t=this;this.downloadCheckedList_img=[],this.imageDownLoadCheckedList.forEach(function(e){var i=e.split(","),r={address:i[0],fileName:i[1]};t.downloadCheckedList_img.push(r)})},certCheckboxChange:function(e,t){if(e)-1===this.downloadCertList.indexOf(t)&&this.downloadCertList.push(t);else{var i=this.downloadCertList.indexOf(t);this.downloadCertList.splice(i,1)}},imgCheckboxChange:function(e,t){if(e)-1===this.downloadImgList.indexOf(t)&&this.downloadImgList.push(t);else{var i=this.downloadImgList.indexOf(t);this.downloadImgList.splice(i,1)}},processClick:function(e){this.dialogVisible.payProcess=!0,this.repairApplyId=e.repairApplyId,this.getRepairPaymentDetail(e.repairApplyId)},getRepairPaymentDetail:function(e){var t=this;Object(m.w)(e).then(function(e){t.RepairPaymentDetail=e,t.RepairPaymentDetail.forEach(function(e,i){3==e.repairPaymentState&&(t.active=i+1)})}).catch(function(e){var i=e.result?e.result:"获取付款流程详情失败";t.$message({message:i,type:"error"})})},getUserlist:function(e){var t=this;Object(m.A)(e).then(function(e){t.personOpts=e}).catch(function(e){var i=e.result?e.result:"查询转移人员列表失败";t.$message({message:i,type:"error"})})},moveClick:function(e){this.dialogVisible.move=!0,this.getUserlist(e.repairApplyId),sessionStorage.setItem("id",e.repairApplyId)},submitMove:function(){var e=this,t=sessionStorage.getItem("id"),i="";this.personOpts.forEach(function(t){t.user_id==e.form.movePerson&&(i=t.username)}),Object(m.f)(t,i,this.form.movePerson,this.form.moveReason).then(function(t){sessionStorage.removeItem("id"),e.dialogVisible.move=!1,e.getRepairProjectList()}).catch(function(t){var i=t.result?t.result:"项目转移失败";e.$message({message:i,type:"error"})})},changeSize:function(e){this.currentPage=1,this.pageSize=e,this.getRepairProjectList()},changePage:function(e){this.currentPage=e,this.getRepairProjectList()},showInfoDetail:function(e,t){this.activeInfo=t,this.repaireModuleAddress="",this.repairModuleArea="",this.completionQuality="",this.repairModuleTarget="",this.detailFileListImg=[],this.getRepairMessageDetailList(e)},showPartDetail:function(e){this.activeInfo=e,this.indexs=e},showPartDetails:function(e){var t=this;this.Forms.addressList=[],this.edit=!1,this.activeInfo=e,this.Forms.repairPartName=this.editLogInfo.partsIdAndImgVoList[e].repairPartName,this.Forms.repairPmImgList=JSON.parse(n()(this.editLogInfo.partsIdAndImgVoList[e].repairPmImgList)),this.showFileList=[],this.editLogInfo.partsIdAndImgVoList[this.activeInfo].repairPmImgList.forEach(function(e){var i=e.repairPmImgVirtualUrl.split(".")[1];"rar"!==i&&"zip"!==i||(e.repairPmImgVirtualUrl="/images/compress.png");var r={name:e.repairPmImgId,url:p.a+p.f+e.repairPmImgVirtualUrl+"?access_token="+t.token,repairPmImgPhysicsUrl:e.repairPmImgPhysicsUrl};t.showFileList.push(r)}),this.uploadedImgNum=this.showFileList.length,this.uploadSuccessImgNum=0},formatDate:function(e){var t=new Date(e),i="yyyy-MM-dd hh:mm:ss",r={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()};for(var a in/(y+)/.test(i)&&(i=i.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length))),r)new RegExp("("+a+")").test(i)&&(i=i.replace(RegExp.$1,1==RegExp.$1.length?r[a]:("00"+r[a]).substr((""+r[a]).length)));return i},getEngineList:function(){var e=this;Object(m.k)().then(function(t){t.forEach(function(t){t.repairProject&&e.engineOpts.push(t)})}).catch(function(t){var i=t.result?t.result:"获取工程名列表失败";e.$message({message:i,type:"error"})})},getYardList:function(){var e=this;Object(c.d)(1).then(function(t){e.yardOpts=t}).catch(function(t){var i=t.result?t.result:"获取院落列表失败";e.$message({message:i,type:"error"})})},getRepairProjectList:function(){var e=this;if(this.loadingStart(".table-box"),this.beginDate&&this.endDate&&new Date(this.endDate)<new Date(this.beginDate))this.$message({message:"开始日期不能大于结束日期!",type:"warning"});else{var t=sessionStorage.getItem("userId");Object(m.x)(this.currentPage,this.pageSize,this.beginDate,this.endDate,this.repairApplyId,this.yardId,t).then(function(t){e.total=t.total,t.records.forEach(function(t){var i=function(i){"repairApplyDate"==i?t[i]=e.formatDate(t[i]):"yardId"==i&&e.yardOpts.forEach(function(e){e.yardId==t[i]&&(t[i]=e.yardName)})};for(var r in t)i(r);t.unitName&&(t.unitName=t.unitName.join(","))}),e.tableData=t.records,e.loadingEnd()}).catch(function(t){var i=t.result?t.result:"获取所有项目列表失败";e.$message({message:i,type:"error"}),e.loadingEnd()})}},clearForm:function(e){for(var t in e){var i=this.getDataType(e[t]);if("String"===i)e[t]="";else if("Array"===i)e[t]=[];else if("Object"===i){o()(e[t]).length>0?this.clearForm(e[t]):e[t]={}}else e[t]=null}},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.Form.clearValidate()})},dialogClosed:function(){this.Forms.deleteEnclosureIdList=[],this.editLogInfo={},this.indexs=0,this.submitFlag=!1,this.repairProjectInfoMore=[],this.activeInfo=0,sessionStorage.removeItem("id"),this.clearForm(this.Form),this.clearForm(this.forms),this.clearForm(this.Forms),this.forms.repairProjectProgress=0,this.Form.addressList=[],this.baseInfo.forEach(function(e){for(var t in e)e.value=""}),this.fileLists=[],this.oldFileLists=[],this.showFileList=[],this.oldShowFileList=[],this.fileListCert=[],this.fileListRegCert=[],this.fileListImg=[],this.oldFileListCert=[],this.oldFileListRegCert=[],this.oldFileListImg=[],this.uploadCertNum=0,this.uploadRegCertNum=0,this.uploadedCertNum=0,this.uploadImgNum=0,this.uploadRegImgNum=0,this.uploadedImgNum=0,this.uploadedRegImgNum=0,this.uploadSuccessCertNum=0,this.uploadSuccessRegCertNum=0,this.uploadSuccessImgNum=0,this.uploadSuccessRegImgNum=0,this.submitCertFlag=!1,this.submitRegCertFlag=!1,this.submitImgFlag=!1,this.submitRegImgFlag=!1,this.detailFileListCert=[],this.detailFileListCerts=[],this.detailFileListRegCert=[],this.detailFileListImg=[],this.detailFileListImgs=[],this.downloadImgList=[],this.downloadCertList=[],this.uploadCertChangeFlag=!1,this.uploadRegCertChangeFlag=!1,this.uploadImgChangeFlag=!1,this.uploadRegImgChangeFlag=!1,this.detailFileList=[],this.repairInfoMore=[],this.repaireModuleAddress="",this.repairModuleArea="",this.completionQuality="",this.repairModuleTarget="",this.repairPartName="",this.logInfo=[],this.repairApplyId="",this.form={movePerson:"",moveReason:""},this.deleteEnclosureIdList=[],this.active=0,this.repairType="",this.addBtn=!1,this.state=!0,this.status=!1,this.downLoadList=[],this.fileDownLoadCheckedList=[],this.imageDownLoadCheckedList=[],this.downloadCheckedList=[],this.cerList=[],this.imgList=[],this.ImgList=[],this.infoState=!0,this.downloadCheckedList_img=[],this.edit=!1},getDataType:function(e){var t=!0,i=!1,r=void 0;try{for(var s,o=a()(["String","Object","Number","Array","Function"]);!(t=(s=o.next()).done);t=!0){var l=s.value;if(Object.prototype.toString.call(e)==="[object "+l+"]")return l}}catch(e){i=!0,r=e}finally{try{!t&&o.return&&o.return()}finally{if(i)throw r}}},downloadImg:function(e){var t=this;"cert"===e?this.downloadCertList.length>0?Object(m.j)(this.downloadCertList).then(function(e){i("3UNf")(e,decodeURIComponent(sessionStorage.getItem("CADdownloadFileName")))}).catch(function(e){var i=e.result?e.result:"合同下载失败";t.$message({message:i,type:"error"})}):this.$message({message:"请先选中一个合同",type:"warning"}):this.downloadImgList.length>0?Object(m.j)(this.downloadImgList).then(function(e){i("3UNf")(e,decodeURIComponent(sessionStorage.getItem("CADdownloadFileName")))}).catch(function(e){var i=e.result?e.result:"证件下载失败";t.$message({message:i,type:"error"})}):this.$message({message:"请先选中一个证件",type:"warning"})},getImgUrl:function(e){return""+p.a+p.f+e+"?access_token="+this.token},preview:function(t){e(".img-preview-bigger").css("display","block"),e("#biggerImg").attr("src",""+p.a+p.f+t+"?access_token="+this.token)},closePreview:function(){e(".img-preview-bigger").css("display","none"),e("#biggerImg").css("width","auto")},limitFloat:function(e,t){this.Form[e]=this.Form[e].replace(/[^\d.]/g,"").replace(/\.{2,}/g,".").replace(".","$#$").replace(/\./g,"").replace("$#$",".").replace(/^(\-)*(\d+)\.(\d\d).*$/,"$1$2.$3").replace(/^\./g,""),t&&""!==this.Form[e]&&(this.Form[e]=(this.Form[e]-0).toFixed(2))},arrow:function(){this.listShow=!this.listShow},editBtn:function(){var e=this;this.edit=!0,this.showFileList=[],this.Forms.repairPmImgList.forEach(function(t){var i=t.repairPmImgVirtualUrl.split(".")[1];"rar"!==i&&"zip"!==i||(t.repairPmImgVirtualUrl="/images/compress.png");var r={name:t.repairPmImgId,url:p.a+p.f+t.repairPmImgVirtualUrl+"?access_token="+e.token,repairPmImgPhysicsUrl:t.repairPmImgPhysicsUrl};e.showFileList.push(r)}),this.uploadedImgNum=this.showFileList.length},saveBtn:function(){0!=this.uploadImgNum&&this.$refs.uploads.submit()},addrepairPart:function(){var e=this;this.repairProjectInfoMore.forEach(function(t){t.repairPartName==e.forms.repairPartName&&(e.forms.repairPartsId=t.repairPartId,e.forms.repairModuleId=t.repairModuleId)}),0==!this.uploadRegImgNum&&this.$refs.uploadRegImg.submit()},saveRepairPart:function(){var e={repairPmImgList:[]};e.repairPartsId=JSON.parse(n()(this.forms.repairPartsId)),e.repairPartName=JSON.parse(n()(this.forms.repairPartName)),e.repairModuleId=JSON.parse(n()(this.forms.repairModuleId)),this.forms.addressList.forEach(function(t){var i={};i.enclosureType=t.enclosureType,i.repairFileName=t.repairFileName,i.repairPmImgPhysicsUrl=t.physicalAddress,i.repairPmImgVirtualUrl=t.virtualAddress,e.repairPmImgList.push(i)}),this.ImgList.push(e),this.forms.repairPartName="",this.forms.addressList=[],this.fileLists=[],this.uploadSuccessRegImgNum=0,this.uploadRegImgNum=0,this.uploadedRegImgNum=0,this.submitRegImgFlag=!1},saveRepairParts:function(){var e=this;this.editLogInfo.partsIdAndImgVoList[this.activeInfo].repairPartName=this.Forms.repairPartName,this.repairProjectInfoMore.forEach(function(t){t.repairPartName==e.Forms.repairPartName&&(e.editLogInfo.partsIdAndImgVoList[e.activeInfo].repairPartsId=t.repairPartId,e.editLogInfo.partsIdAndImgVoList[e.activeInfo].repairModuleId=t.repairModuleId)}),this.editLogInfo.partsIdAndImgVoList[this.activeInfo].repairPmImgList=[],this.Forms.addressList.forEach(function(t){var i={};i.enclosureType=t.enclosureType,i.repairPmImgPhysicsUrl=t.physicalAddress,i.repairPmImgVirtualUrl=t.virtualAddress,e.editLogInfo.partsIdAndImgVoList[e.activeInfo].repairPmImgList.push(i)})},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;0===t.uploadImgNum&&0===t.uploadCertNum?t.saveForm():t.submitUpload()})},submitForms:function(e){var t=this;this.submitFlag=!0,this.$refs[e].validate(function(e){if(!e)return!1;0===t.uploadRegCertNum&&0===t.uploadRegImgNum?t.saveForm():t.submitUploads()})},submitforms:function(e){this.submitFlag=!0,this.uploadImgNum===this.uploadSuccessImgNum?this.saveForms():this.submitUpload()},saveForm:function(){var e=this;if("constructManage"===this.operateType){if(0==this.repairType)(t={comment:"",buildDrawings:[],auditReport:[],constructionUnit:"",applicantUserName:"",phone:"",startTime:""}).constructionUnit=this.Form.constructionUnit,t.applicantUserName=this.Form.applicantUserName,t.phone=this.Form.phone,t.startTime=this.Form.startTime;else var t={comment:"",buildDrawings:[],auditReport:[]};this.Form.addressList.forEach(function(e){4!=e.enclosureType&&3!=e.enclosureType||t.buildDrawings.push(e),2==e.enclosureType&&t.auditReport.push(e)}),t.comment=this.Form.comment,Object(m.a)(t,this.repairApplyId).then(function(t){e.dialogVisible.ConstructionManagement=!1,e.repairApplyId="",e.getRepairProjectList()}).catch(function(t){var i=t.result?t.result:"竣工验收失败";e.$message({message:i,type:"error"})}),sessionStorage.removeItem("id")}else if("complete"===this.operateType){var i,r={},a=[],s=[],o={},l={};this.repairProjectInfoMore.forEach(function(t){t.repairPartName==e.forms.repairPartName&&(e.forms.repairPartsId=t.repairPartId,e.forms.repairModuleId=t.repairModuleId)}),l.repairModuleId=this.forms.repairModuleId,l.repairPartName=this.forms.repairPartName,l.repairPartsId=this.forms.repairPartsId,o.repairItemsAddExplain=this.forms.repairItemsAddExplain,o.repairItemsReduceExplain=this.forms.repairItemsReduceExplain,this.forms.addressList.forEach(function(e){if(1==e.enclosureType||3==e.enclosureType){var t={};t.enclosureType=e.enclosureType,t.repairFileName=e.repairFileName,t.repairPmImgPhysicsUrl=e.physicalAddress,t.repairPmImgVirtualUrl=e.virtualAddress,s.push(t)}else 2==e.enclosureType&&(o.repairItemsPhysicalAddress=e.physicalAddress,o.repairItemsVirtualAddress=e.virtualAddress)}),l.repairPmImgList=s,this.ImgList.push(l),i=this.ImgList,o.repairApplyId=this.repairApplyId,a.push(o),r.repairProjectConstruction=this.forms.repairProjectConstruction,r.repairProjectNum=this.forms.repairProjectNum,r.repairProjectProblems=this.forms.repairProjectProblems,r.repairProjectProgress=this.forms.repairProjectProgress,r.repairProjectSecurity=this.forms.repairProjectSecurity,r.repairProjectWeather=this.forms.repairProjectWeather,r.repairProjectUsername=sessionStorage.getItem("username"),r.repairProjectUserid=sessionStorage.getItem("userId"),Object(m.c)(i,this.repairApplyId,a,r).then(function(t){e.dialogVisible.ConstructionManagement=!1,e.repairApplyId="",e.getRepairProjectList(),e.$message({message:"施工日志新增成功!",type:"success"})}).catch(function(t){var i=t.result?t.result:"施工日志新增失败";e.$message({message:i,type:"error"})})}this.fileListCert=this.oldFileListCert,this.fileListRegCert=this.oldFileListRegCert,this.fileListImg=this.oldFileListImg,this.uploadCertNum=0,this.uploadRegCertNum=0,this.uploadSuccessCertNum=0,this.uploadSuccessRegCertNum=0,this.uploadImgNum=0,this.uploadRegImgNum=0,this.uploadSuccessImgNum=0,this.uploadSuccessRegImgNum=0,this.submitCertFlag=!1,this.submitRegCertFlag=!1,this.submitImgFlag=!1,this.submitRegImgFlag=!1,this.uploadCertChangeFlag=!1,this.uploadRegCertChangeFlag=!1,this.uploadImgChangeFlag=!1,this.uploadRegImgChangeFlag=!1},saveForms:function(){var e=this;this.editLogInfo.partsIdAndImgVoList.forEach(function(e){e.repairPmImgList.forEach(function(t,i){t.repairProjectPartsId&&e.repairPmImgList.splice(i,1)})});var t=this.Forms.deleteEnclosureIdList,i={};i.repairProjectConstruction=this.editLogInfo.repairProjectConstruction,i.repairProjectDate=this.editLogInfo.repairProjectDate,i.repairProjectId=this.editLogInfo.repairProjectId,i.repairProjectNum=this.editLogInfo.repairProjectNum,i.repairProjectProblems=this.editLogInfo.repairProjectProblems,i.repairProjectSecurity=this.editLogInfo.repairProjectSecurity,i.repairProjectUsername=this.editLogInfo.repairProjectUsername,i.repairProjectUserid=this.editLogInfo.repairProjectUserid,i.repairProjectWeather=this.editLogInfo.repairProjectWeather,i.repairProjectProgress=this.Forms.repairProjectProgress;Object(m.H)(t,this.editLogInfo.partsIdAndImgVoList,this.repairApplyId,i).then(function(t){e.dialogVisible.ConstructionManagement=!1,e.repairApplyId="",e.getRepairProjectList(),e.$message({message:"施工日志修改成功!",type:"success"})}).catch(function(t){var i=t.result?t.result:"施工日志修改失败";e.$message({message:i,type:"error"})})},beforeAvatarUpload:function(e){var t=e.size/1024/1024<200;return t||this.$message.error("上传照片大小不能超过 200MB!"),t},submitUpload:function(){this.$refs.uploadCert.submit(),this.$refs.upload.submit()},submitUploads:function(){this.$refs.uploadRegImg.submit(),this.$refs.uploadRegCerts.submit()},handleCertRemove:function(e,t){"success"===e.status&&(this.Form.deleteEnclosureIdList.push(e.uid),this.uploadedCertNum--),this.uploadCertNum=t.length-this.uploadedCertNum,0===t.length&&(this.Form.auditing="")},handleRemove:function(e,t){"success"===e.status&&(this.Form.deleteEnclosureIdList.push(e.name),this.uploadedImgNum--),this.uploadImgNum=t.length-this.uploadedImgNum,0==t.length&&(this.Form.drawing="")},handleShowRemove:function(e,t){"success"===e.status&&(this.Forms.deleteEnclosureIdList.push(e.name),this.uploadedImgNum--),this.uploadImgNum=t.length-this.uploadedImgNum},handleRegRemove:function(e,t){"success"===e.status&&(this.forms.deleteEnclosureIdList.push(e.name),this.uploadedRegImgNum--),this.uploadRegImgNum=t.length-this.uploadedRegImgNum},handleRegCertRemove:function(e,t){"success"===e.status&&(this.forms.deleteEnclosureIdList.push(e.uid),this.uploadedRegCertNum--),this.uploadRegCertNum=t.length-this.uploadedRegCertNum,0==t.length&&(this.forms.uploadFile="")},handleCertSuccess:function(e,t,i){this.uploadCertChangeFlag=!0,this.uploadSuccessCertNum++,this.Form.addressList.push({enclosureType:2,physicalAddress:e.imgList[0].imgPath,virtualAddress:e.imgList[0].imgUrl,repairFileName:t.name}),this.uploadSuccessCertNum===this.uploadCertNum&&(this.submitCertFlag=!0),this.submitCertFlag&&this.submitImgFlag&&this.saveForm(),i.length>0&&(this.Form.auditing="true")},handleRegCertSuccess:function(e,t,i){this.uploadSuccessRegCertNum++,this.forms.addressList.push({enclosureType:2,physicalAddress:e.imgList[0].imgPath,virtualAddress:e.imgList[0].imgUrl}),this.uploadSuccessRegCertNum===this.uploadRegCertNum&&(this.submitRegCertFlag=!0),this.submitRegImgFlag&&this.submitRegCertFlag&&this.submitFlag&&this.saveForm()},handleSuccess:function(e,t,i){this.uploadSuccessImgNum++;var r=t.name.split(".");"rar"==r[r.length-1]||"zip"==r[r.length-1]?this.Form.addressList.push({enclosureType:3,physicalAddress:e.imgList[0].imgPath,virtualAddress:e.imgList[0].imgUrl,repairFileName:t.name}):this.Form.addressList.push({enclosureType:4,physicalAddress:e.imgList[0].imgPath,virtualAddress:e.imgList[0].imgUrl,repairFileName:t.name}),this.uploadSuccessImgNum===this.uploadImgNum&&(this.submitImgFlag=!0),this.submitImgFlag&&this.submitCertFlag&&this.saveForm()},handleShowSuccess:function(e,t,i){this.uploadSuccessImgNum++;var r=t.name.split(".");"rar"==r[r.length-1]||"zip"==r[r.length-1]?this.Forms.addressList.push({enclosureType:3,physicalAddress:e.imgList[0].imgPath,virtualAddress:e.imgList[0].imgUrl,repairFileName:t.name}):this.Forms.addressList.push({enclosureType:1,physicalAddress:e.imgList[0].imgPath,virtualAddress:e.imgList[0].imgUrl,repairFileName:t.name}),this.uploadSuccessImgNum===this.uploadImgNum&&this.saveRepairParts(),this.submitFlag&&this.saveForms()},handleRegSuccess:function(e,t,i){this.uploadSuccessRegImgNum++;var r=t.name.split(".");"rar"==r[r.length-1]||"zip"==r[r.length-1]?this.forms.addressList.push({enclosureType:3,physicalAddress:e.imgList[0].imgPath,virtualAddress:e.imgList[0].imgUrl,repairFileName:t.name}):this.forms.addressList.push({enclosureType:1,physicalAddress:e.imgList[0].imgPath,virtualAddress:e.imgList[0].imgUrl,repairFileName:t.name}),this.uploadSuccessRegImgNum===this.uploadRegImgNum&&(this.submitRegImgFlag=!0,this.submitFlag||this.saveRepairPart()),this.submitRegImgFlag&&this.submitRegCertFlag&&this.submitFlag&&this.saveForm()},handleCertChange:function(e,t){"image"!==e.raw.type.split("/")[0]&&(e.url=""+p.a+p.f+"/images/compress.png"),this.uploadCertNum=t.length-this.uploadedCertNum,t.length>0&&(this.Form.auditing="true")},handleChange:function(e,t){"image"!==e.raw.type.split("/")[0]&&(e.url=""+p.a+p.f+"/images/compress.png"),this.uploadImgNum=t.length-this.uploadedImgNum,t.length>0&&(this.Form.drawing="true")},handleShowChange:function(e,t){"image"!==e.raw.type.split("/")[0]&&(e.url=""+p.a+p.f+"/images/compress.png"),this.uploadImgNum=t.length-this.uploadedImgNum},handleRegChange:function(e,t){"image"!==e.raw.type.split("/")[0]&&(e.url=""+p.a+p.f+"/images/compress.png"),this.uploadRegImgChangeFlag=!0,this.uploadRegImgNum=t.length-this.uploadedRegImgNum},handleRegCertChange:function(e,t){"image"!==e.raw.type.split("/")[0]&&(e.url=""+p.a+p.f+"/images/compress.png"),this.uploadRegCertChangeFlag=!0,this.uploadRegCertNum=t.length-this.uploadedRegCertNum,t.length>0&&(this.forms.uploadFile="true")},handleCertExceed:function(e,t){this.$message.warning("最多只能上传五份文件！")},handleExceed:function(e,t){this.$message.warning("最多只能上传五张图片！")},handleRegCertExceed:function(e,t){this.$message.warning("最多只能上传一份文件！")},handleError:function(e,t,i){401===e.status&&(this.$store.dispatch("Logout",this.token),this.$router.push({path:"/login"})),this.$message({message:e.message,type:"error"})},handleRegError:function(e,t,i){401===e.status&&(this.$store.dispatch("Logout",this.token),this.$router.push({path:"/login"})),this.$message({message:e.message,type:"error"})},step:function(e,t,i){var r=this,a=[];1==t&&(this.RepairPaymentDetail.forEach(function(e,t){1==e.repairPaymentState&&t<=i&&a.push(e.repairPaymentId)}),this.$confirm("确认付款, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(m.J)(a,r.repairApplyId).then(function(e){r.dialogVisible.payProcess=!1,r.$message({message:"状态修改成功!",type:"success"})}).catch(function(e){var t=e.result?e.result:"发起付款失败";r.$message({message:t,type:"error"})})}).catch(function(){r.$message({type:"info",message:"已取消"})}))}},mounted:function(){var t=this;setTimeout(function(){var i=e("#mainDiv").height(),r=e("#queryBox").outerHeight(!0),a=e("#operateBox").height();t.tableHeight=i-r-a},1),this.token=sessionStorage.getItem("TOKEN"),this.token&&(this.postHeaders.Authorization="Bearer "+this.token),this.pickerOptions_start.disabledDate=function(e){if(t.endDate)return new Date(t.endDate).getTime()<e.getTime()},this.pickerOptions_end.disabledDate=function(e){if(t.beginDate)return new Date(t.beginDate).getTime()>e.getTime()}}}}).call(t,i("7t+N"))}});
//# sourceMappingURL=21.1f111d970b5517a087d2.js.map