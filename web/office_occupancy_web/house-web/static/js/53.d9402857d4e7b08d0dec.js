webpackJsonp([53],{AaP3:function(e,t,a){"use strict";(function(e){var i=a("fZjL"),n=a.n(i),s=a("d7EF"),o=a.n(s),l=a("W3Iv"),r=a.n(l),c=a("BO1k"),u=a.n(c),p=a("d6pC"),f=(a("yzMb"),a("uSev")),d=a("dO4M"),g=a("FAvH"),m=a("GR1E"),h=a("fYBn"),v=a("02tb"),b=a("5kkW"),y=a("3a1n");t.a={components:{singleBtnGroup:d.a,tableBtnGroup:g.a,tablePagination:m.a,tableComponent:f.a,cancelBtn:h.a,confirmBtn:v.a,searchBtn:b.a,resetBtn:y.a},data:function(){return{name:"",currentPage:1,pageSize:15,total:0,loading:null,tableHeight:0,selectData:[],tableData:[],dialogTitle:"",operateType:"add",dialogVisible:!1,Form:{professionalId:"",professionalLevel:"",professionalName:"",specifiedArea:null},professionalLevelOpts:[{id:1,name:"中央机关"},{id:2,name:"省级机关"},{id:3,name:"市级机关"},{id:4,name:"县级机关"},{id:5,name:"乡级机关"}],rules:{professionalLevel:[{required:!0,message:"职称不能为空",trigger:"blur"}],professionalName:[{required:!0,message:"等级不能为空",trigger:"blur"}],specifiedArea:[{required:!0,message:"规定面积不能为空",trigger:"blur"}]}}},methods:{loadingStart:function(e){this.loading||(this.loading=this.$loading({lock:!0,text:"正在加载...",spinner:"el-icon-loading",target:e,customClass:"loading-box"}))},loadingEnd:function(){this.loading&&(this.loading.close(),this.loading=null)},changeSize:function(e){this.pageSize=e,this.getList()},changePage:function(e){this.currentPage=e,this.getList()},getList:function(){var e=this;this.loadingStart(".table-box"),Object(p.o)(this.currentPage,this.pageSize,this.name).then(function(t){e.tableData=t.records,e.total=t.total,e.tableData.forEach(function(t){e.professionalLevelOpts.forEach(function(e){t.professionalLevel===e.id&&(t.professionalLevelName=e.name)}),void 0===t.professionalLevelName&&(t.professionalLevelName="-")}),e.loadingEnd()}).catch(function(t){e.loadingEnd();var a=t.result?t.result:"职称信息获取失败";e.$message({message:a,type:"error"})})},search:function(){this.currentPage=1,this.getList()},reset:function(){this.currentPage=1,this.name="",this.search()},addUnit:function(){this.dialogVisible=!0,this.dialogTitle="新增职称信息",this.operateType="add"},singleDetle:function(e){var t=this;this.$confirm("此操作将永久删除该职称信息, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(p.g)(parseInt(e.professionalId)).then(function(e){t.$message({message:"删除职称信息成功!",type:"success"}),t.currentPage=1,t.getList()}).catch(function(e){var a=e.result?e.result:"删除职称信息失败";t.$message({message:a,type:"error"})})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},batchDelete:function(){var e=this,t=[];this.selectData.forEach(function(e,a){t.push(e.professionalId)}),this.$confirm("此操作将永久删除这些职称信息, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){if(0===t.length)return e.$message({message:"请先勾选删除项！",type:"warning"}),!1;Object(p.d)(t).then(function(t){e.$message({message:"批量删除职称信息成功!",type:"success"}),e.currentPage=1,e.getList()}).catch(function(t){var a=t.result?t.result:"批量删除职称信息失败";e.$message({message:a,type:"error"})})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},singleUpdate:function(e){this.dialogVisible=!0,this.dialogTitle="修改职称信息",this.operateType="edit";var t=!0,a=!1,i=void 0;try{for(var n,s=u()(r()(e));!(t=(n=s.next()).done);t=!0){var l=n.value,c=o()(l,2),p=c[0],f=c[1];this.Form[p]=f}}catch(e){a=!0,i=e}finally{try{!t&&s.return&&s.return()}finally{if(a)throw i}}},handleSelectionChange:function(e){this.selectData=e},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var a="add"===t.operateType?"新增":"修改";Object(p.z)(t.Form).then(function(e){t.$message({message:a+"职称信息成功",type:"success"}),t.dialogVisible=!1,t.getList()}).catch(function(e){var a=e.result?e.result:a+"职称信息失败";t.$message({message:a,type:"error"})})})},clearForm:function(e){for(var t in e){var a=this.getDataType(e[t]);if("String"===a)e[t]="";else if("Array"===a)e[t]=[];else if("Object"===a){n()(e[t]).length>0?this.clearForm(e[t]):e[t]={}}else e[t]=null}},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.Form.clearValidate()})},dialogClosed:function(){this.clearForm(this.Form)},getDataType:function(e){var t=!0,a=!1,i=void 0;try{for(var n,s=u()(["String","Object","Number","Array","Function"]);!(t=(n=s.next()).done);t=!0){var o=n.value;if(Object.prototype.toString.call(e)==="[object "+o+"]")return o}}catch(e){a=!0,i=e}finally{try{!t&&s.return&&s.return()}finally{if(a)throw i}}},limitFloat:function(e,t){this.Form[e]=this.Form[e].replace(/[^\d.]/g,"").replace(/\.{2,}/g,".").replace(".","$#$").replace(/\./g,"").replace("$#$",".").replace(/^(\-)*(\d+)\.(\d\d).*$/,"$1$2.$3").replace(/^\./g,""),t&&""!==this.Form[e]&&(this.Form[e]=(this.Form[e]-0).toFixed(2))}},mounted:function(){var t=this;this.getList(),setTimeout(function(){var a=e("#mainDiv").height(),i=e("#queryBox").outerHeight(!0),n=e("#operateBox").height();t.tableHeight=a-i-n},1)}}}).call(t,a("7t+N"))},ENnw:function(e,t){},SskB:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("AaP3"),n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"baseInfoProfession"}},[a("div",{staticClass:"query-box",attrs:{id:"queryBox"}},[a("div",{staticClass:"clearfix"},[a("div",{staticClass:"query-item"},[a("div",{staticClass:"query-title"},[e._v("职称：")]),e._v(" "),a("div",{staticClass:"query-input"},[a("el-input",{attrs:{placeholder:"请输入职称"},model:{value:e.name,callback:function(t){e.name="string"==typeof t?t.trim():t},expression:"name"}})],1)]),e._v(" "),a("div",{staticClass:"query-btn"},[a("search-btn",{on:{clickBtn:e.search}}),e._v(" "),a("reset-btn",{on:{clickBtn:e.reset}})],1)])]),e._v(" "),a("div",{staticClass:"table-box"},[a("table-component",{attrs:{tableData:e.tableData,tableHeight:e.tableHeight},on:{select:e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"50",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"professionalName",label:"职称",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"professionalLevelName",label:"等级",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"specifiedArea",label:"规定面积(m²)",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"90",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("single-btn-group",{attrs:{isShowDetail:!1,isShowDelete:!1},on:{updateClick:function(a){e.singleUpdate(t.row)}}})]}}])})],1),e._v(" "),a("div",{staticClass:"table-operate-box",attrs:{id:"operateBox"}},[a("div",{staticClass:"operate-pager"},[a("table-pagination",{attrs:{currentPage:e.currentPage,pageSize:e.pageSize,total:e.total},on:{"size-change":e.changeSize,"page-change":e.changePage}})],1)])],1),e._v(" "),a("el-dialog",{attrs:{visible:e.dialogVisible,"close-on-click-modal":!1,width:"780px",center:!0},on:{"update:visible":function(t){e.dialogVisible=t},open:e.dialogOpen,closed:e.dialogClosed}},[a("div",{staticClass:"dialog-title",attrs:{slot:"title"},slot:"title"},[a("span",[e._v(e._s(e.dialogTitle))])]),e._v(" "),a("el-form",{ref:"Form",attrs:{inline:!0,model:e.Form,rules:e.rules}},[a("el-form-item",{attrs:{label:"职称","label-width":"120px",prop:"professionalName"}},[a("el-input",{attrs:{size:"small",placeholder:"请输入职称",disabled:"edit"===e.operateType},model:{value:e.Form.professionalName,callback:function(t){e.$set(e.Form,"professionalName","string"==typeof t?t.trim():t)},expression:"Form.professionalName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"等级","label-width":"120px",prop:"professionalLevel"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择等级",size:"small",disabled:"edit"===e.operateType},model:{value:e.Form.professionalLevel,callback:function(t){e.$set(e.Form,"professionalLevel",t)},expression:"Form.professionalLevel"}},e._l(e.professionalLevelOpts,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"规定面积(m²)","label-width":"120px",prop:"specifiedArea"}},[a("el-input",{attrs:{size:"small",placeholder:"请输入规定面积"},on:{blur:function(t){e.limitFloat("specifiedArea",!0)}},nativeOn:{keyup:function(t){e.limitFloat("specifiedArea")}},model:{value:e.Form.specifiedArea,callback:function(t){e.$set(e.Form,"specifiedArea","string"==typeof t?t.trim():t)},expression:"Form.specifiedArea"}})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("cancel-btn",{attrs:{fontSize:14},on:{clickBtn:function(t){e.dialogVisible=!1}}}),e._v(" "),a("confirm-btn",{attrs:{fontSize:14},on:{clickBtn:function(t){e.submitForm("Form")}}})],1)],1)],1)},staticRenderFns:[]};var s=function(e){a("ENnw")},o=a("VU/8")(i.a,n,!1,s,null,null);t.default=o.exports}});
//# sourceMappingURL=53.d9402857d4e7b08d0dec.js.map