webpackJsonp([45],{"Qvw/":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("mh/o"),l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"rentRemind"}},[a("div",{staticClass:"query-box",attrs:{id:"queryBox"}},[a("div",{staticClass:"clearfix"},[a("div",{staticClass:"query-item"},[a("div",{staticClass:"query-title"},[e._v("租用单位：")]),e._v(" "),a("div",{staticClass:"query-input"},[a("el-input",{directives:[{name:"enter-trim",rawName:"v-enter-trim"}],attrs:{placeholder:"请输入租用单位"},model:{value:e.renter,callback:function(t){e.renter=t},expression:"renter"}})],1)]),e._v(" "),a("div",{staticClass:"query-btn"},[a("search-btn",{on:{clickBtn:e.search}}),e._v(" "),a("reset-btn",{on:{clickBtn:e.reset}})],1)])]),e._v(" "),a("div",{staticClass:"table-box"},[a("table-component",{attrs:{tableData:e.tableData,tableHeight:e.tableHeight},on:{select:e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"50",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"renter",label:"租用单位",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"lesseeYears",label:"承租年限(年)",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"rentMoney",label:"租金(元)",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"deposit",label:"押金(元)",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"rentType",label:"出租类型",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"rentStateText",label:"出租状态",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"rentBegin",label:"租用起始时间",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"rentEnd",label:"租用截止时间",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,"class-name":"paymentTime-col",prop:"paymentTime",label:"付款时间",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"140",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("single-btn-group",{attrs:{isShowDetail:!0,isShowDelete:!1,isShowAlter:!1,isShowHaveRead:!0},on:{detailClick:function(a){e.singleDetail(t.row)},haveReadClick:function(a){e.singleHaveRead(t.row)}}})]}}])})],1),e._v(" "),a("div",{staticClass:"table-operate-box",attrs:{id:"operateBox"}},[a("div",{staticClass:"operate-btn"},[a("table-btn-group",{attrs:{batchDelBtnShow:!1,addBtnShow:!1,haveReadBtnShow:!0},on:{haveReadClick:e.haveReadClick}})],1),e._v(" "),a("div",{staticClass:"operate-pager"},[a("table-pagination",{attrs:{currentPage:e.currentPage,pageSize:e.pageSize,total:e.total},on:{"size-change":e.changeSize,"page-change":e.changePage}})],1)])],1),e._v(" "),a("el-dialog",{attrs:{visible:e.dialogVisible,"close-on-click-modal":!1,width:"1100px",center:!0},on:{"update:visible":function(t){e.dialogVisible=t},open:e.dialogOpen,closed:e.dialogClosed}},[a("div",{staticClass:"dialog-title",attrs:{slot:"title"},slot:"title"},[a("span",[e._v(e._s(e.dialogTitle))])]),e._v(" "),a("el-form",{ref:"Form",attrs:{inline:!0,model:e.Form,rules:e.rules}},[a("el-form-item",{class:{"detail-form-item":"detail"===e.operateType},attrs:{label:"detail"===e.operateType?"承租用途：":"承租用途","label-width":"120px",prop:"lesseeUse"}},[a("el-input",{directives:[{name:"enter-trim",rawName:"v-enter-trim"}],attrs:{size:"small",placeholder:"请输入承租用途",readonly:"detail"===e.operateType},model:{value:e.Form.lesseeUse,callback:function(t){e.$set(e.Form,"lesseeUse",t)},expression:"Form.lesseeUse"}})],1),e._v(" "),a("el-form-item",{class:{"detail-form-item":"detail"===e.operateType},attrs:{label:"detail"===e.operateType?"承租年限(年)：":"承租年限(年)","label-width":"120px",prop:"lesseeYears"}},[a("el-input",{attrs:{size:"small",placeholder:"请输入承租年限",readonly:"detail"===e.operateType},on:{blur:function(t){e.limitInt("lesseeYears")}},nativeOn:{keyup:function(t){e.limitInt("lesseeYears")}},model:{value:e.Form.lesseeYears,callback:function(t){e.$set(e.Form,"lesseeYears",t)},expression:"Form.lesseeYears"}})],1),e._v(" "),a("el-form-item",{class:{"detail-form-item":"detail"===e.operateType},attrs:{label:"detail"===e.operateType?"租用单位：":"租用单位","label-width":"120px",prop:"renter"}},[a("el-input",{directives:[{name:"enter-trim",rawName:"v-enter-trim"}],attrs:{size:"small",placeholder:"请输入租用单位",readonly:"detail"===e.operateType},model:{value:e.Form.renter,callback:function(t){e.$set(e.Form,"renter",t)},expression:"Form.renter"}})],1),e._v(" "),a("el-form-item",{class:{"detail-form-item":"detail"===e.operateType},attrs:{label:"detail"===e.operateType?"租用起始时间：":"租用起始时间","label-width":"120px",prop:"rentBegin"}},["detail"!==e.operateType?a("el-date-picker",{staticStyle:{width:"200px"},attrs:{type:"date",placeholder:"选择租用起始时间",size:"small","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.Form.rentBegin,callback:function(t){e.$set(e.Form,"rentBegin",t)},expression:"Form.rentBegin"}}):e._e(),e._v(" "),"detail"===e.operateType?a("el-input",{attrs:{size:"small",readonly:"detail"===e.operateType},model:{value:e.Form.rentBegin,callback:function(t){e.$set(e.Form,"rentBegin",t)},expression:"Form.rentBegin"}}):e._e()],1),e._v(" "),a("el-form-item",{class:{"detail-form-item":"detail"===e.operateType},attrs:{label:"detail"===e.operateType?"租用截止时间：":"租用截止时间","label-width":"120px",prop:"rentEnd"}},["detail"!==e.operateType?a("el-date-picker",{staticStyle:{width:"200px"},attrs:{type:"date",placeholder:"选择租用截止时间",size:"small","value-format":"yyyy-MM-dd 23:59:59"},model:{value:e.Form.rentEnd,callback:function(t){e.$set(e.Form,"rentEnd",t)},expression:"Form.rentEnd"}}):e._e(),e._v(" "),"detail"===e.operateType?a("el-input",{attrs:{size:"small",readonly:"detail"===e.operateType},model:{value:e.Form.rentEnd,callback:function(t){e.$set(e.Form,"rentEnd",t)},expression:"Form.rentEnd"}}):e._e()],1),e._v(" "),a("el-form-item",{class:{"detail-form-item":"detail"===e.operateType},attrs:{label:"detail"===e.operateType?"付款时间：":"付款时间","label-width":"120px",prop:"paymentTime"}},["detail"!==e.operateType?a("el-date-picker",{staticStyle:{width:"200px"},attrs:{type:"date",placeholder:"选择付款时间",size:"small","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.Form.paymentTime,callback:function(t){e.$set(e.Form,"paymentTime",t)},expression:"Form.paymentTime"}}):e._e(),e._v(" "),"detail"===e.operateType?a("el-input",{attrs:{size:"small",readonly:"detail"===e.operateType},model:{value:e.Form.paymentTime,callback:function(t){e.$set(e.Form,"paymentTime",t)},expression:"Form.paymentTime"}}):e._e()],1),e._v(" "),a("el-form-item",{class:{"detail-form-item":"detail"===e.operateType},attrs:{label:"detail"===e.operateType?"租金(元)：":"租金(元)","label-width":"120px",prop:"rentMoney"}},[a("el-input",{attrs:{size:"small",placeholder:"请输入租金",readonly:"detail"===e.operateType},on:{blur:function(t){e.limitFloat("rentMoney",!0)}},nativeOn:{keyup:function(t){e.limitFloat("rentMoney")}},model:{value:e.Form.rentMoney,callback:function(t){e.$set(e.Form,"rentMoney",t)},expression:"Form.rentMoney"}})],1),e._v(" "),a("el-form-item",{class:{"detail-form-item":"detail"===e.operateType},attrs:{label:"detail"===e.operateType?"押金(元)：":"押金(元)","label-width":"120px",prop:"deposit"}},[a("el-input",{attrs:{size:"small",placeholder:"请输入押金",readonly:"detail"===e.operateType},on:{blur:function(t){e.limitFloat("deposit",!0)}},nativeOn:{keyup:function(t){e.limitFloat("deposit")}},model:{value:e.Form.deposit,callback:function(t){e.$set(e.Form,"deposit",t)},expression:"Form.deposit"}})],1),e._v(" "),a("el-form-item",{class:{"detail-form-item":"detail"===e.operateType},attrs:{label:"detail"===e.operateType?"出租类型：":"出租类型","label-width":"120px",prop:"rentType"}},["detail"!==e.operateType?a("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择出租类型",size:"small"},model:{value:e.Form.rentType,callback:function(t){e.$set(e.Form,"rentType",t)},expression:"Form.rentType"}},e._l(e.rentTypeOpts,function(e){return a("el-option",{key:e.id,attrs:{label:e.text,value:e.id}})})):e._e(),e._v(" "),"detail"===e.operateType?a("el-input",{attrs:{size:"small",readonly:"detail"===e.operateType},model:{value:e.Form.rentType,callback:function(t){e.$set(e.Form,"rentType",t)},expression:"Form.rentType"}}):e._e()],1),e._v(" "),a("el-form-item",{class:{"detail-form-item":"detail"===e.operateType},attrs:{label:"detail"===e.operateType?"出租方式：":"出租方式","label-width":"120px",prop:"rentMode"}},["detail"!==e.operateType?a("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择出租方式",size:"small"},model:{value:e.Form.rentMode,callback:function(t){e.$set(e.Form,"rentMode",t)},expression:"Form.rentMode"}},e._l(e.rentModeOpts,function(e){return a("el-option",{key:e.id,attrs:{label:e.text,value:e.id}})})):e._e(),e._v(" "),"detail"===e.operateType?a("el-input",{attrs:{size:"small",readonly:"detail"===e.operateType},model:{value:e.Form.rentMode,callback:function(t){e.$set(e.Form,"rentMode",t)},expression:"Form.rentMode"}}):e._e()],1),e._v(" "),a("el-form-item",{class:{"detail-form-item":"detail"===e.operateType},attrs:{label:"detail"===e.operateType?"联系人：":"联系人","label-width":"120px",prop:"contacts"}},[a("el-input",{directives:[{name:"enter-trim",rawName:"v-enter-trim"}],attrs:{size:"small",placeholder:"请输入联系人",readonly:"detail"===e.operateType},model:{value:e.Form.contacts,callback:function(t){e.$set(e.Form,"contacts",t)},expression:"Form.contacts"}})],1),e._v(" "),a("el-form-item",{class:{"detail-form-item":"detail"===e.operateType},attrs:{label:"detail"===e.operateType?"联系方式：":"联系方式","label-width":"120px",prop:"contactPhone"}},[a("el-input",{directives:[{name:"enter-trim",rawName:"v-enter-trim"}],attrs:{size:"small",placeholder:"请输入联系方式",readonly:"detail"===e.operateType},model:{value:e.Form.contactPhone,callback:function(t){e.$set(e.Form,"contactPhone",t)},expression:"Form.contactPhone"}})],1),e._v(" "),a("el-form-item",{class:{"detail-form-item":"detail"===e.operateType},attrs:{label:"detail"===e.operateType?"建筑面积(m²)：":"建筑面积(m²)","label-width":"120px",prop:"coveredArea "}},[a("el-input",{attrs:{size:"small",placeholder:"请输入建筑面积",readonly:"detail"===e.operateType},on:{blur:function(t){e.limitFloat("coveredArea",!0)}},nativeOn:{keyup:function(t){e.limitFloat("coveredArea")}},model:{value:e.Form.coveredArea,callback:function(t){e.$set(e.Form,"coveredArea",t)},expression:"Form.coveredArea"}})],1),e._v(" "),a("el-form-item",{class:{"detail-form-item":"detail"===e.operateType},attrs:{label:"detail"===e.operateType?"所属办公楼：":"所属办公楼","label-width":"120px",prop:"officeBuilding"}},[a("el-input",{directives:[{name:"enter-trim",rawName:"v-enter-trim"}],attrs:{size:"small",readonly:!0},model:{value:e.Form.officeBuilding,callback:function(t){e.$set(e.Form,"officeBuilding",t)},expression:"Form.officeBuilding"}})],1),e._v(" "),a("el-form-item",{class:{"detail-form-item":"detail"===e.operateType},attrs:{label:"detail"===e.operateType?"所属单位：":"所属单位","label-width":"120px",prop:"affiliatedUnit"}},["detail"!==e.operateType?a("el-select",{staticStyle:{width:"200px"},attrs:{filterable:"",placeholder:"请选择所属单位",size:"small"},model:{value:e.Form.affiliatedUnit,callback:function(t){e.$set(e.Form,"affiliatedUnit",t)},expression:"Form.affiliatedUnit"}},e._l(e.affiliatedUnitList,function(e){return a("el-option",{key:e.unitId,attrs:{label:e.unitName,value:e.unitId}})})):e._e(),e._v(" "),"detail"===e.operateType?a("el-input",{attrs:{size:"small",readonly:"detail"===e.operateType},model:{value:e.affiliatedUnitName,callback:function(t){e.affiliatedUnitName=t},expression:"affiliatedUnitName"}}):e._e()],1),e._v(" "),a("el-form-item",{class:{"detail-form-item":"detail"===e.operateType},attrs:{label:"detail"===e.operateType?"财政备案：":"财政备案","label-width":"120px",prop:"financialCode"}},[a("el-input",{directives:[{name:"enter-trim",rawName:"v-enter-trim"}],attrs:{size:"small",placeholder:"请输入财政备案",readonly:"detail"===e.operateType},model:{value:e.Form.financialCode,callback:function(t){e.$set(e.Form,"financialCode",t)},expression:"Form.financialCode"}})],1),e._v(" "),e.isSoil?e._e():a("el-form-item",{class:{"detail-form-item":"detail"===e.operateType},staticStyle:{display:"block"},attrs:{label:"detail"===e.operateType?"承租位置：":"承租位置","label-width":"120px",prop:"hasRentSite"}},[a("tree-select",{directives:[{name:"show",rawName:"v-show",value:"detail"!==e.operateType,expression:" operateType!=='detail'"}],attrs:{treeData:e.treeData,treeShow:e.treeShow,treeName:e.treeName,inputWidth:"868px",inputHeight:"32px",placeholderText:"请选择承租位置"},on:{handleCheckChange:e.handleCheckChange}}),e._v(" "),"detail"===e.operateType?a("el-input",{attrs:{size:"small",readonly:"detail"===e.operateType},model:{value:e.houseNumber,callback:function(t){e.houseNumber=t},expression:"houseNumber"}}):e._e()],1),e._v(" "),e.isSoil?a("el-form-item",{staticClass:"rent-site",class:{"detail-form-item":"detail"===e.operateType},staticStyle:{display:"block"},attrs:{label:"detail"===e.operateType?"承租位置：":"承租位置","label-width":"120px",prop:"soilList"}},["detail"!==e.operateType?a("el-select",{staticStyle:{width:"868px"},attrs:{filterable:"",multiple:"",placeholder:"请选择承租位置",size:"small"},model:{value:e.Form.soilList,callback:function(t){e.$set(e.Form,"soilList",t)},expression:"Form.soilList"}},e._l(e.soilOpts,function(e){return a("el-option",{key:e.yardId,attrs:{label:e.yardName,value:e.yardId}})})):e._e(),e._v(" "),"detail"===e.operateType?a("el-input",{attrs:{size:"small",readonly:"detail"===e.operateType},model:{value:e.soilListName,callback:function(t){e.soilListName=t},expression:"soilListName"}}):e._e()],1):e._e(),e._v(" "),a("el-form-item",{class:{"detail-form-item":"detail"===e.operateType},staticStyle:{display:"block"},attrs:{label:"detail"===e.operateType?"备注信息：":"备注信息","label-width":"120px",prop:"remark"}},[a("el-input",{directives:[{name:"enter-trim",rawName:"v-enter-trim"}],staticStyle:{width:"534px"},attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"请输入备注",readonly:"detail"===e.operateType},model:{value:e.Form.remark,callback:function(t){e.$set(e.Form,"remark",t)},expression:"Form.remark"}})],1),e._v(" "),"add"===e.operateType||"edit"===e.operateType||"detail"===e.operateType&&e.detailFileListCert.length>0?a("el-form-item",{staticStyle:{display:"block"},attrs:{label:"detail"===e.operateType?"合同下载：":"上传合同","label-width":"120px",prop:"addFileFlag"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:"detail"!==e.operateType,expression:"operateType!=='detail'"}],staticClass:"upload_box"},[a("el-upload",{ref:"uploadCert",attrs:{headers:e.postHeaders,action:e.uploadCertUrl,"file-list":e.fileListCert,"auto-upload":!1,accept:e.acceptCertType,limit:e.limitNum,"on-success":e.handleCertSuccess,"on-change":e.handleCertChange,"on-remove":e.handleCertRemove,"on-error":e.handleError,"on-exceed":e.handleCertExceed,"before-upload":e.beforeAvatarUpload,multiple:""}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")])],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"detail"===e.operateType,expression:"operateType==='detail'"}],staticClass:"cert-preview-box"},[e._l(e.detailFileListCert,function(t,i){return a("div",{key:i,staticClass:"cert-preview-item"},[a("el-checkbox",{on:{change:function(a){e.certCheckboxChange(a,t.enclosureId)}}}),e._v(" "),a("span",{staticClass:"cert-preview-name"},[e._v(e._s(t.enclosureName))])],1)}),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.detailFileListCert.length>0,expression:"detailFileListCert.length > 0"}],staticClass:"download-btn",attrs:{type:"primary",icon:"el-icon-download"},on:{click:function(t){e.downloadImg("cert")}}},[e._v("下载合同")])],2)]):e._e(),e._v(" "),"add"===e.operateType||"edit"===e.operateType||"detail"===e.operateType&&e.detailFileListImg.length>0?a("el-form-item",{staticStyle:{display:"block"},attrs:{label:"detail"===e.operateType?"证件下载：":"上传证件","label-width":"120px",prop:"addImageFlag"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:"detail"!==e.operateType,expression:"operateType!=='detail'"}],staticClass:"upload_box"},[a("el-upload",{ref:"uploadImg",attrs:{"list-type":"picture-card",headers:e.postHeaders,action:e.uploadImgUrl,"file-list":e.fileListImg,"auto-upload":!1,accept:e.acceptImgType,limit:e.limitNum,"on-success":e.handleImgSuccess,"on-change":e.handleImgChange,"on-error":e.handleError,"on-remove":e.handleImgRemove,"on-exceed":e.handleImgExceed,"before-upload":e.beforeAvatarUpload,multiple:""}},[a("i",{staticClass:"el-icon-plus"})])],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"detail"===e.operateType,expression:"operateType==='detail'"}],staticClass:"img-preview-box clearfix"},[e._l(e.detailFileListImg,function(t,i){return a("div",{key:i,staticClass:"img-preview-item"},[a("img",{attrs:{src:e.getImgUrl(t.enclosureVirtualUrl),alt:"已上传证件"}}),e._v(" "),a("div",{staticClass:"bigger-view-warpper"},[a("div",{staticClass:"bigger-view-warpper-inner"}),e._v(" "),a("i",{staticClass:"el-icon-search",on:{click:function(a){e.preview(t.enclosureVirtualUrl)}}})]),e._v(" "),a("el-checkbox",{on:{change:function(a){e.imgCheckboxChange(a,t.enclosureId)}}})],1)}),e._v(" "),a("div",[a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.detailFileListImg.length>0,expression:"detailFileListImg.length > 0"}],staticClass:"download-btn",attrs:{type:"primary",icon:"el-icon-download"},on:{click:function(t){e.downloadImg("img")}}},[e._v("下载证件")])],1)],2)]):e._e()],1),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:"detail"!==e.operateType,expression:"operateType!=='detail'"}],staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("cancel-btn",{attrs:{fontSize:14},on:{clickBtn:function(t){e.dialogVisible=!1}}}),e._v(" "),a("confirm-btn",{attrs:{fontSize:14},on:{clickBtn:function(t){e.submitForm("Form")}}})],1)],1),e._v(" "),a("div",{staticClass:"img-preview-bigger"},[a("div",{staticClass:"img-preview-bigger-mask"}),e._v(" "),a("img",{attrs:{src:"",alt:"",id:"biggerImg"},on:{load:e.loadImage}}),e._v(" "),a("i",{staticClass:"el-icon-circle-close",on:{click:e.closePreview}})])],1)},staticRenderFns:[]};var r=function(e){a("Uczp")},s=a("VU/8")(i.a,l,!1,r,null,null);t.default=s.exports},Uczp:function(e,t){},"mh/o":function(e,t,a){"use strict";(function(e){var i=a("BO1k"),l=a.n(i),r=a("fZjL"),s=a.n(r),o=a("u3Mf"),n=a("Oizb"),d=a("m5LG"),m=a("yzMb"),c=a("uSev"),p=a("dO4M"),u=a("FAvH"),h=a("GR1E"),g=a("fYBn"),f=a("02tb"),y=a("5kkW"),v=a("3a1n"),b=a("XKMi");t.a={components:{singleBtnGroup:p.a,tableBtnGroup:u.a,tablePagination:h.a,tableComponent:c.a,cancelBtn:g.a,confirmBtn:f.a,searchBtn:y.a,resetBtn:v.a,treeSelect:b.a},data:function(){var e=this;return{treeName:"rent",renter:"",currentPage:1,pageSize:15,total:0,loading:null,tableHeight:0,selectData:[],tableData:[],dialogTitle:"",operateType:"add",dialogVisible:!1,rentModeOpts:[{text:"承租",id:1},{text:"预租",id:2},{text:"转租",id:3},{text:"委托出租",id:4},{text:"代理出租",id:5},{text:"承租权转让",id:6},{text:"承租权交换",id:7}],rentTypeOpts:[{text:"直接出租",id:1},{text:"转出租",id:2},{text:"回租出租",id:3}],Form:{type:1,rentId:"",rentMode:"",lesseeUse:"",lesseeYears:"",renter:"",rentBegin:"",rentEnd:"",rentMoney:"",contacts:"",deposit:"",rentType:"",contactPhone:"",addressList:[],remark:"",deleteEnclosureIdList:[],housingUseList:[],hasRentSite:"",coveredArea:"",officeBuilding:"",affiliatedUnit:"",financialCode:"",addImageFlag:"",addFileFlag:"",paymentTime:""},isSoil:!1,soilListName:"",token:"",postHeaders:{Authorization:""},limitNum:5,uploadImgUrl:n.n+"?uploadType=rentImg",uploadCertUrl:n.n+"?uploadType=rentCertificate",fileListCert:[],fileListImg:[],oldFileListCert:[],oldFileListImg:[],acceptCertType:".doc,.docx",acceptImgType:"image/jpeg,image/gif,image/png,image/bmp,.doc,.docx,.xlsx,.ppt,.pdf,.rar,.zip",uploadCertNum:0,uploadedCertNum:0,uploadSuccessCertNum:0,uploadImgNum:0,uploadedImgNum:0,uploadSuccessImgNum:0,submitCertFlag:!1,submitImgFlag:!1,treeShow:!1,treeData:[],checkedNodes:[],houseIdList:[],houseNameList:[],expandIdList:[],houseNumber:"",detailFileListCert:[],detailFileListImg:[],downloadImgList:[],downloadCertList:[],uploadImgChangeFlag:!1,uploadCertChangeFlag:!1,rentStateOptions:[{id:"",name:"全部"},{id:1,name:"出租中"},{id:0,name:"已退租"}],affiliatedUnitList:[],affiliatedUnitName:"",rules:{hasRentSite:[{required:!0,message:"承租位置不能为空",trigger:"blur"}],renter:[{required:!0,message:"租用单位不能为空",trigger:"blur"}],rentMoney:[{required:!0,message:"租金不能为空",trigger:"blur"}],deposit:[{required:!0,message:"押金不能为空",trigger:"blur"}],rentBegin:[{required:!0,message:"出租起始时间不能为空",trigger:"blur"},{validator:function(t,a,i){var l=new Date(e.Form.rentBegin).getTime(),r=new Date(e.Form.rentEnd).getTime();!l&&r&&i(new Error("租用起始时间不能为空")),l&&r&&l>r&&i(new Error("租用起始时间不能大于租用截止时间")),i()},trigger:"blur"}],rentEnd:[{required:!0,message:"出租截止时间不能为空",trigger:"blur"},{validator:function(t,a,i){var l=new Date(e.Form.rentBegin).getTime(),r=new Date(e.Form.rentEnd).getTime();l&&!r&&i(new Error("租用截止时间不能为空")),l&&r&&l>r&&i(new Error("租用截止时间不能小于租用起始时间")),i()},trigger:"blur"}],paymentTime:[{required:!0,message:"付款时间不能为空",trigger:"blur"}],addFileFlag:[{required:!0,validator:function(t,a,i){0===e.fileListCert.length?i(new Error("请先上传合同")):i()},trigger:"blur"}],addImageFlag:[{required:!0,validator:function(t,a,i){0===e.fileListImg.length?i(new Error("请先上传证件")):i()},trigger:"blur"}]}}},methods:{loadingStart:function(e){this.loading||(this.loading=this.$loading({lock:!0,text:"正在加载...",spinner:"el-icon-loading",target:e,customClass:"loading-box"}))},loadingEnd:function(){this.loading&&(this.loading.close(),this.loading=null)},changeSize:function(e){this.pageSize=e,this.getList()},changePage:function(e){this.currentPage=e,this.getList()},getList:function(){var e=this;this.loadingStart(".table-box"),Object(d.m)(this.currentPage,this.pageSize,this.renter).then(function(t){e.tableData=t.records,e.total=t.total,e.tableData.forEach(function(t){if(t.rentType)switch(t.rentType){case 1:t.rentType="直接出租";break;case 2:t.rentType="转出租";break;case 3:t.rentType="回租出租"}void 0!==t.rentState&&e.rentStateOptions.forEach(function(e){e.id===t.rentState&&(t.rentStateText=e.name)}),void 0!==t.rentMoney&&(t.rentMoney=String(t.rentMoney.toFixed(2))),void 0!==t.deposit&&(t.deposit=String(t.deposit.toFixed(2))),t.rentBegin&&(t.rentBegin=e.formatDate(t.rentBegin)),t.rentEnd&&(t.rentEnd=e.formatDate(t.rentEnd)),t.paymentTime&&(t.paymentTime=e.formatDate(t.paymentTime))}),e.loadingEnd()}).catch(function(t){e.loadingEnd();var a=t.result?t.result:"出租信息获取失败";e.$message({message:a,type:"error"})})},search:function(){this.currentPage=1,this.getList()},reset:function(){this.currentPage=1,this.renter="",this.search()},haveReadClick:function(){var e=this;if(0===this.selectData.length)return this.$message({message:"请先选择一条提醒",type:"warning"}),!1;this.$confirm("批量关闭, 是否继续?","提示",{cancelButtonText:"取消",type:"warning"}).then(function(){var t=[];e.selectData.forEach(function(e){t.push(e.rentId)}),Object(d.x)(t,1).then(function(t){e.$message({message:"关闭成功",type:"success"}),m.a.$emit("updateRemindTips")}).catch(function(t){var a=t.result?t.result:"关闭失败";e.$message({message:a,type:"error"})}),e.getList()}).catch(function(){e.$message({type:"info",message:"已取消关闭"})})},singleHaveRead:function(e){var t=this;this.$confirm("关闭, 是否继续?","提示",{cancelButtonText:"取消",type:"warning"}).then(function(){Object(d.x)([e.rentId],1).then(function(e){t.$message({message:"关闭成功",type:"success"}),t.getList(),m.a.$emit("updateRemindTips")}).catch(function(e){var a=e.result?e.result:"关闭失败";t.$message({message:a,type:"error"})})}).catch(function(){t.$message({type:"info",message:"已取消关闭"})})},addUnit:function(){this.dialogVisible=!0,this.dialogTitle="新增出租信息",this.operateType="add",this.treeShow=!0,this.getSpareRoomTree()},singleDetail:function(e){var t=this;this.dialogVisible=!0,this.dialogTitle="出租信息详情",this.operateType="detail",Object(d.j)(e.rentId).then(function(e){for(var a in t.Form)if(void 0!==e[a]&&""!==e[a]){var i=e[a];if("rentType"===a)switch(i){case 1:t.Form[a]="直接出租";break;case 2:t.Form[a]="转出租";break;case 3:t.Form[a]="回租出租"}else if("rentMode"===a)switch(i){case 1:t.Form[a]="承租";break;case 2:t.Form[a]="预租";break;case 3:t.Form[a]="转租";break;case 4:t.Form[a]="委托出租";break;case 5:t.Form[a]="代理出租";break;case 6:t.Form[a]="承租权转让";break;case 7:t.Form[a]="承租权交换"}else if("rentBegin"===a||"rentEnd"===a||"paymentTime"===a)t.Form[a]=t.formatDate(i);else if("affiliatedUnit"===a)t.affiliatedUnitList.forEach(function(a){a.unitId===e.affiliatedUnit&&(t.affiliatedUnitName=a.unitName)});else if("paymentCycle"===a)switch(i){case 1:t.Form[a]="1个月";break;case 3:t.Form[a]="3个月";break;case 6:t.Form[a]="半年";break;case 12:t.Form[a]="一年"}else t.Form[a]=i}else t.Form[a]="暂无","affiliatedUnit"===a&&(t.affiliatedUnitName="暂无");if(e.paymentTime?t.Form.firstPaymentTime=t.formatDate(e.paymentTime):t.Form.firstPaymentTime="暂无",1===e.state)t.isSoil=!1,e.yardList&&e.yardList.length>0?(e.yardList.forEach(function(e){e.buildList.forEach(function(e){e.floorNameList.forEach(function(e){e.houseNameList.forEach(function(e){t.houseNameList.push(e.houseNumber)})})})}),t.houseNumber=t.houseNameList.join(",")):t.houseNumber="暂无";else{t.isSoil=!0;var l=[];e.yardList&&e.yardList.length>0&&(e.yardList.forEach(function(e){l.push(e.yardName)}),t.soilListName=l.join(","))}e.enclosureList.length>0&&e.enclosureList.forEach(function(e,a){1===e.enclosureType?t.detailFileListImg.push(e):2===e.enclosureType?t.detailFileListCert.push(e):3===e.enclosureType&&(e.enclosureVirtualUrl="/images/compress.png",t.detailFileListImg.push(e))})}).catch(function(e){var a=e.result?e.result:"出租详情获取失败";t.$message({message:a,type:"error"})})},getSpareRoomTree:function(e){var t=this,a=e||null;Object(d.n)(a).then(function(e){t.treeData=e}).catch(function(e){var a=e.result?e.result:"获取闲置用房树形菜单失败";t.$message({message:a,type:"error"})})},handleSelectionChange:function(e){this.selectData=e},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;0===t.uploadImgNum&&0===t.uploadCertNum?t.saveForm():t.submitUpload()})},clearForm:function(e){for(var t in e){var a=this.getDataType(e[t]);if("String"===a)e[t]="";else if("Array"===a)e[t]=[];else if("Object"===a){s()(e[t]).length>0?this.clearForm(e[t]):e[t]={}}else e[t]=null}},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.Form.clearValidate()})},dialogClosed:function(){this.clearForm(this.Form),this.Form.type=1,this.Form.addressList=[],this.Form.deleteEnclosureIdList=[],this.fileListCert=[],this.fileListImg=[],this.oldFileListCert=[],this.oldFileListImg=[],this.uploadCertNum=0,this.uploadedCertNum=0,this.uploadSuccessCertNum=0,this.uploadImgNum=0,this.uploadedImgNum=0,this.uploadSuccessImgNum=0,this.submitCertFlag=!1,this.submitImgFlag=!1,this.treeShow=!1,this.checkedNodes=[],this.houseIdList=[],this.houseNameList=[],this.expandIdList=[],this.houseNumber="",this.detailFileListCert=[],this.detailFileListImg=[],this.downloadImgList=[],this.downloadCertList=[],this.uploadCertChangeFlag=!1,this.uploadImgChangeFlag=!1,this.affiliatedUnitName="",this.soilListName="",m.a.$emit(this.treeName+"_clearInput")},submitUpload:function(){this.$refs.uploadCert.submit(),this.$refs.uploadImg.submit()},beforeAvatarUpload:function(e){var t=e.size/1024/1024<200;return t||this.$message.error("上传图片大小不能超过200MB!"),t},handleCertRemove:function(e,t){"success"===e.status&&(this.Form.deleteEnclosureIdList.push(e.uid),this.uploadedCertNum--),this.uploadCertNum=t.length-this.uploadedCertNum,this.fileList=t,this.fileListCert=t,0===t.length&&(this.Form.addFileFlag="")},handleImgRemove:function(e,t){"success"===e.status&&(this.Form.deleteEnclosureIdList.push(e.name),this.uploadedImgNum--),this.uploadImgNum=t.length-this.uploadedImgNum,this.fileListImg=t,0===t.length&&(this.Form.addImageFlag="")},handleCertSuccess:function(e,t,a){this.uploadSuccessCertNum++,this.Form.addressList.push({enclosureType:2,enclosurePhysicsUrl:e.imgList[0].imgPath,enclosureVirtualUrl:e.imgList[0].imgUrl}),this.uploadSuccessCertNum===this.uploadCertNum&&(this.submitCertFlag=!0),(this.submitCertFlag&&this.uploadCertChangeFlag&&this.submitImgFlag&&this.uploadImgChangeFlag||this.submitCertFlag&&this.uploadCertChangeFlag&&!this.uploadImgChangeFlag)&&this.saveForm()},handleImgSuccess:function(e,t,a){this.uploadSuccessImgNum++;var i;i="image"!==t.raw.type.split("/")[0]?3:1,this.Form.addressList.push({enclosureType:i,enclosurePhysicsUrl:e.imgList[0].imgPath,enclosureVirtualUrl:e.imgList[0].imgUrl}),this.uploadSuccessImgNum===this.uploadImgNum&&(this.submitImgFlag=!0),(this.submitCertFlag&&this.uploadCertChangeFlag&&this.submitImgFlag&&this.uploadImgChangeFlag||!this.uploadCertChangeFlag&&this.submitImgFlag&&this.uploadImgChangeFlag)&&this.saveForm()},handleCertChange:function(e,t){this.uploadCertChangeFlag=!0,this.uploadCertNum=t.length-this.uploadedCertNum,this.fileListCert=t,t.length>0&&(this.Form.addFileFlag="true"),this.$refs.Form.clearValidate(["addFileFlag"])},handleImgChange:function(e,t){"image"!==e.raw.type.split("/")[0]&&(e.url=""+o.a+o.f+"/images/compress.png"),this.uploadImgChangeFlag=!0,this.uploadImgNum=t.length-this.uploadedImgNum,this.fileListImg=t,t.length>0&&(this.Form.addImageFlag="true"),this.$refs.Form.clearValidate(["addImageFlag"])},handleCertExceed:function(e,t){this.$message.warning("最多只能上传五份文件！")},handleImgExceed:function(e,t){this.$message.warning("最多只能上传五张图片！")},handleError:function(e,t,a){401===e.status&&(this.$store.dispatch("Logout",this.token),this.$router.push({path:"/login"})),this.$message({message:e.message,type:"error"})},handleCheckChange:function(e,t){if(this.checkedNodes=e,e.length>0){this.Form.hasRentSite="true";var a=[];e.concat(t).forEach(function(e){1===e.level&&a.push(e.name)}),this.Form.officeBuilding=a.join(",")}else this.Form.hasRentSite="",this.Form.officeBuilding=""},saveForm:function(){var e=this;this.Form.housingUseList=[];var t=[];this.checkedNodes.forEach(function(e){3===e.level&&t.push(e)}),t.forEach(function(t){var a={},i=t.id.split(":");a.yardId=i[0],a.buildId=i[1],a.floorName=i[2],a.houseId=i[3],e.Form.housingUseList.push(a)}),"add"===this.operateType?Object(d.b)(this.Form).then(function(t){e.dialogVisible=!1,e.getList(),e.$message({message:"出租信息新增成功!",type:"success"})}).catch(function(t){var a=t.result?t.result:"出租信息新增失败";e.$message({message:a,type:"error"}),e.fileListCert=e.oldFileListCert,e.fileListImg=e.oldFileListImg,e.uploadCertNum=0,e.uploadSuccessCertNum=0,e.uploadImgNum=0,e.uploadSuccessImgNum=0,e.submitCertFlag=!1,e.submitImgFlag=!1,e.uploadCertChangeFlag=!1,e.uploadImgChangeFlag=!1}):"edit"===this.operateType&&Object(d.y)(this.Form).then(function(t){e.dialogVisible=!1,e.getList(),e.$message({message:"出租信息修改成功!",type:"success"})}).catch(function(t){var a=t.result?t.result:"出租信息修改失败";e.$message({message:a,type:"error"}),e.fileListCert=e.oldFileListCert,e.fileListImg=e.oldFileListImg,e.uploadCertNum=0,e.uploadSuccessCertNum=0,e.uploadImgNum=0,e.uploadSuccessImgNum=0,e.submitCertFlag=!1,e.submitImgFlag=!1,e.uploadCertChangeFlag=!1,e.uploadImgChangeFlag=!1})},certCheckboxChange:function(e,t){if(e)-1===this.downloadCertList.indexOf(t)&&this.downloadCertList.push(t);else{var a=this.downloadCertList.indexOf(t);this.downloadCertList.splice(a,1)}},imgCheckboxChange:function(e,t){if(e)-1===this.downloadImgList.indexOf(t)&&this.downloadImgList.push(t);else{var a=this.downloadImgList.indexOf(t);this.downloadImgList.splice(a,1)}},downloadImg:function(e){var t=this;"cert"===e?this.downloadCertList.length>0?Object(d.e)(this.downloadCertList,1,this.Form.rentId).then(function(e){a("3UNf")(e,decodeURIComponent(sessionStorage.getItem("CADdownloadFileName")))}).catch(function(e){var a=e.result?e.result:"合同下载失败";t.$message({message:a,type:"error"})}):this.$message({message:"请先选中一个合同",type:"warning"}):this.downloadImgList.length>0?Object(d.e)(this.downloadImgList,2,this.Form.rentId).then(function(e){a("3UNf")(e,decodeURIComponent(sessionStorage.getItem("CADdownloadFileName")))}).catch(function(e){var a=e.result?e.result:"证件下载失败";t.$message({message:a,type:"error"})}):this.$message({message:"请先选中一个证件",type:"warning"})},getImgUrl:function(e){return""+o.a+o.f+e+"?access_token="+this.token},getDataType:function(e){var t=!0,a=!1,i=void 0;try{for(var r,s=l()(["String","Object","Number","Array","Function"]);!(t=(r=s.next()).done);t=!0){var o=r.value;if(Object.prototype.toString.call(e)==="[object "+o+"]")return o}}catch(e){a=!0,i=e}finally{try{!t&&s.return&&s.return()}finally{if(a)throw i}}},limitFloat:function(e,t){this.Form[e]=this.Form[e].replace(/[^\d.]/g,"").replace(/\.{2,}/g,".").replace(".","$#$").replace(/\./g,"").replace("$#$",".").replace(/^(\-)*(\d+)\.(\d\d).*$/,"$1$2.$3").replace(/^\./g,""),t&&""!==this.Form[e]&&(this.Form[e]=(this.Form[e]-0).toFixed(2))},limitInt:function(e,t){this.Form[e]=this.Form[e].replace(/[^0-9]/g,"")},formatDate:function(e){var t=new Date(e),a="yyyy-MM-dd",i={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()};for(var l in/(y+)/.test(a)&&(a=a.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length))),i)new RegExp("("+l+")").test(a)&&(a=a.replace(RegExp.$1,1==RegExp.$1.length?i[l]:("00"+i[l]).substr((""+i[l]).length)));return a},preview:function(t){e(".img-preview-bigger").css("display","block"),e("#biggerImg").attr("src",o.a+o.f+t+"?access_token="+this.token)},closePreview:function(){e(".img-preview-bigger").css("display","none"),e("#biggerImg").css("width","auto")},loadImage:function(){var t=e(window).width(),a=e("#biggerImg");a.width()>=t&&a.css("width","80%")},getUserUnitList:function(){var e=this;Object(n.l)().then(function(t){e.affiliatedUnitList=t}).catch(function(t){var a=t.result?t.result:"单位获取失败";e.$message({message:a,type:"error"})})}},mounted:function(){var t=this;this.getList(),this.getUserUnitList(),setTimeout(function(){var a=e("#mainDiv").height(),i=e("#queryBox").outerHeight(!0),l=e("#operateBox").height();t.tableHeight=a-i-l},1),this.token=sessionStorage.getItem("TOKEN"),this.token&&(this.postHeaders.Authorization="Bearer "+this.token)}}}).call(t,a("7t+N"))}});
//# sourceMappingURL=45.3c410808ef05b91a61d1.js.map