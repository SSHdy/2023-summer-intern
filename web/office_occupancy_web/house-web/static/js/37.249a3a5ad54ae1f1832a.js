webpackJsonp([37],{"NkJ/":function(e,t){},OGSP:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r("ofph"),i={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"client"}},[r("div",{staticClass:"table-box"},[r("table-component",{attrs:{tableData:e.tableData,tableHeight:e.tableHeight}},[r("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),e._v(" "),r("el-table-column",{attrs:{prop:"clientId",label:"客户端编号",align:"center","show-overflow-tooltip":!0}}),e._v(" "),r("el-table-column",{attrs:{prop:"authorizedGrantNames",label:"认证授权类型",align:"center","show-overflow-tooltip":!0}}),e._v(" "),r("el-table-column",{attrs:{prop:"webServerRedirectUri",label:"web服务重定向地址",align:"center","show-overflow-tooltip":!0}}),e._v(" "),r("el-table-column",{attrs:{prop:"scope",label:"范围",align:"center","show-overflow-tooltip":!0}}),e._v(" "),r("el-table-column",{attrs:{label:"操作",width:"190",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("single-btn-group",{attrs:{isShowDetail:!0},on:{deleteClick:function(r){e.singleDetle(t.row)},updateClick:function(r){e.singleUpdate(t.row)},detailClick:function(r){e.singleDetail(t.row)}}})]}}])})],1),e._v(" "),r("div",{staticClass:"table-operate-box",attrs:{id:"operateBox"}},[r("div",{staticClass:"operate-btn"},[r("table-btn-group",{attrs:{batchDelBtnShow:!1},on:{addClick:e.add}})],1),e._v(" "),r("div",{staticClass:"operate-pager"},[r("table-pagination",{attrs:{currentPage:e.currentPage,pageSize:e.pageSize,total:e.total},on:{"size-change":e.changeSize,"page-change":e.changePage}})],1)])],1),e._v(" "),r("el-dialog",{attrs:{visible:e.dialogVisible,"close-on-click-modal":!1,width:"780px",center:!0},on:{"update:visible":function(t){e.dialogVisible=t},open:e.dialogOpen,closed:e.dialogClosed}},[r("div",{staticClass:"dialog-title",attrs:{slot:"title"},slot:"title"},[r("span",[e._v(e._s(e.dialogTitle))])]),e._v(" "),r("el-form",{ref:"Form",attrs:{inline:!0,model:e.Form,rules:e.rules}},[r("el-form-item",{class:{"detail-form-item":"detail"===e.operateType},attrs:{label:"detail"===e.operateType?"客户端编号:":"客户端编号","label-width":"120px",prop:"clientId"}},[r("el-input",{directives:[{name:"enter-trim",rawName:"v-enter-trim"}],attrs:{placeholder:"请输入客户端编号",readonly:"detail"===e.operateType},model:{value:e.Form.clientId,callback:function(t){e.$set(e.Form,"clientId",t)},expression:"Form.clientId"}})],1),e._v(" "),r("el-form-item",{class:{"detail-form-item":"detail"===e.operateType},attrs:{label:"detail"===e.operateType?"资源编号:":"资源编号","label-width":"120px",prop:"resourceIds"}},[r("el-input",{directives:[{name:"enter-trim",rawName:"v-enter-trim"}],attrs:{placeholder:"请输入资源编号",readonly:"detail"===e.operateType},model:{value:e.Form.resourceIds,callback:function(t){e.$set(e.Form,"resourceIds",t)},expression:"Form.resourceIds"}})],1),e._v(" "),r("el-form-item",{class:{"detail-form-item":"detail"===e.operateType},attrs:{label:"detail"===e.operateType?"认证方式:":"认证方式","label-width":"120px",prop:"authorizedGrantTypes"}},["detail"!==e.operateType?r("el-select",{attrs:{filterable:"",multiple:"",placeholder:"请选择认证方式"},on:{change:e.authorizedChange},model:{value:e.Form.authorizedGrantTypes,callback:function(t){e.$set(e.Form,"authorizedGrantTypes",t)},expression:"Form.authorizedGrantTypes"}},e._l(e.authorizedGrantTypesArr,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})):r("div",{staticStyle:{width:"200px"}},[e._v(e._s(e.authorizedGrantNames))])],1),e._v(" "),e.showAuthorization?r("el-form-item",{class:{"detail-form-item":"detail"===e.operateType},attrs:{label:"detail"===e.operateType?"重定向地址:":"重定向地址","label-width":"120px",prop:"webServerRedirectUri"}},[r("el-input",{directives:[{name:"enter-trim",rawName:"v-enter-trim"}],attrs:{placeholder:"请输入重定向地址",readonly:"detail"===e.operateType},model:{value:e.Form.webServerRedirectUri,callback:function(t){e.$set(e.Form,"webServerRedirectUri",t)},expression:"Form.webServerRedirectUri"}})],1):e._e(),e._v(" "),r("el-form-item",{class:{"detail-form-item":"detail"===e.operateType},attrs:{label:"detail"===e.operateType?"公司名称:":"公司名称","label-width":"120px",prop:"companyName"}},[r("el-input",{directives:[{name:"enter-trim",rawName:"v-enter-trim"}],attrs:{placeholder:"请输入公司名称",readonly:"detail"===e.operateType},model:{value:e.Form.companyName,callback:function(t){e.$set(e.Form,"companyName",t)},expression:"Form.companyName"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"detail"===e.operateType?"是否授权:":"是否授权","label-width":"120px",prop:"autoapprove"}},[r("div",{staticStyle:{width:"200px"}},["detail"!==e.operateType?r("el-radio",{attrs:{label:0,name:"autoapprove"},model:{value:e.Form.autoapprove,callback:function(t){e.$set(e.Form,"autoapprove",t)},expression:"Form.autoapprove"}},[e._v("是")]):e._e(),e._v(" "),"detail"!==e.operateType?r("el-radio",{attrs:{label:1,name:"autoapprove"},model:{value:e.Form.autoapprove,callback:function(t){e.$set(e.Form,"autoapprove",t)},expression:"Form.autoapprove"}},[e._v("否")]):e._e()],1),e._v(" "),r("div",{staticStyle:{width:"200px"}},["detail"===e.operateType?r("span",[e._v(e._s(0===e.Form.autoapprove?"是":"否"))]):e._e()])]),e._v(" "),"detail"!==e.operateType?r("el-form-item",{class:{"detail-form-item":"detail"===e.operateType},attrs:{label:"detail"===e.operateType?"密码:":"密码","label-width":"120px",prop:"clientSecret"}},[r("el-input",{directives:[{name:"enter-trim",rawName:"v-enter-trim"}],attrs:{placeholder:"请输入密码",readonly:"detail"===e.operateType},model:{value:e.Form.clientSecret,callback:function(t){e.$set(e.Form,"clientSecret",t)},expression:"Form.clientSecret"}}),e._v(" "),"edit"===e.operateType?r("span",{staticClass:"secret-tips"},[e._v("若要修改密码，请填写，不修改不填写。")]):e._e()],1):e._e(),e._v(" "),r("el-form-item",{class:{"detail-form-item":"detail"===e.operateType},attrs:{label:"detail"===e.operateType?"范围:":"范围","label-width":"120px",prop:"scope"}},[r("el-input",{directives:[{name:"enter-trim",rawName:"v-enter-trim"}],attrs:{placeholder:"请输入范围",readonly:"detail"===e.operateType},model:{value:e.Form.scope,callback:function(t){e.$set(e.Form,"scope",t)},expression:"Form.scope"}})],1)],1),e._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:!("detail"===e.operateType),expression:"!(operateType==='detail')"}],staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("cancel-btn",{attrs:{fontSize:14},on:{clickBtn:function(t){e.dialogVisible=!1}}}),e._v(" "),r("confirm-btn",{attrs:{fontSize:14},on:{clickBtn:function(t){e.submitForm("Form")}}}),e._v(" "),r("div",{staticClass:"bottom"})],1)],1)],1)},staticRenderFns:[]};var o=function(e){r("NkJ/")},s=r("VU/8")(a.a,i,!1,o,null,null);t.default=s.exports},ofph:function(e,t,r){"use strict";(function(e){var a=r("BO1k"),i=r.n(a),o=r("fZjL"),s=r.n(o),l=r("4YAr"),n=r("uSev"),c=r("dO4M"),d=r("FAvH"),p=r("GR1E"),u=r("fYBn"),h=r("02tb"),m=r("5kkW"),g=r("3a1n");t.a={components:{singleBtnGroup:c.a,tableBtnGroup:d.a,tablePagination:p.a,tableComponent:n.a,cancelBtn:u.a,confirmBtn:h.a,searchBtn:m.a,resetBtn:g.a},data:function(){var e=this;return{clientName:"",tableData:[],tableHeight:0,currentPage:1,pageSize:15,total:1,loading:!1,authorizedGrantTypesArr:[{id:"authorization_code",name:"授权码模式"},{id:"implicit",name:"简化模式"},{id:"password",name:"密码模式"},{id:"client_credentials",name:"客户端模式"},{id:"refresh_token",name:"刷新令牌"}],operateType:"",dialogVisible:!1,dialogTitle:"新增",showAuthorization:!1,authorizedGrantNames:[],rules:{clientId:[{required:!0,validator:function(t,r,a){""===r||null===r?a(new Error("客户端id不能为空")):/^[\u4e00-\u9fa5]+$/.test(r)?a(new Error("客户端id只能是英文，数字或符号")):Object(l.f)(e.Form.clientId,e.Form.oauthDetailId).then(function(e){a()}).catch(function(e){a(new Error("客户端id重复"))})},trigger:"blur"}],resourceIds:[{required:!0,message:"资源编号不能为空",trigger:"blur"}],clientSecret:[],scope:[{required:!0,message:"范围不能为空",trigger:"blur"}],webServerRedirectUri:[{required:!0,message:"重定向地址不能为空",trigger:"blur"}],autoapprove:[{required:!0,message:"授权不能为空",trigger:"blur"}],companyName:[{required:!0,message:"公司名称不能为空",trigger:"blur"}],authorizedGrantTypes:[{required:!0,message:"认证方式不能为空",trigger:"blur"}]},Form:{authorizedGrantTypes:[],clientId:"",resourceIds:"",clientSecret:"",scope:"",webServerRedirectUri:"",autoapprove:1,companyName:""}}},methods:{loadingStart:function(e){this.loading||(this.loading=this.$loading({lock:!0,text:"正在加载...",spinner:"el-icon-loading",target:e,customClass:"loading-box"}))},loadingEnd:function(){this.loading&&(this.loading.close(),this.loading=null)},changeSize:function(e){this.pageSize=e,this.getList()},changePage:function(e){this.currentPage=e,this.getList()},getList:function(){var e=this;this.loadingStart(".table-box"),Object(l.D)(this.currentPage,this.pageSize).then(function(t){e.loadingEnd(),e.tableData=t.records,e.total=t.total,e.tableData.forEach(function(t){t.webServerRedirectUri=t.webServerRedirectUri?t.webServerRedirectUri:"-";var r=t.authorizedGrantTypes.split(",");t.authorizedGrantNames=[];for(var a=0;a<r.length;a++)for(var i=0;i<e.authorizedGrantTypesArr.length;i++)e.authorizedGrantTypesArr[i].id===r[a]&&t.authorizedGrantNames.push(e.authorizedGrantTypesArr[i].name);t.authorizedGrantNames=t.authorizedGrantNames.join(",")})}).catch(function(t){e.loadingEnd();var r=t.result?t.result:"查询授权列表失败";e.$message({type:"error",message:r})})},singleDetle:function(e){var t=this;this.$confirm("此操作将永久删除客户端编号为"+e.clientId+"授权信息, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(l.g)(parseInt(e.oauthDetailId)).then(function(e){t.$message({message:"删除授权信息成功!",type:"success"}),t.currentPage=1,t.getList()}).catch(function(e){var r=e.result?e.result:"删除授权信息失败!";t.$message({message:r,type:"error"})})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},singleUpdate:function(e){this.operateType="edit",this.dialogVisible=!0,this.dialogTitle="修改客户端授权",this.rules.clientSecret=[],this.Form.authorizedGrantTypes=e.authorizedGrantTypes.split(","),this.Form.autoapprove=parseInt(e.autoapprove),this.Form.clientId=e.clientId,this.Form.companyName=e.companyName,this.Form.oauthDetailId=e.oauthDetailId,this.Form.resourceIds=e.resourceIds,this.Form.scope=e.scope,-1===e.authorizedGrantTypes.indexOf("authorization_code")?this.showAuthorization=!1:(this.showAuthorization=!0,this.Form.webServerRedirectUri=e.webServerRedirectUri)},singleDetail:function(e){this.operateType="detail",this.dialogVisible=!0,this.dialogTitle="客户端授权详情",this.Form.authorizedGrantTypes=e.authorizedGrantTypes,this.Form.autoapprove=e.autoapprove?1:0,this.Form.clientId=e.clientId,this.Form.companyName=e.companyName,this.Form.oauthDetailId=e.oauthDetailId,this.Form.resourceIds=e.resourceIds?e.resourceIds:"暂无",this.Form.scope=e.scope,this.Form.webServerRedirectUri=e.webServerRedirectUri;var t=this.Form.authorizedGrantTypes.split(",");this.authorizedGrantNames=[];for(var r=0;r<t.length;r++)for(var a=0;a<this.authorizedGrantTypesArr.length;a++)this.authorizedGrantTypesArr[a].id===t[r]&&this.authorizedGrantNames.push(this.authorizedGrantTypesArr[a].name);this.authorizedGrantNames=this.authorizedGrantNames.join(","),-1===e.authorizedGrantTypes.indexOf("authorization_code")?this.showAuthorization=!1:this.showAuthorization=!0},add:function(){this.operateType="add",this.dialogVisible=!0,this.dialogTitle="新增客户端授权",0===this.rules.clientSecret.length&&this.rules.clientSecret.push({required:!0,message:"客户端密钥不能为空",trigger:"blur"})},submitForm:function(e){var t=this;"detail"!=this.operateType&&this.$refs[e].validate(function(e){if(!e)return!1;t.saveForm()})},saveForm:function(){var e=this;this.showAuthorization||(this.Form.webServerRedirectUri=""),this.Form.authorizedGrantTypes=this.Form.authorizedGrantTypes.join(","),"add"==this.operateType?Object(l.a)(this.Form).then(function(t){e.dialogVisible=!1,e.$message({type:"success",message:"新增授权成功"}),e.getList()}).catch(function(t){var r=t.result?t.result:"新增授权失败";e.$message({type:"error",message:r})}):"edit"==this.operateType&&Object(l.F)(this.Form).then(function(t){e.dialogVisible=!1,e.$message({type:"success",message:"修改授权成功"}),e.getList()}).catch(function(t){var r=t.result?t.result:"修改授权失败";e.$message({type:"error",message:r})})},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.Form.clearValidate()})},dialogClosed:function(){this.clearForm(this.Form),this.selectMenuTreeDate=[],this.treeShow=!1,this.Form.isFreeze=0,this.Form.isSubscibe=1,this.Form.autoapprove=1},clearForm:function(e){for(var t in e){var r=this.getDataType(e[t]);if("String"===r)e[t]="";else if("Array"===r)e[t]=[];else if("Object"===r){s()(e[t]).length>0?this.clearForm(e[t]):e[t]={}}else e[t]=null}},getDataType:function(e){var t=!0,r=!1,a=void 0;try{for(var o,s=i()(["String","Object","Number","Array","Function"]);!(t=(o=s.next()).done);t=!0){var l=o.value;if(Object.prototype.toString.call(e)==="[object "+l+"]")return l}}catch(e){r=!0,a=e}finally{try{!t&&s.return&&s.return()}finally{if(r)throw a}}},authorizedChange:function(e){-1===e.indexOf("authorization_code")?this.showAuthorization=!1:this.showAuthorization=!0}},mounted:function(){var t=this;setTimeout(function(){var r=e("#mainDiv").height(),a=e("#operateBox").height();t.tableHeight=r-a},1)},created:function(){this.getList()}}}).call(t,r("7t+N"))}});
//# sourceMappingURL=37.249a3a5ad54ae1f1832a.js.map